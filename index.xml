<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title></title>
        <link>https://charles-7777.github.io/hugo-stack/</link>
        <description>Recent content on </description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>Charles Lv</copyright><atom:link href="https://charles-7777.github.io/hugo-stack/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>å¼¹æ€§ç¢°æ’ä¸pi</title>
        <link>https://charles-7777.github.io/hugo-stack/p/%E5%BC%B9%E6%80%A7%E7%A2%B0%E6%92%9E%E4%B8%8Epi/</link>
        <pubDate>Fri, 19 Sep 2025 14:10:10 +0800</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/%E5%BC%B9%E6%80%A7%E7%A2%B0%E6%92%9E%E4%B8%8Epi/</guid>
        <description>&lt;img src="https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/2025-09-19-13-54-10-image.png" alt="Featured image of post å¼¹æ€§ç¢°æ’ä¸pi" /&gt;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/2025-09-19-13-54-10-image.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å…‰æ»‘çš„åœ°é¢ä¸Šæ”¾ç€å¤§å°ä¸¤ä¸ªæ»‘å—ï¼Œå·¦è¾¹æ˜¯å¢™ã€‚å¤§æ»‘å—çš„è´¨é‡æ˜¯å°æ»‘å—çš„Â Â å€ã€‚ç»™å¤§æ»‘å—ä¸€ä¸ªå‘å·¦çš„åˆé€Ÿåº¦ï¼Œä¸¤ä¸ªæ»‘å—ä¹‹é—´ï¼Œä»¥åŠå°æ»‘å—ä¸å¢™ä¹‹é—´ä¼šå‘ç”Ÿå¤šæ¬¡ç¢°æ’ã€‚å‡è®¾ç¢°æ’æ²¡æœ‰èƒ½é‡æŸå¤±ï¼Œé—®ä¸€å…±ä¼šå‘ç”Ÿå¤šå°‘æ¬¡ç¢°æ’ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;èƒ½é‡å®ˆæ’&lt;/li&gt;
&lt;/ul&gt;
$$
\frac{1}{2}mv^2 + \frac{1}{2}MV^2 =
\frac{1}{2}MV_0^2
$$$$
\frac{v^2}{M/m} + V^2 = V_0^2
$$&lt;p&gt;è‹¥M=Nm&lt;/p&gt;
$$
\frac{v^2}{N}+V^2=V_0^2
$$$$
\frac{v^2}{NV_0^2}+\frac{V^2}{V_0^2}=1
$$&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¢°æ’è¿‡ç¨‹æ»¡è¶³åŠ¨é‡å®ˆæ’&lt;/p&gt;
&lt;p&gt;è®¾å‘å³ä¸ºæ­£&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡ç¢°æ’&lt;/p&gt;
$$
    mv_1+MV_1=MV_0
    $$$$
    V_1=-\frac{1}{N}v_1+V_0
    $$&lt;p&gt;åˆå§‹$V_0$å‘å·¦ä¸ºè´Ÿï¼Œæ­¤æ—¶$V_1$ ä¸ºè´Ÿï¼Œ$v_1$ä¸ºè´Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¬¬äºŒæ¬¡ç¢°æ’&lt;/p&gt;
&lt;p&gt;å°æ»‘å—m æ’å¢™ä»¥åï¼Œè¢«å¢™åå¼¹ï¼Œé€Ÿåº¦åå‘å˜ä¸º $-v_1$&lt;/p&gt;
$$
    mv_2+MV_2=m(-v_1)+MV_1
    $$&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
$$
V_2=-\frac{1}{N}(v_2+v_1)+V_1
$$&lt;p&gt;Â Â Â Â Â Â Â Â Â Â Â ç›¸å½“äº$V_2=-\frac{1}{N}v_2+V_1$å‘å³å¹³ç§»äº†$|v_1|$&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/2025-09-19-12-35-38-image.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šè¿°è¿‡ç¨‹å¯ä»¥é‡å¤ä¸‹å»ï¼Œç›´åˆ°Â Â $V\geq v \gt 0$æ—¶ä¸ºæ­¢&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/2025-09-19-12-48-33-image.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;$\frac{v^2}{NV_0^2}+\frac{V^2}{V_0^2}=1$  å˜é‡ä»£æ¢$x=\frac{v}{\sqrt N |V_0|}$ $y=\frac {V}{|V_0|}$   ===&amp;gt;$x^2+y^2=1$ï¼› $
V_1=-\frac{1}{N}v_1+V_0$ ==&amp;gt;$y=-\frac {1}{\sqrt N}x-1$&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/2025-09-19-13-04-01-image.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;$\tan \theta = -\frac {1}{\sqrt N} $&lt;/p&gt;
&lt;p&gt;æ»‘å—çš„æ¯ä¸€æ¬¡ç¢°æ’ï¼Œéƒ½å¯ä»¥çœ‹æˆæ˜¯ä»å•ä½åœ†ä¸Šåˆ‡ä¸‹ä¸¤æ®µé•¿åº¦ä¸º $l=\theta R$&lt;/p&gt;
&lt;p&gt;çš„åœ†å¼§ï¼Œå³æ¯æ¬¡åˆ‡ä¸‹$s=2 l= 2 \times \theta \times R = 2\arctan \frac {1}{\sqrt N}  $&lt;/p&gt;
&lt;p&gt;æ•´ä¸ªå•ä½åœ†çš„å‘¨é•¿ä¸º$2 \pi$&lt;/p&gt;
&lt;p&gt;ç›´åˆ°å‰©ä¸‹çš„åœ†å¼§ä¸è¶³$s= 2\arctan \frac {1}{\sqrt N}$æ—¶ä¸ä¼šå†ç¢°æ’&lt;/p&gt;
&lt;p&gt;æ•…æ€»çš„ç¢°æ’æ¬¡æ•°ä¸º&lt;/p&gt;
$$
\lceil \frac {2 \pi}{2\arctan \frac {1}{\sqrt N}} \rceil -1
$$&lt;p&gt;ç”±ä¸Šå¼å¯ä»¥ç®—å‡ºï¼Œå½“ä¸¤ä¸ªæ»‘å—è´¨é‡ç›¸ç­‰æ—¶ï¼Œ$s= \arctan \frac {1}{\sqrt N}$Â ä¸º$\frac {\pi}{4}$ï¼Œç¢°æ’æ€»æ¬¡æ•°ä¸º 3ã€‚è€Œå½“ä¸¤ä¸ªæ»‘å—è´¨é‡æ‚¬æ®Šæ—¶ï¼ŒÂ $\frac {1}{\sqrt N}$å°±å¾ˆå°ï¼Œç”±$\arctan (x) = x - \frac {x^3} {3}+\frac {x^5} {5}-\frac {x^7} {7}-&amp;hellip;$æ­¤æ—¶å°±å¯ä»¥ç›´æ¥ç”¨Â $\frac {1}{\sqrt N}$æ¥è¿‘ä¼¼$\arctan \frac {1}{\sqrt N}$ï¼Œäºæ˜¯ç¢°æ’æ€»æ¬¡æ•°å°±çº¦ä¸º$\lfloor \sqrt N \pi \rfloor$Â Â ã€‚å½“ä¸¤ä¸ªæ»‘å—çš„è´¨é‡ä¹‹æ¯”Â Næ˜¯ 100 çš„å¹‚æ—¶ï¼Œ$\sqrt N$å°±æ˜¯ 10 çš„å¹‚ï¼Œè¿™å°±éš¾æ€ªç¢°æ’æ€»æ¬¡æ•°ä¼šæ°å¥½æ˜¯$\pi$çš„å‰è‹¥å¹²ä½äº†&lt;/p&gt;
</description>
        </item>
        <item>
        <title>upnp(é€šç”¨å³æ’å³ç”¨)åè®®ä»‹ç»</title>
        <link>https://charles-7777.github.io/hugo-stack/p/upnp%E9%80%9A%E7%94%A8%E5%8D%B3%E6%8F%92%E5%8D%B3%E7%94%A8%E5%8D%8F%E8%AE%AE%E4%BB%8B%E7%BB%8D/</link>
        <pubDate>Mon, 15 Sep 2025 14:53:06 +0800</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/upnp%E9%80%9A%E7%94%A8%E5%8D%B3%E6%8F%92%E5%8D%B3%E7%94%A8%E5%8D%8F%E8%AE%AE%E4%BB%8B%E7%BB%8D/</guid>
        <description>&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯-upnp&#34;&gt;ä»€ä¹ˆæ˜¯ UPnPï¼Ÿ
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;UPnP&lt;/strong&gt;ï¼ˆUniversal Plug and Playï¼Œé€šç”¨å³æ’å³ç”¨ï¼‰æ˜¯ä¸€ç§ç½‘ç»œåè®®æ ‡å‡†ï¼Œæ—¨åœ¨è®©ç½‘ç»œè®¾å¤‡ï¼ˆå¦‚è®¡ç®—æœºã€æ‰“å°æœºã€æ‘„åƒå¤´ã€æ™ºèƒ½ç”µè§†ã€è·¯ç”±å™¨ã€IoTè®¾å¤‡ç­‰ï¼‰åœ¨æ¥å…¥ç½‘ç»œæ—¶èƒ½å¤Ÿ&lt;strong&gt;è‡ªåŠ¨å‘ç°å½¼æ­¤å¹¶å»ºç«‹åŠŸèƒ½æ€§çš„ç½‘ç»œæœåŠ¡&lt;/strong&gt;ï¼Œæ— éœ€ç”¨æˆ·æ‰‹åŠ¨é…ç½®ã€‚å…¶è®¾è®¡ç›®æ ‡æ˜¯å®ç°â€œé›¶é…ç½®â€ç½‘ç»œä½“éªŒã€‚
UPnP åŸºäºå¼€æ”¾çš„äº’è”ç½‘æ ‡å‡†å’ŒæŠ€æœ¯ï¼Œå¦‚ TCP/IPã€HTTPã€XMLã€SOAP å’Œ SSDPï¼Œä½¿å…¶èƒ½åœ¨å¤šç§æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶å¹³å°ä¸Šè¿è¡Œã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;upnp-åŸºæœ¬åŸç†&#34;&gt;UPnP åŸºæœ¬åŸç†
&lt;/h2&gt;&lt;p&gt;UPnP ç½‘ç»œé€šå¸¸åŒ…å«ä¸‰ç§è§’è‰²ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è®¾å¤‡ (Device)&lt;/strong&gt;ï¼šæä¾›ä¸€é¡¹æˆ–å¤šé¡¹æœåŠ¡çš„ç½‘ç»œå®ä½“ï¼ˆå¦‚æ™ºèƒ½ç¯æ³¡ã€ç½‘ç»œæ‘„åƒå¤´ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœåŠ¡ (Service)&lt;/strong&gt;ï¼šè®¾å¤‡æä¾›çš„æœ€å°åŠŸèƒ½æ§åˆ¶å•å…ƒï¼ˆå¦‚å¼€å…³æœåŠ¡ã€äº®åº¦è°ƒèŠ‚æœåŠ¡ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ§åˆ¶ç‚¹ (Control Point)&lt;/strong&gt;ï¼šå‘ç°å¹¶æ§åˆ¶è®¾å¤‡çš„æ§åˆ¶å™¨ï¼ˆå¦‚æ‰‹æœºAppã€ç”µè„‘ä¸Šçš„è½¯ä»¶ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;UPnP çš„å·¥ä½œæµç¨‹å¯åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒé˜¶æ®µï¼š&lt;/p&gt;
&lt;h3 id=&#34;å¯»å€addressing&#34;&gt;å¯»å€ï¼ˆAddressingï¼‰
&lt;/h3&gt;&lt;p&gt;è®¾å¤‡æ¥å…¥ç½‘ç»œåï¼Œé¦–å…ˆé€šè¿‡ DHCP è·å– IP åœ°å€ï¼›è‹¥ DHCP ä¸å¯ç”¨ï¼Œåˆ™ä½¿ç”¨ Auto-IPï¼ˆå¦‚ 169.254.x.xï¼‰è‡ªè¡Œåˆ†é…ä¸€ä¸ªå±€åŸŸç½‘å†…å¯ç”¨çš„ IPã€‚&lt;/p&gt;
&lt;h3 id=&#34;å‘ç°discovery&#34;&gt;å‘ç°ï¼ˆDiscoveryï¼‰
&lt;/h3&gt;&lt;p&gt;è®¾å¤‡ä½¿ç”¨ &lt;strong&gt;SSDP&lt;/strong&gt;ï¼ˆSimple Service Discovery Protocolï¼Œç®€å•æœåŠ¡å‘ç°åè®®ï¼‰å‘å±€åŸŸç½‘å¹¿æ’­è‡ªå·±çš„å­˜åœ¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¹¿æ’­æ¶ˆæ¯&lt;/strong&gt;ï¼šè®¾å¤‡å‘é€ &lt;code&gt;M-SEARCH&lt;/code&gt; è¯·æ±‚æˆ– &lt;code&gt;NOTIFY&lt;/code&gt; é€šçŸ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å“åº”æœºåˆ¶&lt;/strong&gt;ï¼šæ§åˆ¶ç‚¹ï¼ˆå¦‚æ‰‹æœºAppæˆ–PCï¼‰ç›‘å¬è¿™äº›å¹¿æ’­ï¼Œå¹¶å‘æ„Ÿå…´è¶£çš„è®¾å¤‡å‘é€è¯·æ±‚è·å–è¯¦ç»†ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ç»„æ’­åœ°å€ &lt;code&gt;239.255.255.250:1900&lt;/code&gt; è¿›è¡Œé€šä¿¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æè¿°description&#34;&gt;æè¿°ï¼ˆDescriptionï¼‰
&lt;/h3&gt;&lt;p&gt;æ§åˆ¶ç‚¹é€šè¿‡ HTTP GET è¯·æ±‚ä»è®¾å¤‡æä¾›çš„ URL è·å– &lt;strong&gt;XML æè¿°æ–‡ä»¶&lt;/strong&gt;ï¼Œè¯¥æ–‡ä»¶åŒ…å«ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è®¾å¤‡ç±»å‹ã€å‚å•†ä¿¡æ¯ã€å‹å·ã€åºåˆ—å·&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ”¯æŒçš„æœåŠ¡åˆ—è¡¨ï¼ˆå¦‚ç«¯å£æ˜ å°„ã€éŸ³é‡æ§åˆ¶ç­‰ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ¯ä¸ªæœåŠ¡çš„æ§åˆ¶URLã€äº‹ä»¶URLã€æè¿°URL&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ§åˆ¶control&#34;&gt;æ§åˆ¶ï¼ˆControlï¼‰
&lt;/h3&gt;&lt;p&gt;æ§åˆ¶ç‚¹é€šè¿‡ &lt;strong&gt;SOAP&lt;/strong&gt;ï¼ˆSimple Object Access Protocolï¼‰åè®®å‘è®¾å¤‡å‘é€æ§åˆ¶æŒ‡ä»¤ï¼Œè°ƒç”¨å…¶æœåŠ¡æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è°ƒç”¨â€œAddPortMappingâ€åœ¨è·¯ç”±å™¨ä¸Šæ·»åŠ ç«¯å£è½¬å‘è§„åˆ™&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è°ƒç”¨â€œSetVolumeâ€è°ƒèŠ‚éŸ³å“éŸ³é‡
è¯·æ±‚å’Œå“åº”å‡ä½¿ç”¨ XML æ ¼å¼å°è£…ï¼Œé€šè¿‡ HTTP POST å‘é€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;äº‹ä»¶é€šçŸ¥eventing&#34;&gt;äº‹ä»¶é€šçŸ¥ï¼ˆEventingï¼‰
&lt;/h3&gt;&lt;p&gt;è®¾å¤‡çŠ¶æ€å˜åŒ–æ—¶ï¼ˆå¦‚æ’­æ”¾çŠ¶æ€æ”¹å˜ã€ç«¯å£æ˜ å°„æˆåŠŸï¼‰ï¼Œå¯é€šè¿‡ &lt;strong&gt;GENA&lt;/strong&gt;ï¼ˆGeneral Event Notification Architectureï¼‰åè®®å‘è®¢é˜…çš„æ§åˆ¶ç‚¹æ¨é€äº‹ä»¶é€šçŸ¥ï¼ˆä¹Ÿæ˜¯ XML æ ¼å¼ï¼‰ï¼Œå®ç°çŠ¶æ€åŒæ­¥ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å±•ç¤ºpresentationå¯é€‰&#34;&gt;å±•ç¤ºï¼ˆPresentationï¼Œå¯é€‰ï¼‰
&lt;/h3&gt;&lt;p&gt;è®¾å¤‡å¯æä¾›ä¸€ä¸ªå†…ç½®çš„ Web ç•Œé¢ï¼ˆURL åŒ…å«åœ¨æè¿°æ–‡ä»¶ä¸­ï¼‰ï¼Œç”¨æˆ·å¯é€šè¿‡æµè§ˆå™¨è®¿é—®è¿›è¡Œå›¾å½¢åŒ–æ§åˆ¶æˆ–æŸ¥çœ‹çŠ¶æ€ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;upnp-ä¸»è¦åŠŸèƒ½&#34;&gt;UPnP ä¸»è¦åŠŸèƒ½
&lt;/h2&gt;&lt;h3 id=&#34;è‡ªåŠ¨è®¾å¤‡å‘ç°ä¸äº’æ“ä½œ&#34;&gt;è‡ªåŠ¨è®¾å¤‡å‘ç°ä¸äº’æ“ä½œ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å±€åŸŸç½‘å†…è®¾å¤‡è‡ªåŠ¨å¹¿æ’­èº«ä»½ï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥ IP æˆ–é…ç½®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸åŒå‚å•†è®¾å¤‡åªè¦éµå¾ª UPnP æ ‡å‡†å³å¯äº’é€šï¼ˆå¦‚æ™ºèƒ½ç¯æ³¡ + æ‰‹æœºAppï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è‡ªåŠ¨ç«¯å£æ˜ å°„nat-ç©¿é€&#34;&gt;è‡ªåŠ¨ç«¯å£æ˜ å°„ï¼ˆNAT ç©¿é€ï¼‰
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æœ€é‡è¦åŠŸèƒ½ä¹‹ä¸€&lt;/strong&gt;ï¼šå…è®¸å†…ç½‘è®¾å¤‡ï¼ˆå¦‚æ¸¸æˆä¸»æœºã€P2Pè½¯ä»¶ã€ç›‘æ§æ‘„åƒå¤´ï¼‰&lt;strong&gt;è‡ªåŠ¨åœ¨è·¯ç”±å™¨ä¸Šåˆ›å»ºç«¯å£è½¬å‘è§„åˆ™&lt;/strong&gt;ï¼Œå®ç°ä»å¤–ç½‘è®¿é—®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åº”ç”¨åœºæ™¯ï¼šåœ¨çº¿æ¸¸æˆè”æœºã€è¿œç¨‹è®¿é—®å®¶åº­æ‘„åƒå¤´ã€BTä¸‹è½½åŠ é€Ÿç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ— éœ€ç”¨æˆ·ç™»å½•è·¯ç”±å™¨åå°æ‰‹åŠ¨è®¾ç½®ç«¯å£è½¬å‘ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è®¾å¤‡æ§åˆ¶ä¸çŠ¶æ€åŒæ­¥&#34;&gt;è®¾å¤‡æ§åˆ¶ä¸çŠ¶æ€åŒæ­¥
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¯è¿œç¨‹æ§åˆ¶è®¾å¤‡åŠŸèƒ½ï¼ˆæ’­æ”¾/æš‚åœã€å¼€å…³æœºã€è°ƒèŠ‚å‚æ•°ç­‰ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®æ—¶æ¥æ”¶è®¾å¤‡çŠ¶æ€å˜æ›´é€šçŸ¥ï¼ˆå¦‚â€œæ’­æ”¾ç»“æŸâ€ã€â€œç”µé‡ä½â€ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é›¶é…ç½®ç½‘ç»œä½“éªŒ&#34;&gt;é›¶é…ç½®ç½‘ç»œä½“éªŒ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ç”¨æˆ·æ— éœ€äº†è§£ç½‘ç»œçŸ¥è¯†ï¼Œæ’ä¸Šç½‘çº¿æˆ–è¿ä¸ŠWiFiå³å¯ä½¿ç”¨è®¾å¤‡åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç‰¹åˆ«é€‚åˆå®¶åº­ç”¨æˆ·å’Œ IoT è®¾å¤‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ”¯æŒå¤šç§è®¾å¤‡ç±»å‹&#34;&gt;æ”¯æŒå¤šç§è®¾å¤‡ç±»å‹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;è·¯ç”±å™¨ã€æ‰“å°æœºã€NASã€åª’ä½“æœåŠ¡å™¨ï¼ˆDLNAï¼‰ã€æ™ºèƒ½å®¶ç”µã€å®‰é˜²è®¾å¤‡ç­‰å‡å¯æ”¯æŒ UPnPã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;upnp-çš„ä¼˜ç¼ºç‚¹&#34;&gt;UPnP çš„ä¼˜ç¼ºç‚¹
&lt;/h2&gt;&lt;h3 id=&#34;-ä¼˜ç‚¹&#34;&gt;âœ… ä¼˜ç‚¹ï¼š
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç®€å•æ˜“ç”¨&lt;/strong&gt;ï¼šçœŸæ­£å®ç°â€œå³æ’å³ç”¨â€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è·¨å¹³å°å…¼å®¹&lt;/strong&gt;ï¼šåŸºäºæ ‡å‡†äº’è”ç½‘åè®®ï¼Œæ”¯æŒ Windowsã€Linuxã€macOSã€Androidã€iOS ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜&lt;/strong&gt;ï¼šå‡å°‘äººå·¥é…ç½®é”™è¯¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;-ç¼ºç‚¹ä¸é£é™©&#34;&gt;âŒ ç¼ºç‚¹ä¸é£é™©ï¼š
&lt;/h3&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®‰å…¨é£é™©&lt;/strong&gt;ï¼šæ¶æ„è½¯ä»¶å¯èƒ½åˆ©ç”¨ UPnP è‡ªåŠ¨åœ¨è·¯ç”±å™¨ä¸Šå¼€æ´ï¼Œæš´éœ²å†…ç½‘æœåŠ¡ï¼ˆå¦‚å‹’ç´¢è½¯ä»¶ã€åƒµå°¸ç½‘ç»œï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºä¹è®¤è¯æœºåˆ¶&lt;/strong&gt;ï¼šé»˜è®¤æ— ç”¨æˆ·æƒé™æ§åˆ¶ï¼Œå±€åŸŸç½‘å†…ä»»ä½•è®¾å¤‡éƒ½å¯æ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¨³å®šæ€§é—®é¢˜&lt;/strong&gt;ï¼šéƒ¨åˆ†è®¾å¤‡å®ç°ä¸è§„èŒƒï¼Œå¯èƒ½å¯¼è‡´å†²çªæˆ–å¤±æ•ˆã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ›¡ï¸ &lt;strong&gt;å®‰å…¨å»ºè®®&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®¶åº­ç”¨æˆ·å¦‚æ— è¿œç¨‹è®¿é—®éœ€æ±‚ï¼Œå»ºè®®åœ¨è·¯ç”±å™¨ä¸­&lt;strong&gt;å…³é—­ UPnP åŠŸèƒ½&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¼ä¸šç½‘ç»œåº”ä¸¥æ ¼ç¦ç”¨ UPnPã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨æ”¯æŒ UPnP-IGD v2 çš„è®¾å¤‡ï¼Œå…¶å®‰å…¨æ€§æœ‰æ‰€å¢å¼ºï¼ˆæ”¯æŒ PIN éªŒè¯ç­‰ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;å…¸å‹åº”ç”¨åœºæ™¯&#34;&gt;å…¸å‹åº”ç”¨åœºæ™¯
&lt;/h2&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;åœºæ™¯&lt;/th&gt;
          &lt;th&gt;è¯´æ˜&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;åœ¨çº¿æ¸¸æˆä¸»æœºè”ç½‘&lt;/td&gt;
          &lt;td&gt;Xbox/PS è‡ªåŠ¨è¯·æ±‚ç«¯å£æ˜ å°„ï¼Œå®ç° NAT å¼€æ”¾æˆ–ä¸­ç­‰ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;P2P ä¸‹è½½ï¼ˆå¦‚ BitTorrentï¼‰&lt;/td&gt;
          &lt;td&gt;å®¢æˆ·ç«¯è‡ªåŠ¨æ˜ å°„ç«¯å£ï¼Œæé«˜è¿æ¥æ•°å’Œä¸‹è½½é€Ÿåº¦ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;è¿œç¨‹è®¿é—®å®¶åº­æ‘„åƒå¤´/NAS&lt;/td&gt;
          &lt;td&gt;è‡ªåŠ¨åœ¨è·¯ç”±å™¨ä¸Šæ˜ å°„ç«¯å£ï¼Œä¾¿äºå¤–ç½‘è®¿é—®ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;DLNA åª’ä½“å…±äº«&lt;/td&gt;
          &lt;td&gt;ç”µè§†è‡ªåŠ¨å‘ç°å±€åŸŸç½‘å†…çš„åª’ä½“æœåŠ¡å™¨å¹¶æ’­æ”¾å½±ç‰‡ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æ™ºèƒ½å®¶å±…æ§åˆ¶&lt;/td&gt;
          &lt;td&gt;æ‰‹æœº App è‡ªåŠ¨å‘ç°å¹¶æ§åˆ¶æ™ºèƒ½æ’åº§ã€ç¯æ³¡ç­‰ã€‚&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id=&#34;ç›¸å…³åè®®ä¸æ ‡å‡†ç»„ç»‡&#34;&gt;ç›¸å…³åè®®ä¸æ ‡å‡†ç»„ç»‡
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ ‡å‡†ç»„ç»‡&lt;/strong&gt;ï¼šUPnP Forumï¼ˆç°ç”± Open Connectivity Foundation æ¥ç®¡ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ¸å¿ƒåè®®&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;SSDPï¼ˆå‘ç°ï¼‰&lt;/li&gt;
&lt;li&gt;HTTP + XMLï¼ˆæè¿°ï¼‰&lt;/li&gt;
&lt;li&gt;SOAPï¼ˆæ§åˆ¶ï¼‰&lt;/li&gt;
&lt;li&gt;GENAï¼ˆäº‹ä»¶ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å±•æ ‡å‡†&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;UPnP-IGD&lt;/strong&gt;ï¼ˆInternet Gateway Deviceï¼‰ï¼šä¸“ç”¨äºè·¯ç”±å™¨ç«¯å£æ˜ å°„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DLNA&lt;/strong&gt;ï¼ˆDigital Living Network Allianceï¼‰ï¼šåŸºäº UPnP çš„åª’ä½“å…±äº«æ ‡å‡†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“
&lt;/h2&gt;&lt;p&gt;UPnP æ˜¯ä¸€é¡¹æ—¨åœ¨ç®€åŒ–å®¶åº­å’Œå°å‹åŠå…¬ç½‘ç»œè®¾å¤‡äº’è”çš„æŠ€æœ¯ï¼Œé€šè¿‡æ ‡å‡†åŒ–çš„å‘ç°ã€æè¿°ã€æ§åˆ¶å’Œäº‹ä»¶æœºåˆ¶ï¼Œå®ç°äº†çœŸæ­£çš„â€œé›¶é…ç½®â€ä½“éªŒã€‚å°¤å…¶åœ¨è‡ªåŠ¨ç«¯å£æ˜ å°„æ–¹é¢æå¤§åœ°æ–¹ä¾¿äº†æ™®é€šç”¨æˆ·ã€‚ç„¶è€Œï¼Œå…¶å®‰å…¨æœºåˆ¶çš„ç¼ºå¤±ä¹Ÿå¸¦æ¥æ½œåœ¨é£é™©ï¼Œç”¨æˆ·åº”æ ¹æ®å®é™…éœ€æ±‚æƒè¡¡æ˜¯å¦å¯ç”¨ã€‚
éšç€ IoT å’Œæ™ºèƒ½å®¶å±…çš„æ™®åŠï¼ŒUPnP ä»åœ¨å¹¿æ³›ä½¿ç”¨ï¼Œä½†æ­£é€æ­¥è¢«æ›´å®‰å…¨çš„æ›¿ä»£æ–¹æ¡ˆï¼ˆå¦‚ NAT-PMPã€PCPã€mDNS + DNS-SDï¼‰æ‰€è¡¥å……æˆ–å–ä»£ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ“š å‚è€ƒèµ„æ–™ï¼šUPnP Device Architecture 2.0, IETF RFC 6970, OCF Specifications&lt;/p&gt;&lt;/blockquote&gt;
</description>
        </item>
        <item>
        <title>æ­å»ºvpn server</title>
        <link>https://charles-7777.github.io/hugo-stack/p/%E6%90%AD%E5%BB%BAvpn-server/</link>
        <pubDate>Mon, 01 Sep 2025 19:31:02 +0800</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/%E6%90%AD%E5%BB%BAvpn-server/</guid>
        <description>&lt;h2 id=&#34;docker-æ­å»º&#34;&gt;docker æ­å»º
&lt;/h2&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/hwdsl2/docker-ipsec-vpn-server&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;hwdsl2/docker-ipsec-vpn-server: Docker image to run an IPsec VPN server, with IPsec/L2TP, Cisco IPsec and IKEv2&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker run &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --name ipsec-vpn-server &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --restart&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;always &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --env-file ./vpn.env &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -v ikev2-vpn-data:/etc/ipsec.d &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -v /lib/modules:/lib/modules:ro &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -p 500:500/udp &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -p 4500:4500/udp &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -d --privileged &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    hwdsl2/ipsec-vpn-server
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;vpn.env&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;VPN_IPSEC_PSK=ipsec
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;VPN_USER=vpnuser
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;VPN_PASSWORD=123456
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;VPN_PUBLIC_IP=x.x.x.x
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;VPN_ADDL_USERS=vpnuser1 vpnuser2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;VPN_ADDL_PASSWORDS=123456 123456                            
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æŸ¥çœ‹dockerå¯åŠ¨log&lt;/p&gt;
&lt;p&gt;&lt;code&gt;docker logs ipsec-vpn-server&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä¸€äº›client è¿æ¥å¯èƒ½é‡åˆ°çš„é—®é¢˜&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/hwdsl2/setup-ipsec-vpn/blob/master/docs/clients.md&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;setup-ipsec-vpn/docs/clients.md at master Â· hwdsl2/setup-ipsec-vpn&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;è¿æ¥ipsecl2tp-å¯èƒ½é‡åˆ°çš„é—®é¢˜&#34;&gt;è¿æ¥ipsec/l2tp å¯èƒ½é‡åˆ°çš„é—®é¢˜
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;Windows error 809&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Error 809: The network connection between your computer and the VPN server could not be established because the remote server is not responding. This could be because one of the network devices (e.g, firewalls, NAT, routers, etc) between your computer and the remote server is not configured to allow VPN connections. Please contact your Administrator or your service provider to determine which device may be causing the problem.&lt;/p&gt;&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;REG ADD HKLM\SYSTEM\CurrentControlSet\Services\PolicyAgent /v AssumeUDPEncapsulationContextOnSendRule /t REG_DWORD /d 0x2 /f
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;é…ç½®ikev2&#34;&gt;é…ç½®Ikev2
&lt;/h3&gt;&lt;p&gt;å¯å‚è€ƒ&lt;a class=&#34;link&#34; href=&#34;https://github.com/hwdsl2/docker-ipsec-vpn-server/blob/master/README-zh.md#%e9%85%8d%e7%bd%ae%e5%b9%b6%e4%bd%bf%e7%94%a8-ikev2-vpn&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;docker-ipsec-vpn-server/README-zh.md at master Â· hwdsl2/docker-ipsec-vpn-server&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;docker logs ipsec-vpn-server&lt;/code&gt;æŸ¥çœ‹IKEv2 ç›¸å…³é…ç½®ä¿¡æ¯&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;IKEv2 is already set up. Details for IKEv2 mode:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;VPN server address: 208.216.217.35
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;VPN client name: vpnclient
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Client configuration is available inside the
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Docker container at:
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é¦–æ¬¡å¯åŠ¨æ—¶ï¼Œå¯èƒ½ä½¿ç”¨çš„æ˜¯é»˜è®¤é…ç½®ï¼Œéœ€è¦æ‰‹åŠ¨æ›´æ”¹&lt;/p&gt;
&lt;p&gt;è¿›å…¥docker&lt;code&gt;docker exec  -it ipsec-vpn-server /bin/sh&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget https://get.vpnsetup.net/ikev2addr -O ikev2addr.sh
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;bash ikev2addr.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ‰§è¡Œ&lt;code&gt;ikev2addr.sh&lt;/code&gt;å»æ‰‹åŠ¨æ›´æ”¹vpnserver address&lt;/p&gt;
&lt;h4 id=&#34;é…ç½®ikev2-clientwindows&#34;&gt;é…ç½®IKEv2 clientï¼ˆwindows)
&lt;/h4&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# æŸ¥çœ‹å®¹å™¨å†…çš„ /etc/ipsec.d ç›®å½•çš„æ–‡ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker exec -it ipsec-vpn-server ls -l /etc/ipsec.d
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# ç¤ºä¾‹ï¼šå°†ä¸€ä¸ªå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä»å®¹å™¨å¤åˆ¶åˆ° Docker ä¸»æœºå½“å‰ç›®å½•
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker cp ipsec-vpn-server:/etc/ipsec.d/vpnclient.p12 ./
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨åˆ›å»ºIKEv2è¿æ¥ä¹‹å‰ï¼Œéœ€è¦åœ¨windows å®¢æˆ·ç«¯ å¯¼å…¥è¯ä¹¦&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# Import .p12 file (replace with your own value)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;certutil -f -importpfx &amp;#34;\path\to\your\file.p12&amp;#34; NoExport
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;å¯èƒ½é‡åˆ°çš„é—®é¢˜&#34;&gt;å¯èƒ½é‡åˆ°çš„é—®é¢˜
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;IKE authentication credentials are unacceptable&lt;/p&gt;
&lt;p&gt;å¯èƒ½æ˜¯IKEv2 vpn serverä¸­ server addressé…ç½®ä¸å¯¹ï¼Œå¯ä»¥å°è¯•æ›´æ”¹VPN server address&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Policy match error&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;REG ADD HKLM\SYSTEM\CurrentControlSet\Services\RasMan\Parameters /v NegotiateDH2048_AES256 /t REG_DWORD /d 0x1 /f
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åœ¨windows-server-ä¸Šæ­å»ºvpn-server&#34;&gt;åœ¨windows server ä¸Šæ­å»ºvpn server
&lt;/h2&gt;&lt;p&gt;å¯å‚è€ƒ&lt;a class=&#34;link&#34; href=&#34;https://blog.cpmsxe.net/2020/04/01/windows-server-2012-r2-%e5%ae%89%e8%a3%85sstp-l2tp-pptp/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Windows Server 2012 R2 å®‰è£…SSTP/L2TP/PPTP â€“ Noname&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;åœ¨windows-ä¸Šå®‰è£…å¹¶ä½¿ç”¨openvpn&#34;&gt;åœ¨windows ä¸Šå®‰è£…å¹¶ä½¿ç”¨openvpn
&lt;/h2&gt;&lt;p&gt;å‚è€ƒé“¾æ¥&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.eyyyye.com/article/21&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;openvpnå®‰è£…é…ç½®è¯´æ˜(windowsç³»ç»Ÿ) &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.cnblogs.com/cj1698/p/14530448.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;OpenVPN Windows å¹³å°å®‰è£…éƒ¨ç½²æ•™ç¨‹ &lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;å®‰è£…openvpn&#34;&gt;å®‰è£…openvpn
&lt;/h3&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/OpenVPN/openvpn&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/OpenVPN/openvpn&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://openvpn.net/community-downloads/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://openvpn.net/community-downloads/&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;openvpnè½¯ä»¶æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½æ˜¯åŒä¸€ä¸ªå®‰è£…åŒ…&lt;/li&gt;
&lt;li&gt;å®‰è£…æœåŠ¡ç«¯çš„æ—¶å€™è¦é€‰æ‹©&lt;strong&gt;Customize&lt;/strong&gt;ï¼Œå‹¾é€‰openvpn serviceå’Œ&lt;strong&gt;EasyRSA3&lt;/strong&gt; å®‰è£…ï¼Œç”¨äºæœåŠ¡ç«¯é…ç½®å’Œè¯ä¹¦ç”Ÿæˆä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;å®‰è£…å®¢æˆ·ç«¯æ—¶å¯ç›´æ¥ç‚¹å‡»&lt;strong&gt;Install Now&lt;/strong&gt;è¿›è¡Œå®‰è£…&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¯ä¹¦ç”Ÿæˆ&#34;&gt;è¯ä¹¦ç”Ÿæˆ
&lt;/h3&gt;&lt;p&gt;å®‰è£…æœåŠ¡ç«¯çš„æ—¶å€™å·²ç»å®‰è£…äº†è¯ä¹¦ç”Ÿæˆå·¥å…·**EasyRSA3ï¼Œ**ä½¿ç”¨æ­¤å·¥å…·å³å¯ç”Ÿæˆæ‰€éœ€è¯ä¹¦&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;è¿›å…¥EasyRSA shell ç¯å¢ƒdosçª—å£&lt;/p&gt;
&lt;p&gt;è¿›å…¥&lt;code&gt;C:\Program Files\OpenVPN\easy-rsa&lt;/code&gt;ç›®å½•ï¼ŒåŒå‡»&lt;code&gt;EasyRSA-Start.bat&lt;/code&gt; è¿›å…¥&lt;code&gt;EasyRSA shell&lt;/code&gt; ç¯å¢ƒdosçª—å£ä¸­&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆå§‹åŒ–è¯ä¹¦ç”Ÿæˆç¨‹åº&lt;/p&gt;
&lt;p&gt;å¼¹å‡ºçš„dosçª—å£ä¸­è¾“å…¥&lt;code&gt;./easyrsa init-pki&lt;/code&gt; åˆå§‹åŒ–è¯ä¹¦ç”Ÿæˆç¨‹åºï¼Œåˆå§‹åŒ–æˆåŠŸåä¼šåœ¨C:\Program Files\OpenVPN\easy-rsaç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹&lt;strong&gt;kpi&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”Ÿæˆcaè¯ä¹¦&lt;/p&gt;
&lt;p&gt;åœ¨dosçª—å£ä¸­è¾“å…¥&lt;code&gt;./easyrsa build-ca nopass&lt;/code&gt;ç”Ÿæˆæ— å¯†ç CAè¯ä¹¦ï¼Œç”Ÿæˆè¿‡ç¨‹ä¸­ä¼šè¦æ±‚è¾“å…¥è¯ä¹¦åç§°ï¼Œéšæ„è¾“å…¥å³å¯ï¼Œç”Ÿæˆç»“æŸåä¼šæ‰“å°å‡ºè¯ä¹¦æ‰€åœ¨ç›®å½•&lt;code&gt;easy-rsa\pki\ca.crt&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”ŸæˆæœåŠ¡ç«¯è¯ä¹¦&lt;/p&gt;
&lt;p&gt;è¾“å…¥&lt;code&gt;./easyrsa build-server-full server nopass&lt;/code&gt; ç”Ÿæˆæ— å¯†ç æœåŠ¡ç«¯è¯ä¹¦,ç”Ÿæˆåè¯ä¹¦æ–‡ä»¶åœ¨&lt;code&gt;C:\Program Files\OpenVPN\easy-rsa\pki\issued&lt;/code&gt;æ–‡ä»¶å¤¹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦&lt;/p&gt;
&lt;p&gt;è¾“å…¥&lt;code&gt;./easyrsa build-client-full client nopass&lt;/code&gt;ç”Ÿæˆæ— å¯†ç å®¢æˆ·ç«¯è¯ä¹¦,ç”Ÿæˆåè¯ä¹¦åœ¨&lt;code&gt;C:\Program Files\OpenVPN\easy-rsa\pki\issued&lt;/code&gt;æ–‡ä»¶å¤¹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”ŸæˆDHå¯†é’¥äº¤æ¢åè®®&lt;/p&gt;
&lt;p&gt;è¾“å…¥&lt;code&gt;./easyrsa gen-dh&lt;/code&gt;ç”ŸæˆDHå¯†é’¥äº¤æ¢åè®®æ–‡ä»¶,ç”Ÿæˆæ–‡ä»¶åœ¨&lt;code&gt;C:\Program Files\OpenVPN\easy-rsa\pk&lt;/code&gt;iç›®å½•ä¸‹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç›®å½•&lt;code&gt;C:\Program Files\OpenVPN\easy-rsa\pki\private&lt;/code&gt;ä¸‹ä¸ºè¯ä¹¦key&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;openvpn --genkey tls-auth ta.key&lt;/code&gt;to help block DoS attacks and UDP port flooding.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;é…ç½®æ–‡ä»¶&#34;&gt;é…ç½®æ–‡ä»¶
&lt;/h3&gt;&lt;p&gt;æœåŠ¡ç«¯é…ç½®æ–‡ä»¶æ¨¡æ¿ä¸ºserver.ovpnï¼Œå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶client.ovpnï¼Œåœ¨ C:\Program Files\OpenVPN\sample-configç›®å½•ä¸‹æœ‰ã€‚åœ¨æœåŠ¡ç«¯æˆ–å®¢æˆ·ç«¯çš„windowsä¸»æœºä¸Šå¤åˆ¶å¯¹åº”é…ç½®æ–‡ä»¶æ¨¡æ¿åˆ°C:\Program Files\OpenVPN\configç›®å½•ä¸‹&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é…ç½®æ–‡ä»¶ä¸­  &lt;strong&gt;ï¼›&lt;/strong&gt; &lt;strong&gt;#&lt;/strong&gt;  éƒ½å¯ä»¥ç”¨ä½œæ³¨é‡Šï¼Œä½†æ˜¯ä¸æ”¯æŒåœ¨é…ç½®æŒ‡ä»¤çš„åŒä¸€è¡Œåé¢æ·»åŠ æ³¨é‡Š&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ &lt;code&gt;cipher AES-256-CBC #é€‰æ‹©åŠ å¯†ç®—æ³•&lt;/code&gt;   è¿™æ ·å†™æ˜¯é”™è¯¯çš„ï¼Œè§£ææ—¶ä¼šå°†cipher åçš„&lt;code&gt;AES-256-CBC #é€‰æ‹©åŠ å¯†ç®—æ³•&lt;/code&gt;æ•´ä¸ªå­—ç¬¦ä¸²å½“æˆå‚æ•°å€¼ï¼Œä»è€Œå¯¼è‡´é”™è¯¯&lt;/p&gt;&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æœåŠ¡ç«¯server.ovpn ä¿®æ”¹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç«¯å£ï¼šï¼ˆå…¬ç½‘éœ€è¦å¯¹åº”å¼€é€šæ­¤ç«¯å£ï¼‰port udp 1194&lt;/li&gt;
&lt;li&gt;åè®®æ–‡ä»¶åï¼šdh dh2048.pemä¿®æ”¹ä¸ºdh dh.pem&lt;/li&gt;
&lt;li&gt;è¿è¡Œå¤šç”¨æˆ·ä½¿ç”¨åŒä¸€å®¢æˆ·ç«¯è¯ä¹¦ï¼š;duplicate-cnå–æ¶ˆæ³¨é‡Šï¼ˆå‰é¢;å·åˆ é™¤ï¼‰ä¿®æ”¹ä¸ºduplicate-cn&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®¢æˆ·ç«¯client.ovpnä¿®æ”¹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¿®æ”¹è¿æ¥æœåŠ¡å™¨åœ°å€: remote my-server-1 1194ä¿®æ”¹ä¸ºremote æœåŠ¡å™¨å…¬ç½‘ip 1194&lt;/li&gt;
&lt;li&gt;å–æ¶ˆæ³¨é‡Šæ‰æ­¤è¡Œ:  ;tls-auth ta.key 1ä¿®æ”¹ä¸º tls-auth ta.key 1ï¼ˆå‰é¢;å·åˆ é™¤ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¯ä¹¦å¤åˆ¶&#34;&gt;è¯ä¹¦å¤åˆ¶
&lt;/h3&gt;&lt;p&gt;é…ç½®æ–‡ä»¶server.ovpn client.ovpn ä¸­çš„è¯ä¹¦ å’Œ key éƒ½æ˜¯åªæœ‰æ–‡ä»¶å ï¼Œæ²¡æœ‰è§„å®šå…·ä½“è·¯å¾„&lt;/p&gt;
&lt;p&gt;éœ€è¦å°†å…¶copy åˆ°&lt;code&gt;C:\Program Files\OpenVPN\config&lt;/code&gt; ä¸‹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å°†æœåŠ¡ç«¯è¯ä¹¦ï¼ŒæœåŠ¡ç«¯keyï¼Œcaè¯ä¹¦ï¼Œdhæ–‡ä»¶,  ta.keyå¤åˆ¶åˆ°æ–‡ä»¶å¤¹C:\Program Files\OpenVPN\configä¸‹&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å°†å®¢æˆ·ç«¯è¯ä¹¦ï¼Œå®¢æˆ·ç«¯keyï¼Œcaè¯ä¹¦ , ta.keyå¤åˆ¶åˆ°ç›®å½•C:\Program Files\OpenVPN\configä¸‹&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è¿æ¥&#34;&gt;è¿æ¥
&lt;/h3&gt;&lt;p&gt;å³é”®ç‚¹å‡»ä»»åŠ¡æ å¸¦é”å°ç”µè„‘å›¾æ ‡ï¼Œç‚¹å‡»è¿æ¥,è¿æ¥æˆåŠŸåç³»ç»Ÿåˆ†é…ipï¼Œå°ç”µè„‘å˜ç»¿&lt;/p&gt;
&lt;h3 id=&#34;å…¶å®ƒ&#34;&gt;å…¶å®ƒ
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;tls-auth ta.key é…ç½®ä¸ºé˜²å¾¡ DoS,UDP æ·¹æ²¡ç­‰æ¶æ„æ”»å‡»è¡Œä¸ºçš„é€‰é¡¹ï¼Œå¦‚é…ç½®éœ€è¦ç”Ÿæˆta.keyè¯ä¹¦ï¼Œç”Ÿæˆæ–¹å¼ï¼šè·³è½¬åˆ°openvpnè½¯ä»¶çš„binç›®å½•ä¸‹ï¼Œåœ¨dosçª—å£ä¸­è¾“å…¥ï¼š&lt;code&gt;openvpn.exe --genkey --secret ta.key &lt;/code&gt;ï¼Œä¾¿åœ¨binç›®å½•ä¸‹ç”Ÿæˆta.keyè¯ä¹¦äº†ï¼Œå¤åˆ¶åˆ°é…ç½®æ–‡ä»¶ç›®å½•å³å¯ã€‚&lt;/li&gt;
&lt;li&gt;è¯ä¹¦æ—¶é—´ç­‰å‚æ•°å¯ä»¥åœ¨varsæ–‡ä»¶ä¸­è®¾ç½®ï¼Œè®¾ç½®åé‡æ–°å¯åŠ¨EasyRSA-Startå³å¯åŠ è½½æ–°é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;;client-to-clientä¸ºå®¢æˆ·ç«¯ä¹‹é—´æ˜¯å¦èƒ½ç›´æ¥è®¿é—®çš„é…ç½®ï¼Œå»æ‰æ³¨é‡Šåç”Ÿæ•ˆã€‚&lt;/li&gt;
&lt;li&gt;;push &amp;ldquo;redirect-gateway def1 bypass-dhcp&amp;rdquo; é…ç½®å¼€å¯åå®¢æˆ·ç«¯æ‰€æœ‰æµé‡å°†è·¯ç”±è‡³æœåŠ¡å™¨ï¼Œéœ€è¦åœ¨è®¿é—®ç«¯æœåŠ¡å™¨ä¸Šé…ç½®è·¯ç”±è½¬å‘åæ‰å¯ä»¥è®¿é—®å…¬ç½‘ã€‚&lt;/li&gt;
&lt;li&gt;å¼€å¯ç¬¬4æ­¥åï¼Œå¯åœ¨å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä¸­å¢åŠ &lt;code&gt;route 192.168.1.0 255.255.255.0 net_gateway&lt;/code&gt;é…ç½®ï¼Œä½¿è¯¥ç½‘æ®µä¸é€šè¿‡openvpnè·¯ç”±&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title>CORE(Common Open Research Emulator)ç½‘ç»œä»¿çœŸå·¥å…·</title>
        <link>https://charles-7777.github.io/hugo-stack/p/corecommon-open-research-emulator%E7%BD%91%E7%BB%9C%E4%BB%BF%E7%9C%9F%E5%B7%A5%E5%85%B7/</link>
        <pubDate>Mon, 18 Aug 2025 20:01:30 +0800</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/corecommon-open-research-emulator%E7%BD%91%E7%BB%9C%E4%BB%BF%E7%9C%9F%E5%B7%A5%E5%85%B7/</guid>
        <description>&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://coreemu.github.io/core/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;CORE (Common Open Research Emulator) æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ã€å¼€æºçš„ç½‘ç»œæ¨¡æ‹Ÿå’Œä»¿çœŸå·¥å…·ï¼Œå¹¿æ³›åº”ç”¨äºç½‘ç»œç ”ç©¶ã€æ•™å­¦ã€åè®®å¼€å‘å’Œç½‘ç»œåº”ç”¨æµ‹è¯•&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;ä¸»é¢˜&lt;/th&gt;
          &lt;th&gt;æè¿°&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://coreemu.github.io/core/architecture.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Architecture&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;ä½“ç³»ç»“æ„æ¦‚è¿°ï¼Œä»‹ç»å¦‚ä½•ä½¿ç”¨Pythonã€gRPCç›´æ¥æ§åˆ¶Core&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://coreemu.github.io/core/install.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Installation&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;COREçš„å®‰è£…æ–¹æ³•åŠè¦æ±‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://coreemu.github.io/core/gui.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;GUI&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;å¦‚ä½•ä½¿ç”¨GUI&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://coreemu.github.io/core/nodetypes.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Node Types&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;COREæ”¯æŒçš„èŠ‚ç‚¹ç±»å‹æ¦‚è¿°&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://coreemu.github.io/core/pygui.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;(BETA) Python GUI&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;å¦‚ä½•ä½¿ç”¨åŸºäºPythonçš„BETA GUI&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://coreemu.github.io/core/python.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Python API&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;ä»‹ç»å¦‚ä½•ä½¿ç”¨Pythonç›´æ¥æ§åˆ¶Core (è‡ªå·±å®ç°core-daemon)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://coreemu.github.io/core/grpc.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gRPC API&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;ä»‹ç»å¦‚ä½•ä½¿ç”¨gRPCæ§åˆ¶Core (è¿æ¥core-daemon è°ƒç”¨å…¶api)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://coreemu.github.io/core/distributed.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Distributed&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šè¿è¡ŒCOREçš„åˆ†å¸ƒå¼ç»†èŠ‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://coreemu.github.io/core/ctrlnet.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;CTRLNET&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;å¦‚ä½•æ§åˆ¶ç½‘ç»œä»ä¸»æœºä¸èŠ‚ç‚¹é€šä¿¡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://coreemu.github.io/core/services.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Services&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;æ¦‚è¿°æ‰€æä¾›çš„æœåŠ¡å¹¶åˆ›å»ºè‡ªå®šä¹‰æœåŠ¡&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://coreemu.github.io/core/performance.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Performance&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;ä½¿ç”¨COREæ—¶çš„æ€§èƒ½è¯´æ˜&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://coreemu.github.io/core/devguide.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Developers Guide&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;æ¦‚è¿°å¦‚ä½•å¯¹COREå¼€å‘&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://coreemu.github.io/core/emane.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Core Emane&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;COREä¸­è¿è¡Œå’Œä½¿ç”¨EMANEçš„é«˜çº§ä¸»é¢˜å’Œç¤ºä¾‹&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://adjacentlink.com/documentation/emane/v1.2.1/index.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Emaneå¼€å‘æ‰‹å†Œ&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;Emaneçš„æ¶æ„ä»‹ç» å¼€å‘ç›¸å…³&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        </item>
        <item>
        <title>IPv6 åœ°å€åˆ†é…è¯¦è§£</title>
        <link>https://charles-7777.github.io/hugo-stack/p/ipv6-%E5%9C%B0%E5%9D%80%E5%88%86%E9%85%8D%E8%AF%A6%E8%A7%A3/</link>
        <pubDate>Fri, 15 Aug 2025 19:58:16 +0800</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/ipv6-%E5%9C%B0%E5%9D%80%E5%88%86%E9%85%8D%E8%AF%A6%E8%A7%A3/</guid>
        <description>&lt;h2 id=&#34;ipv6-åœ°å€ç»“æ„&#34;&gt;IPv6 åœ°å€ç»“æ„
&lt;/h2&gt;&lt;p&gt;ä¸€ä¸ª IPv6 åœ°å€ç”± 128 ä¸ªæ¯”ç‰¹ï¼ˆbitsï¼‰ç»„æˆï¼Œé€šå¸¸åˆ†ä¸º 8 ä¸ª 16 æ¯”ç‰¹çš„å—ï¼Œæ¯ä¸ªå—ç”¨å†’å·ï¼ˆ&lt;code&gt;:&lt;/code&gt;ï¼‰åˆ†éš”ï¼Œå¹¶ä»¥åå…­è¿›åˆ¶è¡¨ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;code&gt;2001:0db8:85a3:0000:0000:8a2e:0370:7334&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;åœ°å€å‹ç¼©è§„åˆ™&#34;&gt;åœ°å€å‹ç¼©è§„åˆ™
&lt;/h3&gt;&lt;p&gt;ä¸ºäº†ç®€åŒ–ä¹¦å†™ï¼ŒIPv6 åœ°å€å¯ä»¥è¢«å‹ç¼©ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;dl&gt;
&lt;dt&gt;çœç•¥å‰å¯¼é›¶&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;æ¯ä¸ªå—ä¸­å¼€å¤´çš„&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¯ä»¥çœç•¥ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;0db8&lt;/code&gt; -&amp;gt; &lt;code&gt;db8&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;0000&lt;/code&gt; -&amp;gt; &lt;code&gt;0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;0370&lt;/code&gt; -&amp;gt; &lt;code&gt;370&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‹ç¼©è¿ç»­çš„é›¶&lt;/strong&gt;: å¯ä»¥ä½¿ç”¨åŒå†’å· &lt;code&gt;::&lt;/code&gt; æ¥æ›¿ä»£åœ°å€ä¸­ä»»æ„ä¸€æ®µè¿ç»­çš„ã€å…¨ä¸º &lt;code&gt;0&lt;/code&gt; çš„å—ã€‚&lt;strong&gt;æ³¨æ„ï¼šåœ¨ä¸€ä¸ªåœ°å€ä¸­ &lt;code&gt;::&lt;/code&gt; åªèƒ½ä½¿ç”¨ä¸€æ¬¡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åº”ç”¨ä¸Šè¿°è§„åˆ™åï¼Œä¸Šé¢çš„åœ°å€å¯ä»¥è¢«ç®€åŒ–ä¸ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;2001:db8:85a3::8a2e:370:7334
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;ipv6-åœ°å€ç±»å‹&#34;&gt;IPv6 åœ°å€ç±»å‹
&lt;/h2&gt;&lt;p&gt;IPv6 åœ°å€ä¸»è¦åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼šå•æ’­ï¼ˆUnicastï¼‰ã€å¤šæ’­ï¼ˆMulticastï¼‰å’Œä»»æ’­ï¼ˆAnycastï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å•æ’­åœ°å€-unicast&#34;&gt;å•æ’­åœ°å€ (Unicast)
&lt;/h3&gt;&lt;p&gt;å•æ’­åœ°å€æ ‡è¯†ä¸€ä¸ªå”¯ä¸€çš„ç½‘ç»œæ¥å£ï¼Œå‘å¾€å•æ’­åœ°å€çš„æ•°æ®åŒ…å°†è¢«é€åˆ°è¯¥åœ°å€æ‰€æ ‡è¯†çš„å”¯ä¸€æ¥å£ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å…¨çƒå•æ’­åœ°å€ (Global Unicast Address - GUA)&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;èŒƒå›´&lt;/strong&gt;: å…¨çƒå”¯ä¸€ï¼Œå¯åœ¨å…¬ç½‘è·¯ç”±ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‰ç¼€&lt;/strong&gt;: é€šå¸¸ä»¥ &lt;code&gt;2000::/3&lt;/code&gt; å¼€å¤´ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç»“æ„&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…¨å±€è·¯ç”±å‰ç¼€ (Global Routing Prefix)&lt;/strong&gt;: é€šå¸¸ä¸º 48 ä½ï¼Œç”± ISP åˆ†é…ç»™ç»„ç»‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­ç½‘ ID (Subnet ID)&lt;/strong&gt;: é€šå¸¸ä¸º 16 ä½ï¼Œç”±ç»„ç»‡å†…éƒ¨è§„åˆ’å­ç½‘ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¥å£ ID (Interface ID)&lt;/strong&gt;: 64 ä½ï¼Œç”¨äºæ ‡è¯†å­ç½‘ä¸­çš„å…·ä½“è®¾å¤‡æ¥å£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é“¾è·¯æœ¬åœ°åœ°å€ (Link-Local Address)&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;èŒƒå›´&lt;/strong&gt;: ä»…åœ¨åŒä¸€ç‰©ç†æˆ–é€»è¾‘é“¾è·¯ä¸Šæœ‰æ•ˆï¼Œä¸èƒ½è·¨è·¯ç”±å™¨è·¯ç”±ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‰ç¼€&lt;/strong&gt;: &lt;code&gt;fe80::/10&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”¨é€”&lt;/strong&gt;: ç”¨äºé‚»å±…å‘ç°ã€è‡ªåŠ¨åœ°å€é…ç½®ç­‰é“¾è·¯å†…éƒ¨é€šä¿¡ã€‚è®¾å¤‡å¯åŠ¨åä¼šè‡ªåŠ¨ç”Ÿæˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å”¯ä¸€æœ¬åœ°åœ°å€ (Unique Local Address - ULA)&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;èŒƒå›´&lt;/strong&gt;: ä»…åœ¨æœ‰é™èŒƒå›´å†…ï¼ˆå¦‚ä¸€ä¸ªç»„ç»‡æˆ–ç«™ç‚¹å†…éƒ¨ï¼‰ä½¿ç”¨ï¼ŒåŠŸèƒ½ç±»ä¼¼ IPv4 çš„ç§æœ‰åœ°å€ã€‚å®ƒä¸ä¼šåœ¨å…¬ç½‘è·¯ç”±ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‰ç¼€&lt;/strong&gt;: &lt;code&gt;fc00::/7&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹æ®Šåœ°å€&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¯å›åœ°å€&lt;/strong&gt;: &lt;code&gt;::1/128&lt;/code&gt;ï¼Œç›¸å½“äº IPv4 çš„ &lt;code&gt;127.0.0.1&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å¤šæ’­åœ°å€-multicast&#34;&gt;å¤šæ’­åœ°å€ (Multicast)
&lt;/h3&gt;&lt;p&gt;å¤šæ’­åœ°å€æ ‡è¯†ä¸€ç»„ç½‘ç»œæ¥å£ï¼Œå‘å¾€å¤šæ’­åœ°å€çš„æ•°æ®åŒ…å°†è¢«é€åˆ°è¯¥ç»„ä¸­çš„æ‰€æœ‰æ¥å£ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‰ç¼€&lt;/strong&gt;: &lt;code&gt;ff00::/8&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¸¸è§ç¤ºä¾‹&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ff02::1&lt;/code&gt;: é“¾è·¯æœ¬åœ°èŒƒå›´å†…çš„æ‰€æœ‰&lt;strong&gt;èŠ‚ç‚¹&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ff02::2&lt;/code&gt;: é“¾è·¯æœ¬åœ°èŒƒå›´å†…çš„æ‰€æœ‰&lt;strong&gt;è·¯ç”±å™¨&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä»»æ’­åœ°å€-anycast&#34;&gt;ä»»æ’­åœ°å€ (Anycast)
&lt;/h3&gt;&lt;p&gt;ä»»æ’­åœ°å€ä¹Ÿæ ‡è¯†ä¸€ç»„ç½‘ç»œæ¥å£ï¼Œä½†å‘å¾€ä»»æ’­åœ°å€çš„æ•°æ®åŒ…åªä¼šè¢«é€åˆ°è¿™ç»„æ¥å£ä¸­&lt;strong&gt;è·ç¦»æœ€è¿‘&lt;/strong&gt;ï¼ˆæ ¹æ®è·¯ç”±åè®®çš„åº¦é‡ï¼‰çš„ä¸€ä¸ªã€‚ä»»æ’­åœ°å€çš„æ ¼å¼ä¸å•æ’­åœ°å€ç›¸åŒï¼Œä½†é€šè¿‡è·¯ç”±é…ç½®å®ç°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ipv6-åœ°å€åˆ†é…æ–¹æ³•&#34;&gt;IPv6 åœ°å€åˆ†é…æ–¹æ³•
&lt;/h2&gt;&lt;p&gt;è®¾å¤‡è·å– IPv6 åœ°å€ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;h3 id=&#34;æ— çŠ¶æ€åœ°å€è‡ªåŠ¨é…ç½®-slaac&#34;&gt;æ— çŠ¶æ€åœ°å€è‡ªåŠ¨é…ç½® (SLAAC)
&lt;/h3&gt;&lt;p&gt;SLAAC æ˜¯ IPv6 çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œå…è®¸è®¾å¤‡åœ¨æ²¡æœ‰ DHCP æœåŠ¡å™¨çš„æƒ…å†µä¸‹è‡ªåŠ¨é…ç½®åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¿‡ç¨‹&lt;/strong&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è®¾å¤‡å¯åŠ¨åï¼Œé¦–å…ˆä¸ºè‡ªå·±ç”Ÿæˆä¸€ä¸ªé“¾è·¯æœ¬åœ°åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;è®¾å¤‡å‘æœ¬åœ°é“¾è·¯å‘é€ä¸€ä¸ª&lt;strong&gt;è·¯ç”±å™¨è¯·æ±‚ (Router Solicitation - RS)&lt;/strong&gt; å¤šæ’­æ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;li&gt;é“¾è·¯ä¸Šçš„è·¯ç”±å™¨æ”¶åˆ° RS åï¼Œä¼šå›å¤ä¸€ä¸ª&lt;strong&gt;è·¯ç”±å™¨é€šå‘Š (Router Advertisement - RA)&lt;/strong&gt; æ¶ˆæ¯ã€‚RA æ¶ˆæ¯ä¸­åŒ…å«äº†ç½‘ç»œå‰ç¼€ï¼ˆå¦‚ GUA å‰ç¼€ï¼‰å’Œå…¶ä»–ç½‘ç»œä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;è®¾å¤‡ä½¿ç”¨ RA ä¸­é€šå‘Šçš„å‰ç¼€ï¼Œå¹¶ç»“åˆè‡ªå·±çš„æ¥å£ IDï¼ˆé€šå¸¸é€šè¿‡ &lt;strong&gt;EUI-64&lt;/strong&gt; ç®—æ³•æˆ–éšæœºç”Ÿæˆï¼‰æ¥æ„æˆä¸€ä¸ªå®Œæ•´çš„å…¨çƒå•æ’­åœ°å€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;æœ‰çŠ¶æ€-dhcpv6-stateful&#34;&gt;æœ‰çŠ¶æ€ DHCPv6 (Stateful)
&lt;/h3&gt;&lt;p&gt;å·¥ä½œæ–¹å¼ç±»ä¼¼äº IPv4 çš„ DHCPï¼Œç”± DHCPv6 æœåŠ¡å™¨é›†ä¸­ç®¡ç†å’Œåˆ†é… IPv6 åœ°å€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜ç‚¹&lt;/strong&gt;: ä¾¿äºé›†ä¸­ç®¡ç†å’Œå®¡è®¡ï¼Œå¯ä»¥ç²¾ç¡®æ§åˆ¶åœ°å€åˆ†é…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€‚ç”¨åœºæ™¯&lt;/strong&gt;: éœ€è¦ä¸¥æ ¼ç®¡ç†åœ°å€åˆ†é…çš„ä¼ä¸šç½‘ç»œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ— çŠ¶æ€-dhcpv6-stateless&#34;&gt;æ— çŠ¶æ€ DHCPv6 (Stateless)
&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯ä¸€ç§æ··åˆæ¨¡å¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è®¾å¤‡é€šè¿‡ &lt;strong&gt;SLAAC&lt;/strong&gt; è·å– IPv6 åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;åŒæ—¶ï¼Œè®¾å¤‡é€šè¿‡ &lt;strong&gt;DHCPv6&lt;/strong&gt; è·å–å…¶ä»–ç½‘ç»œé…ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚ DNS æœåŠ¡å™¨åœ°å€ã€åŸŸåç­‰ã€‚&lt;/li&gt;
&lt;li&gt;è¿™ç§æ–¹å¼æ—¢åˆ©ç”¨äº† SLAAC çš„ä¾¿æ·æ€§ï¼Œåˆå¼¥è¡¥äº†å…¶æ— æ³•æä¾› DNS ç­‰é™„åŠ ä¿¡æ¯çš„ä¸è¶³ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é™æ€é…ç½®-manual&#34;&gt;é™æ€é…ç½® (Manual)
&lt;/h3&gt;&lt;p&gt;ç®¡ç†å‘˜æ‰‹åŠ¨ä¸ºè®¾å¤‡é…ç½®é™æ€çš„ IPv6 åœ°å€ã€ç½‘å…³å’Œ DNS ç­‰ä¿¡æ¯ã€‚é€‚ç”¨äºæœåŠ¡å™¨ã€è·¯ç”±å™¨ç­‰éœ€è¦å›ºå®šåœ°å€çš„è®¾å¤‡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;dhcpv6-äº¤äº’è¿‡ç¨‹&#34;&gt;DHCPv6 äº¤äº’è¿‡ç¨‹
&lt;/h3&gt;&lt;p&gt;DHCPv6 å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡è¿‡ç¨‹ï¼Œç”¨äºè·å– IPv6 åœ°å€å’Œ/æˆ–å…¶ä»–ç½‘ç»œé…ç½®å‚æ•°ã€‚æ ‡å‡†çš„äº¤äº’è¿‡ç¨‹æ¶‰åŠå››æ¬¡æ¶ˆæ¯äº¤æ¢ï¼Œè¿™ç¡®ä¿äº†å®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©æœ€åˆé€‚çš„æœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å››æ­¥äº¤æ¢ (Four-Way Exchange):&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Solicit (è¯·æ±‚)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯åœ¨æœ¬åœ°é“¾è·¯ä¸Šå‘é€ä¸€ä¸ª &lt;code&gt;Solicit&lt;/code&gt; å¤šæ’­æ¶ˆæ¯ï¼Œä»¥å‘ç°å¯ç”¨çš„ DHCPv6 æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;li&gt;æ¶ˆæ¯å‘é€åˆ°æ‰€æœ‰ DHCP ä¸­ç»§ä»£ç†å’ŒæœåŠ¡å™¨çš„å¤šæ’­åœ°å€ &lt;code&gt;ff02::1:2&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Advertise (é€šå‘Š)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;æ”¶åˆ° &lt;code&gt;Solicit&lt;/code&gt; æ¶ˆæ¯çš„ DHCPv6 æœåŠ¡å™¨ä¼šå›å¤ä¸€ä¸ª &lt;code&gt;Advertise&lt;/code&gt; å•æ’­æ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;li&gt;æ­¤æ¶ˆæ¯ä¸­åŒ…å«äº†æœåŠ¡å™¨å¯ä»¥ä¸ºå®¢æˆ·ç«¯æä¾›çš„åœ°å€å’Œ/æˆ–é…ç½®ä¿¡æ¯ã€‚ä¸€ä¸ªå®¢æˆ·ç«¯å¯èƒ½ä¼šæ”¶åˆ°å¤šä¸ª &lt;code&gt;Advertise&lt;/code&gt; æ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Request (è¯·æ±‚)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯ä»æ”¶åˆ°çš„ä¸€ä¸ªæˆ–å¤šä¸ª &lt;code&gt;Advertise&lt;/code&gt; æ¶ˆæ¯ä¸­é€‰æ‹©ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¹¶å‘å…¶å‘é€ä¸€ä¸ª &lt;code&gt;Request&lt;/code&gt; å•æ’­æ¶ˆæ¯ï¼Œæ­£å¼è¯·æ±‚åˆ†é…åœ°å€å’Œ/æˆ–é…ç½®å‚æ•°ã€‚&lt;/li&gt;
&lt;li&gt;æ¶ˆæ¯ä¸­ä¼šåŒ…å«å®ƒæ‰€é€‰æ‹©çš„æœåŠ¡å™¨çš„æ ‡è¯†ç¬¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Reply (å›å¤)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;è¢«é€‰ä¸­çš„æœåŠ¡å™¨æ”¶åˆ° &lt;code&gt;Request&lt;/code&gt; æ¶ˆæ¯åï¼Œä¼šå‘é€ä¸€ä¸ª &lt;code&gt;Reply&lt;/code&gt; å•æ’­æ¶ˆæ¯ï¼Œç¡®è®¤åœ°å€åˆ†é…å’Œé…ç½®ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯å®Œæˆé…ç½®ï¼Œå¯ä»¥å¼€å§‹ä½¿ç”¨è·å–åˆ°çš„åœ°å€ã€‚
&lt;strong&gt;ä¸¤æ­¥äº¤æ¢ (Two-Way Exchange) - å¿«é€Ÿæäº¤ (Rapid Commit):&lt;/strong&gt;
ä¸ºäº†åŠ é€Ÿåœ°å€åˆ†é…è¿‡ç¨‹ï¼ŒDHCPv6 å¼•å…¥äº†å¿«é€Ÿæäº¤é€‰é¡¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Solicit (è¯·æ±‚)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯åœ¨ &lt;code&gt;Solicit&lt;/code&gt; æ¶ˆæ¯ä¸­åŠ å…¥ &amp;ldquo;Rapid Commit&amp;rdquo; é€‰é¡¹ï¼Œè¡¨ç¤ºå¸Œæœ›ç«‹å³å®Œæˆåœ°å€åˆ†é…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Reply (å›å¤)&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;æ”¯æŒå¿«é€Ÿæäº¤çš„æœåŠ¡å™¨å¦‚æœæ„¿æ„ç«‹å³åˆ†é…åœ°å€ï¼Œä¼šç›´æ¥å›å¤ä¸€ä¸ª &lt;code&gt;Reply&lt;/code&gt; æ¶ˆæ¯ï¼Œè·³è¿‡ &lt;code&gt;Advertise&lt;/code&gt; å’Œ &lt;code&gt;Request&lt;/code&gt; æ­¥éª¤ã€‚
è¿™ç§ä¸¤æ­¥äº¤æ¢å‡å°‘äº†å»¶è¿Ÿï¼Œåœ¨è®¸å¤šåœºæ™¯ä¸‹ï¼ˆå¦‚ç½‘ç»œä¸­åªæœ‰ä¸€ä¸ª DHCPv6 æœåŠ¡å™¨ï¼‰éå¸¸é«˜æ•ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å…³é”®åè®®ä¸æŠ€æœ¯&#34;&gt;å…³é”®åè®®ä¸æŠ€æœ¯
&lt;/h2&gt;&lt;p&gt;åœ¨ä¸€ä¸ªéƒ¨ç½² IPv6 çš„å¹¿æ’­åŸŸä¸­ï¼Œç›¸æ¯” IPv4 ä¸€ä¸ªæœ€æ˜æ˜¾çš„åŒºåˆ«å°±æ˜¯ IPv6 è·¯ç”±é€šå‘Šï¼›åœ¨ IPv4 æ—¶ä»£ï¼Œä¸€ä¸ªå¹¿æ’­åŸŸä¸­çš„ ipv4 ç½‘æ®µå¹¶æ²¡æœ‰æ˜¾å¼è¯´æ˜ï¼Œæˆ–è€…è¯´å¹¶æ²¡æœ‰ä¸€ä¸ª ipv4 ç½‘æ®µå®£ç§°å æ®äº†è¿™ä¸ªå¹¿æ’­åŸŸï¼Œä»…ä½¿ç”¨è¿™ä¸ªå¹¿æ’­åŸŸçš„å¹¿æ’­/ç»„æ’­èƒ½åŠ›ï¼Œå¤šä¸ªipv4ç½‘æ®µå…±ç”¨ä¸€ä¸ªå¹¿æ’­åŸŸçš„æƒ…å†µä¹Ÿä¸é²œè§ï¼›è€Œåœ¨ipv6ä¸­ï¼Œè¿è¡Œipv6åè®®çš„è·¯ç”±å™¨ä¼šä¸»åŠ¨å‘é€åä¸º&lt;strong&gt;è·¯ç”±é€šå‘Š Router Advertisement&lt;/strong&gt;çš„ ICMPv6 æŠ¥æ–‡ï¼Œåœ¨å¹¿æ’­åŸŸä¸­å®£å‘Š/å¹¿æ’­*æ­¤ ipv6 ç½‘æ®µå æ®äº†è¯¥å¹¿æ’­åŸŸï¼›&lt;/p&gt;
&lt;p&gt;*ï¼ˆå‡†ç¡®çš„è®²åº”è¯¥æ˜¯ç»„æ’­ï¼ŒIPv6 å·²ç»æ²¡æœ‰å¹¿æ’­æ¦‚å¿µäº†ï¼Œè¿™é‡Œä½¿ç”¨å¹¿æ’­è¿™ä¸ªè¯´æ³•ä¸ºäº†è¯´æ˜æ˜¯å…¬å¼€å‘é€çš„ï¼Œåœ¨ä¸€ä¸ªå¹¿æ’­åŸŸä¸­ï¼Œå¹¿æ’­å’Œç»„æ’­è¾¾æˆçš„åŠŸèƒ½ç±»ä¼¼ï¼Œä¸”åœ¨ä½ç«¯äº¤æ¢æœºä¸­ï¼Œå¹¿æ’­å’Œç»„æ’­çš„è½¬å‘æ–¹å¼æ˜¯ä¸€è‡´çš„ï¼‰&lt;/p&gt;
&lt;p&gt;RAï¼ˆè·¯ç”±é€šå‘Š Router Advertisementï¼‰ä½¿ç”¨ ICMPv6 æŠ¥æ–‡ï¼ˆtype 134ï¼‰ï¼Œå±äº NDP åè®®çš„ä¸€éƒ¨åˆ†&lt;/p&gt;
&lt;p&gt;IPv6 çš„åŠŸèƒ½å®ç°ä¸¥é‡ä¾èµ–äºä¸€äº›å…³é”®çš„åº•å±‚åè®®ï¼Œç‰¹åˆ«æ˜¯ ICMPv6 å’Œåœ¨å…¶åŸºç¡€ä¸Šæ„å»ºçš„é‚»å±…å‘ç°åè®® (NDP)ï¼Œä»¥åŠç”¨äºåŠ¨æ€åˆ†é…ç½‘ç»œå‰ç¼€çš„ DHCPv6-PDã€‚&lt;/p&gt;
&lt;h2 id=&#34;icmpv6&#34;&gt;ICMPv6
&lt;/h2&gt;&lt;p&gt;IPv6 æ—¶ä»£çš„ipå±‚æ§åˆ¶åè®®ï¼ˆç±»æ¯”ipv4ä¸­çš„arpã€icmpç­‰ï¼‰å‡ä½¿ç”¨icmpv6æŠ¥æ–‡ï¼Œ&lt;strong&gt;å–æ¶ˆäº†IPå±‚çš„å¹¿æ’­&lt;/strong&gt;ï¼Œè½¬è€Œå¹¿æ³›ä½¿ç”¨&lt;strong&gt;ç»„æ’­&lt;/strong&gt;ã€‚ICMPv6 ä¸­çš„ type 133 ~ 137 æŠ¥æ–‡ç”±&lt;strong&gt;NDP&lt;/strong&gt;åè®®ä½¿ç”¨ï¼Œç”¨äºå‘ç°ç½‘å…³ã€é‚»å±…ã€åœ°å€é…ç½®ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;icmpv6-1&#34;&gt;ICMPv6
&lt;/h3&gt;&lt;p&gt;ICMPv6 æ˜¯ IPv6 çš„ä¸€ä¸ªæ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œå…¶åŠŸèƒ½è¿œè¶… IPv4 ä¸­çš„ ICMPã€‚å®ƒä¸ä»…ç”¨äºä¼ è¾“ç½‘ç»œé”™è¯¯å’Œè¯Šæ–­ä¿¡æ¯ï¼Œè¿˜æ‰¿è½½äº†è®¸å¤šå…³é”®çš„ç½‘ç»œæ§åˆ¶åŠŸèƒ½ã€‚å¦‚æœé˜²ç«å¢™é”™è¯¯åœ°å®Œå…¨é˜»æ­¢ ICMPv6ï¼Œå°†å¯¼è‡´ IPv6 ç½‘ç»œä¸­æ–­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸»è¦åŠŸèƒ½&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é”™è¯¯æŠ¥å‘Š&lt;/strong&gt;: å¦‚ &amp;ldquo;ç›®æ ‡ä¸å¯è¾¾&amp;rdquo;ã€&amp;ldquo;æ•°æ®åŒ…è¿‡å¤§&amp;rdquo;ã€&amp;ldquo;è¶…æ—¶&amp;rdquo; ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯Šæ–­æŸ¥è¯¢&lt;/strong&gt;: å¦‚ &lt;code&gt;ping&lt;/code&gt; å‘½ä»¤æ‰€ä½¿ç”¨çš„ &amp;ldquo;Echo Request&amp;rdquo; å’Œ &amp;ldquo;Echo Reply&amp;rdquo;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œæ§åˆ¶&lt;/strong&gt;: ä¸º NDPã€MLD (å¤šæ’­ä¾¦å¬å‘ç°) ç­‰åè®®æä¾›æ¶ˆæ¯æ”¯æŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ndp-é‚»å±…å‘ç°åè®®&#34;&gt;NDP (é‚»å±…å‘ç°åè®®)
&lt;/h3&gt;&lt;p&gt;NDP æ˜¯ IPv6 ä¸­ä¸€ä¸ªè‡³å…³é‡è¦çš„åè®®ï¼Œå®ƒå–ä»£äº† IPv4 ä¸­çš„ ARPã€ICMP è·¯ç”±å™¨å‘ç°å’Œ ICMP é‡å®šå‘ç­‰å¤šä¸ªåè®®çš„åŠŸèƒ½ã€‚NDP åŸºäº ICMPv6 å®ç°ï¼Œæ˜¯å®ç°å³æ’å³ç”¨å’Œ SLAAC çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NDP çš„æ ¸å¿ƒåŠŸèƒ½&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åœ°å€è§£æ&lt;/strong&gt;: å°† IPv6 åœ°å€è§£æä¸ºé“¾è·¯å±‚åœ°å€ï¼ˆå¦‚ MAC åœ°å€ï¼‰ï¼Œå–ä»£äº† ARPã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¯ç”±å™¨å‘ç°&lt;/strong&gt;: ä¸»æœºå¯ä»¥å‘ç°æœ¬åœ°é“¾è·¯ä¸Šçš„è·¯ç”±å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‰ç¼€å‘ç°&lt;/strong&gt;: ä¸»æœºå¯ä»¥å‘ç°ç”¨äºè‡ªåŠ¨é…ç½®çš„åœ°å€å‰ç¼€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡å¤åœ°å€æ£€æµ‹ (DAD)&lt;/strong&gt;: èŠ‚ç‚¹å¯ä»¥ç¡®è®¤å…¶æƒ³è¦ä½¿ç”¨çš„åœ°å€åœ¨é“¾è·¯ä¸Šæ˜¯å”¯ä¸€çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯è¾¾æ€§è·Ÿè¸ª&lt;/strong&gt;: åˆ¤æ–­é‚»å±…èŠ‚ç‚¹æ˜¯å¦ä»ç„¶å¯è¾¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;NDP ä½¿ç”¨çš„äº”ç§ ICMPv6 æ¶ˆæ¯ç±»å‹&lt;/strong&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è·¯ç”±å™¨è¯·æ±‚ (Router Solicitation - RS)&lt;/strong&gt;: é€šå¸¸ç”±ç»ˆç«¯ä¸»åŠ¨å‘é€ï¼Œç”¨äºåœ¨æœªæ”¶åˆ°å‘¨æœŸæ€§ RA çš„æƒ…å†µä¸‹ï¼Œè¯·æ±‚ RA&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¯ç”±å™¨é€šå‘Š (Router Advertisement - RA)&lt;/strong&gt;:ç”±è·¯ç”±å™¨å‘¨æœŸæ€§å‘é€ï¼Œä¹Ÿå¯ä»¥å“åº” RS å‘é€ï¼Œç”¨äºå®£å‘Šæœ¬å¹¿æ’­åŸŸä¸­ IPv6 ç›¸å…³ä¿¡æ¯ã€‚æ¯”å¦‚å‰ç¼€ã€ç½‘å…³ã€DNSç­‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‚»å±…è¯·æ±‚ (Neighbor Solicitation - NS)&lt;/strong&gt;: ç”¨äºè§£æé‚»å±…çš„é“¾è·¯å±‚åœ°å€æˆ–æ‰§è¡Œ DAD,å’Œ IPv4 çš„ ARP request åŠŸèƒ½ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‚»å±…é€šå‘Š (Neighbor Advertisement - NA)&lt;/strong&gt;: å¯¹ NS æ¶ˆæ¯çš„å“åº”ï¼Œæˆ–åœ¨é“¾è·¯å±‚åœ°å€å˜åŒ–æ—¶ä¸»åŠ¨å‘é€å’Œ ,IPv4 çš„ ARP replyåŠŸèƒ½ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡å®šå‘ (Redirect)&lt;/strong&gt;: è·¯ç”±å™¨å‘ŠçŸ¥ä¸»æœºæœ‰æ›´ä¼˜çš„ä¸‹ä¸€è·³è·¯å¾„,ç±»ä¼¼äº IPv4 çš„icmp redirectåŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;rsra&#34;&gt;RS/RA
&lt;/h3&gt;&lt;p&gt;RS/RA æ˜¯IPv6 ç¯å¢ƒä¸‹ç‹¬æœ‰çš„æ§åˆ¶ä¿¡ä»¤ï¼Œæ­¤ä¿¡ä»¤æ˜ç¡®äº†ä¸€ä¸ªå¹¿æ’­åŸŸä¸­å„èŠ‚ç‚¹æ‰€ä»£è¡¨çš„è§’è‰²ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¹¿æ’­åŸŸä¸­å‘é€RAçš„ä¸ºè·¯ç”±å™¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¹¿æ’­åŸŸä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªè·¯ç”±å™¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RA ç»„æ’­å‘¨æœŸæ€§å‘é€&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RS ç”¨äºåœ¨æœªæ”¶åˆ° RA æƒ…å†µä¸‹è¯·æ±‚ RA&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RA ä¸­çš„&lt;code&gt;Flags&lt;/code&gt;è¡¨æ˜å½“å‰å¹¿æ’­åŸŸä¸­ IPv6 åœ°å€çš„é…ç½®æ–¹å¼&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿™äº› Flags åˆ†å¸ƒåœ¨ä¸¤ä¸ªä½ç½®&amp;mdash;-ICMPv6 æŠ¥å¤´å’Œ prefix optionï¼Œåè€…ç§°ä¸º PIO(Prefix Information Option) flagã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;M&lt;/strong&gt;(Managed address configuration):ä½äºæŠ¥å¤´ï¼ŒM=1 è¡¨æ˜ç»ˆç«¯åº”è¯¥ä½¿ç”¨ DHCPv6 åè®®é…ç½®åœ°å€å’Œå…¶ä»–ç½‘ç»œå‚æ•°ï¼›å¦‚æœM=1ï¼Œåˆ™å¿½ç•¥ O Flagï¼›æ­¤flagç”¨äº&lt;strong&gt;DHCPv6 æœ‰çŠ¶æ€æ¨¡å¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;O&lt;/strong&gt;(Other configuration):ä½äºæŠ¥å¤´ï¼ŒO=1ä¸”M=0 è¡¨æ˜ç»ˆç«¯åº”è¯¥ä½¿ç”¨ DHCPv6 è®¾ç½®é™¤äº† IPv6 åœ°å€ä¹‹å¤–çš„å…¶ä»–ï¼ˆdns/ntpç­‰ï¼‰ï¼Œæ­¤ flag ç”¨äº &lt;strong&gt;DHCPv6 æ— çŠ¶æ€æ¨¡å¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;A&lt;/strong&gt;(Autononous address-configuration flag):ä½äº&lt;strong&gt;PIO&lt;/strong&gt;ä¸­ï¼ŒA=1 è¡¨æ˜ç»ˆç«¯åº”è¯¥&lt;strong&gt;ä½¿ç”¨ SLAAC&lt;/strong&gt; é…ç½® IPv6 åœ°å€ï¼›PIOå¯ä»¥åŒ…å«å¤šä¸ª Prefixï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ä¸€ä¸ªå¹¿æ’­åŸŸä¸­å¯ä»¥å­˜åœ¨å¤šä¸ª IPv6 ç½‘æ®µã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™å‡ ç§flagæ˜¯å¯ä»¥å¤åˆä½¿ç”¨çš„ï¼Œä»¥æ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚,é™¤äº†æ‰‹åŠ¨é™æ€é…ç½®ipv6åœ°å€ï¼ŒåŠ¨æ€/è‡ªåŠ¨é…ç½®æˆ–è€…åŠè‡ªåŠ¨é…ç½®ipv6åœ°å€çš„æ–¹å¼éƒ½éœ€è¦ä»ndpåè®®çš„ RA å¼€å§‹ï¼Œå°±å¥½åƒ RA å¼•å¯¼äº†IPv6è‡ªåŠ¨é…ç½®çš„å¼€å§‹ï¼›RAä¸­çš„ä¸åŒflagå åŠ å½±å“åœ°å€è‡ªåŠ¨é…ç½®ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;dhcpv6-pd&#34;&gt;DHCPv6-PD
&lt;/h3&gt;&lt;p&gt;DHCPv6å‰ç¼€ä»£ç†DHCPv6-PD(PrefixDelegation)æ˜¯ä¸€ç§å‰ç¼€åˆ†é…æœºåˆ¶ï¼Œé€šè¿‡DHCPv6å‰ç¼€ä»£ç†æœºåˆ¶ï¼Œä¸‹æ¸¸
ç½‘ç»œè®¾å¤‡ä¸éœ€è¦å†æ‰‹å·¥æŒ‡å®šç”¨æˆ·ä¾§é“¾è·¯çš„IPv6åœ°å€å‰ç¼€ï¼Œå®ƒåªéœ€è¦å‘ä¸Šæ¸¸ç½‘ç»œè®¾å¤‡æå‡ºå‰ç¼€åˆ†é…ç”³è¯·ï¼Œä¸Šæ¸¸ç½‘
ç»œè®¾å¤‡ä¾¿å¯ä»¥åˆ†é…åˆé€‚çš„åœ°å€å‰ç¼€ç»™ä¸‹æ¸¸è®¾å¤‡ï¼Œä¸‹æ¸¸è®¾å¤‡æŠŠè·å¾—çš„å‰ç¼€å†é€šè¿‡è·¯ç”±é€šå‘Š(&lt;strong&gt;RA&lt;/strong&gt;)è‡³ä¸IPv6ä¸»æœºç›´è¿
çš„ç”¨æˆ·é“¾è·¯ä¸Šï¼Œå®ç°IPv6ä¸»æœºçš„åœ°å€è‡ªåŠ¨é…ç½®ï¼Œå®Œæˆæ•´ä¸ªç³»ç»Ÿå±‚æ¬¡çš„åœ°å€å¸ƒå±€ã€‚&lt;/p&gt;
&lt;p&gt;DHCP-PD æŠ€æœ¯æœ€æ—©åœ¨RFC3633ä¸­æå‡ºï¼Œç»è¿‡å‡ æ¬¡æ›´æ–°ç›®å‰æœ€æ–°çš„æ˜¯&lt;strong&gt;RFC8415&lt;/strong&gt;ï¼Œå…¶ä¸»è¦æ€æƒ³æ˜¯æŠŠDHCPv6çš„åœ°å€åˆ†é…æ–¹å¼åˆ’åˆ†ä¸ºå¤šå±‚ï¼Œdhcp clientä¸å†æ˜¯ä»…ä»…è·å–åœ°å€ç”¨äºç»ˆç«¯é€šä¿¡ï¼Œè€Œæ˜¯å¯ä»¥ä½œä¸ºæ¬¡çº§è·¯ç”±å™¨èº«ä»½æŠŠåœ°å€&lt;strong&gt;å±‚å±‚åˆ†é…&lt;/strong&gt;ä¸‹å»ï¼›è¿™æ ·çš„å¥½å¤„æ˜¯ä¾¿äºå¿«é€Ÿå’Œç»Ÿä¸€éƒ¨ç½²å¤§é‡åœ°å€ï¼Œå°¤å…¶æ˜¯åœ¨å¤§è§„æ¨¡åŠ¨æ€åœ°å€çš„æƒ…å†µä¸‹ï¼Œæ­¤ç§åœ°å€åˆ†é…æ–¹å¼åœ¨å®¶åº­å®½å¸¦ä¸­å·²ç»å¤§é‡éƒ¨ç½²ï¼›å…‰çŒ«ä»å…¶ä¸Šçº§è·å–ä¸€æ®µåœ°å€ç”¨äºæœ¬åœ°ç½‘ç»œç»ˆç«¯çš„åœ°å€åˆ†é…ï¼Œç”šè‡³ä»å…‰çŒ«æ‹¿åˆ°çš„åœ°å€è¿˜èƒ½å†å¾€ä¸‹ä¸€å±‚åˆ†é….&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å·¥ä½œåŸç†&lt;/strong&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;è¯·æ±‚&lt;/strong&gt;: å®¶åº­è·¯ç”±å™¨ï¼ˆå®¢æˆ·ç«¯ï¼‰å‘å…¶ä¸Šæ¸¸ ISP çš„è·¯ç”±å™¨ï¼ˆæœåŠ¡å™¨ï¼‰å‘é€ DHCPv6 è¯·æ±‚ï¼Œå¸Œæœ›è·å¾—ä¸€ä¸ª IPv6 åœ°å€&lt;strong&gt;å‰ç¼€&lt;/strong&gt;ï¼ˆä¾‹å¦‚ä¸€ä¸ª &lt;code&gt;/56&lt;/code&gt; æˆ– &lt;code&gt;/48&lt;/code&gt; çš„åœ°å€å—ï¼‰ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªåœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»£ç†&lt;/strong&gt;: ISP è·¯ç”±å™¨ä»å…¶åœ°å€æ± ä¸­åˆ†é…ä¸€ä¸ªå‰ç¼€å—ï¼Œå¹¶é€šè¿‡ DHCPv6 å›å¤å°†å…¶â€œä»£ç†â€æˆ–â€œæˆæƒâ€ç»™å®¶åº­è·¯ç”±å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†é…&lt;/strong&gt;: å®¶åº­è·¯ç”±å™¨è·å¾—è¯¥å‰ç¼€åï¼Œå°±æ‹¥æœ‰äº†ç®¡ç†è¿™ä¸ªåœ°å€å—çš„æƒé™ã€‚å®ƒå¯ä»¥å°†è¿™ä¸ªå‰ç¼€è¿›ä¸€æ­¥åˆ’åˆ†ä¸ºæ›´å°çš„å­ç½‘ï¼ˆä¾‹å¦‚å¤šä¸ª &lt;code&gt;/64&lt;/code&gt; å­ç½‘ï¼‰ï¼Œå¹¶ä¸ºè¿æ¥åˆ°å…¶ LAN å£çš„å„ä¸ªå†…éƒ¨ç½‘ç»œï¼ˆå¦‚å®¶åº­ç½‘ç»œã€è®¿å®¢ç½‘ç»œï¼‰åˆ†é…è¿™äº›å­ç½‘å‰ç¼€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€šå‘Š&lt;/strong&gt;: å®¶åº­è·¯ç”±å™¨åœ¨å…¶å†…éƒ¨ç½‘ç»œä¸Šå‘é€ &lt;strong&gt;RA&lt;/strong&gt; æ¶ˆæ¯ï¼Œé€šå‘Šè¿™äº› &lt;code&gt;/64&lt;/code&gt; çš„å­ç½‘å‰ç¼€ï¼Œä½¿å¾—å†…éƒ¨ç½‘ç»œä¸­çš„è®¾å¤‡å¯ä»¥é€šè¿‡ &lt;strong&gt;SLAAC&lt;/strong&gt; è‡ªåŠ¨é…ç½® IPv6 åœ°å€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è‡ªåŠ¨åŒ–&lt;/strong&gt;: æ— éœ€æ‰‹åŠ¨é…ç½®ä¸‹æ¸¸è·¯ç”±å™¨çš„å­ç½‘ï¼Œå®ç°äº†ç½‘ç»œéƒ¨ç½²çš„è‡ªåŠ¨åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»“æ„åŒ–&lt;/strong&gt;: ä½¿å¾—å®¶åº­æˆ–å°å‹åŠå…¬å®¤å¯ä»¥è½»æ¾åœ°æ‹¥æœ‰å¤šä¸ªç‹¬ç«‹çš„ IPv6 å­ç½‘ï¼Œä¾¿äºç½‘ç»œéš”ç¦»å’Œç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ•ˆæ€§&lt;/strong&gt;: ç›¸æ¯”äº NATï¼Œæ¯ä¸ªè®¾å¤‡éƒ½èƒ½è·å¾—å…¨çƒå”¯ä¸€çš„å…¬ç½‘åœ°å€ï¼Œå®ç°äº†çœŸæ­£çš„ç«¯åˆ°ç«¯è¿æ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;link-local&#34;&gt;link-local
&lt;/h3&gt;&lt;p&gt;å¯¹æ¯”IPv4ç¯å¢ƒï¼ŒIPv6 åœ°å€æœ‰æ‰€è°“çš„ link-local åœ°å€è€Œä¸”å……å½“æ¯”è¾ƒé‡è¦ä½œç”¨ï¼›ç”±äºä¸€ä¸ªæ¥å£å¯ä»¥é…ç½®å¾ˆå¤šIPv6åœ°å€ï¼Œå½“è¿™äº›åœ°å€ä½œä¸ºä¸‹ä¸€è·³ä½¿ç”¨çš„æ—¶å€™ä¼šå‡ºç°æ··ä¹±ï¼Œè¿™æ ·ä¸åˆ©äºç®¡ç†ä¹Ÿä¸åˆ©äºè®¾å¤‡æ€§èƒ½å¼€é”€,ä½¿ç”¨Link Localåœ°å€å”¯ä¸€æ ‡è¯†é“¾è·¯ä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹å°±é¿å…äº†è¿™ä¸ªé—®é¢˜ã€‚è€Œä¸”åœ¨ç½‘ç»œé‡æ–°ç¼–å€è¿‡ç¨‹ä¸­ï¼ŒLink Localå¹¶ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ›´åˆ©äºå¿«é€Ÿæ›´æ”¹ç¼–å€&lt;/p&gt;
&lt;h3 id=&#34;dad&#34;&gt;DAD
&lt;/h3&gt;&lt;p&gt;DAD åŸºäº &lt;strong&gt;ICMPv6 Neighbor Solicitationï¼ˆNSï¼Œé‚»å±…è¯·æ±‚ï¼‰&lt;/strong&gt; å’Œ &lt;strong&gt;Neighbor Advertisementï¼ˆNAï¼Œé‚»å±…é€šå‘Šï¼‰&lt;/strong&gt; æ¶ˆæ¯å®ç°ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;èŠ‚ç‚¹åˆ†é…ä¸€ä¸ª IPv6 åœ°å€&lt;/strong&gt;ï¼ˆå¦‚é€šè¿‡ SLAAC æˆ–æ‰‹åŠ¨é…ç½®ï¼‰ï¼Œä½†è¯¥åœ°å€å°šæœªæ­£å¼å¯ç”¨ï¼ˆå¤„äº &amp;ldquo;tentative&amp;rdquo; çŠ¶æ€ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‘é€ Neighbor Solicitationï¼ˆNSï¼‰&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;ç›®æ ‡åœ°å€ï¼ˆTarget Addressï¼‰è®¾ä¸ºå¾…æ£€æµ‹çš„ IPv6 åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;æºåœ°å€è®¾ä¸º &lt;strong&gt;æœªæŒ‡å®šåœ°å€ï¼ˆ::ï¼‰&lt;/strong&gt;ï¼ˆå› ä¸ºè¯¥åœ°å€å°šæœªæ­£å¼ä½¿ç”¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å‘é€åˆ° &lt;strong&gt;&amp;ldquo;è¯·æ±‚èŠ‚ç‚¹ç»„æ’­åœ°å€&amp;rdquo;ï¼ˆSolicited-Node Multicast Addressï¼ŒFF02::1:FFXX:XXXXï¼‰&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç­‰å¾…å“åº”&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;å¦‚æœ&lt;strong&gt;æ²¡æœ‰æ”¶åˆ° Neighbor Advertisementï¼ˆNAï¼‰&lt;/strong&gt;ï¼Œè¯´æ˜åœ°å€æœªè¢«å ç”¨ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ&lt;strong&gt;æ”¶åˆ° NA&lt;/strong&gt;ï¼Œè¯´æ˜åœ°å€å·²è¢«å ç”¨ï¼ŒèŠ‚ç‚¹å¿…é¡»æ”¾å¼ƒè¯¥åœ°å€å¹¶é‡æ–°é…ç½®ï¼ˆå¦‚ SLAAC ä¼šç”Ÿæˆæ–°åœ°å€ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DAD å®Œæˆ&lt;/strong&gt;ï¼š
&lt;ul&gt;
&lt;li&gt;æˆåŠŸé€šè¿‡æ£€æµ‹åï¼Œåœ°å€å˜ä¸º &amp;ldquo;Preferred&amp;rdquo; æˆ– &amp;ldquo;Valid&amp;rdquo; çŠ¶æ€ï¼Œå¯ä»¥æ­£å¸¸é€šä¿¡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;é‚»å±…è¡¨&#34;&gt;é‚»å±…è¡¨
&lt;/h3&gt;&lt;p&gt;é‚»å±…è¡¨ï¼Œåœ¨IPv4ç¯å¢ƒä¸‹å°±æ˜¯ARPè¡¨ï¼Œç³»ç»Ÿç»´æŠ¤Arpè¡¨å†…å®¹ç”±ç³»ç»Ÿè‡ªå·±å†³å®šï¼Œæ¯”å¦‚ç«¯å£ã€æ›´æ–°æ—¶é—´ç­‰ï¼›&lt;/p&gt;
&lt;p&gt;åˆ°äº†IPv6ç¯å¢ƒï¼ŒNDè¡¨ä»£æ›¿äº†arpè¡¨ï¼Œè€Œä¸”åè®®è§„å®šäº†5ç§é‚»å±…çŠ¶æ€ï¼ŒIPv6 é‚»å±…çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯ï¼š
Incompleteã€Reachableã€Staleã€Delayã€Probeï¼Œå…¶ä¸­åªæœ‰ Stale çŠ¶æ€æ˜¯ç¨³å®šçŠ¶æ€ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Incomplete ï¼ˆæœªå®ŒæˆçŠ¶æ€ï¼‰ï¼šè¡¨â½°æ­£åœ¨è§£ æåœ°å€ï¼Œä½†é‚»å±…é“¾è·¯å±‚åœ°å€å°šæœªç¡®å®šã€‚&lt;/li&gt;
&lt;li&gt;Reachable ï¼ˆå¯è¾¾çŠ¶æ€ï¼‰ï¼šè¡¨â½°åœ°å€è§£æ æˆåŠŸï¼Œè¯¥é‚»å±…å¯è¾¾ã€‚&lt;/li&gt;
&lt;li&gt;Staleï¼ˆå¤±æ•ˆçŠ¶æ€ï¼‰ï¼šè¡¨â½°å¯è¾¾æ—¶é—´è€—å°½ï¼Œæœªç¡®å®šé‚»å±…æ˜¯å¦å¯è¾¾ã€‚&lt;/li&gt;
&lt;li&gt;Delayï¼ˆå»¶è¿ŸçŠ¶æ€ï¼‰ï¼šè¡¨â½°æœªç¡®å®šé‚»å±…æ˜¯å¦å¯è¾¾ã€‚Delay çŠ¶æ€ä¸æ˜¯â¼€ä¸ªç¨³å®šçš„çŠ¶æ€ï¼Œâ½½æ˜¯â¼€ä¸ªå»¶æ—¶ç­‰å¾…çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;Probe ï¼ˆæ¢æµ‹çŠ¶æ€ï¼‰ï¼šèŠ‚ç‚¹ä¼šå‘å¤„äº Probe çŠ¶æ€çš„é‚»å±…æŒç»­å‘é€ NS æŠ¥â½‚ã€‚
ä¸åŒçŠ¶æ€ä¹‹é—´è¿ç§»å¦‚ä¸‹å›¾&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ip neigh
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ip -6 neigh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>implicit-function-declaration</title>
        <link>https://charles-7777.github.io/hugo-stack/p/implicit-function-declaration/</link>
        <pubDate>Fri, 15 Aug 2025 16:22:16 +0800</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/implicit-function-declaration/</guid>
        <description>&lt;p&gt;ä¸€èˆ¬æƒ…å†µä¸‹å¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨å…¶ä»–æ–‡ä»¶çš„å‡½æ•°æ—¶ï¼Œå¸¸è§„æ“ä½œæ˜¯å°†è¯¥å‡½æ•°åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜ï¼Œç„¶ååœ¨éœ€è¦ä½¿ç”¨çš„æ–‡ä»¶é‡Œå¼•ç”¨è¿™ä¸ªå¤´æ–‡ä»¶
ä½†è‹¥æ˜¯æ²¡å£°æ˜å‘¢ï¼Ÿ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mf&#34;&gt;11.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;extern&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;aaa--d:%x----%s--p&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;aaa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;aaa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;p = %p&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;---&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;value = %s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;ï¼Œ&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// å´©æºƒ!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mf&#34;&gt;2.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;aaa&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;aaa&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;gcc 11.c 2.c -o &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;11.c: In &lt;span class=&#34;k&#34;&gt;function&lt;/span&gt; â€˜main&lt;span class=&#34;s1&#34;&gt;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;11.c:4:37: warning:: implicit declaration of function â€˜aaa&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;-Wimplicit-function-declaration&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 4&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; printf&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;aaa--d:%x----%s--%p\n&amp;#34;&lt;/span&gt;,aaa&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;,b,b&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; ^~~
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;11.c:5:15: warning:ï¼š initialization of â€˜char *â€™ fromnâ€˜int&lt;span class=&#34;err&#34;&gt;&amp;#39;&lt;/span&gt; makes pointer from integer without a cast &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;-Wint-conversion&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 5&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; char *p &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; aaa&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; ^~~
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./test
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;aaa--d:4b1c032----aaaa--0x560604b1c032
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;0x4b1c032
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Segmentation fault &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;core dumped&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™é‡Œå¹¶æ²¡æœ‰å¼•ç”¨è¿™ä¸ªå¤´æ–‡ä»¶ï¼Œä¸ºä»€ä¹ˆä¾ç„¶å¯ä»¥ä½¿ç”¨å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è¿™å°±å¼•å‡ºäº†ä¸€ä¸ªæ¦‚å¿µï¼š&lt;strong&gt;éšå¼å£°æ˜&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è®²å°±æ˜¯å½“å‰æ–‡ä»¶ä½¿ç”¨æ²¡æœ‰å£°æ˜çš„å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å£°æ˜ä¸€ä¸ªï¼Œä½†&lt;strong&gt;è¿”å›å€¼æ˜¯intç±»å‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é‚£ä¸ºä»€ä¹ˆä¼šå‡ºç°æ®µé”™è¯¯å‘¢?
ä¸Šé¢ç¼–è¯‘è¿è¡Œçš„ç¯å¢ƒæ˜¯64bitçš„:&lt;/p&gt;
&lt;p&gt;char* aaa() è¿”å›çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆ8B(64bit) ä½†æ˜¯åœ¨ç¼–è¯‘æ—¶ å·²ç»ç¡®å®šäº†æ˜¯è¿”å›å€¼ç±»å‹(ç”±äºæ˜¯éšå¼å£°å,ç¼–è¯‘å™¨é»˜è®¤æ˜¯int)  æ˜¯int 4B(32bit) ,æ‰€ä»¥å°±ä¼šæŠŠæŒ‡é’ˆçš„ä½32bit å–å‡ºæ¥  èµ‹ç»™char* *p æŒ‡é’ˆp çš„å€¼å°±æ˜¯ä¸€ä¸ªæˆªæ–­çš„å€¼, è¿™ä¸ªæŒ‡é’ˆå°±å˜æˆäº†ä¸€ä¸ªéæ³•çš„äº†,å¦‚æœå–è®¿é—®å…¶æŒ‡å‘çš„å†…å­˜,å°±ä¼šå‡ºç° æ®µé”™è¯¯.&lt;/p&gt;
&lt;p&gt;å¦‚æœæ˜¯32bit ç¯å¢ƒå‘¢&lt;/p&gt;
&lt;p&gt;int æ˜¯4B æŒ‡é’ˆä¹Ÿæ˜¯4B ,æŒ‡é’ˆä¸ä¼šè¢«æˆªæ–­,è¿˜æ˜¯åŸæ¥çš„å€¼,ä¸ä¼šå‡ºç°éæ³•è®¿é—®.&lt;/p&gt;
&lt;p&gt;å¦‚ä½•é¿å…å‘¢: åœ¨Makefile é‡ŒåŠ ä¸Š -Wall -Werror ,ç¼–è¯‘æ—¶ä¼šæ£€æµ‹å‡ºè¿™ç§é”™è¯¯&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Linuxè™šæ‹Ÿç½‘å¡TUNå’ŒTAP</title>
        <link>https://charles-7777.github.io/hugo-stack/p/linux%E8%99%9A%E6%8B%9F%E7%BD%91%E5%8D%A1tun%E5%92%8Ctap/</link>
        <pubDate>Thu, 07 Aug 2025 15:17:36 +0800</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/linux%E8%99%9A%E6%8B%9F%E7%BD%91%E5%8D%A1tun%E5%92%8Ctap/</guid>
        <description>&lt;h1 id=&#34;ä»€ä¹ˆæ˜¯è™šæ‹Ÿç½‘å¡&#34;&gt;ä»€ä¹ˆæ˜¯è™šæ‹Ÿç½‘å¡ï¼Ÿ
&lt;/h1&gt;&lt;p&gt;è™šæ‹Ÿç½‘å¡æ˜¯è½¯ä»¶å®ç°çš„ç½‘ç»œæ¥å£ï¼Œä¸ç‰©ç†ç½‘å¡ä¸åŒï¼Œå®ƒæ²¡æœ‰ç‰©ç†ç¡¬ä»¶ï¼Œåªå­˜åœ¨äºæ“ä½œç³»ç»Ÿçš„å†…å­˜ä¸­ã€‚è™šæ‹Ÿç½‘å¡å¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿç½‘ç»œç¯å¢ƒï¼Œè¿›è¡Œæ•°æ®åŒ…çš„æ•è·ã€åˆ†æå’Œå¤„ç†ã€‚
&lt;img src=&#34;https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/951914-20240613194921289-616890101.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;tun-å’Œ-tap-çš„åŸºæœ¬æ¦‚å¿µ&#34;&gt;TUN å’Œ TAP çš„åŸºæœ¬æ¦‚å¿µ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Tun ï¼ˆNetwork TUNnelï¼‰
TUN æ˜¯ä¸‰å±‚ï¼ˆç½‘ç»œå±‚ï¼‰çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ï¼Œä¸»è¦ç”¨äº IP æ•°æ®åŒ…çš„å¤„ç†ã€‚TUN è®¾å¤‡ä¼šæ¨¡æ‹Ÿä¸€ä¸ªç½‘ç»œå±‚æ¥å£ï¼Œæ¥æ”¶åˆ°çš„æ•°æ®åŒ…ä¼šè¢«ä¼ é€’ç»™ç”¨æˆ·ç©ºé—´çš„ç¨‹åºè¿›è¡Œå¤„ç†ï¼Œå¤„ç†å®Œçš„æ•°æ®åŒ…ä¼šè¢«å‘é€å›å†…æ ¸ç½‘ç»œæ ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;TAPï¼ˆNetwork TAPï¼‰
TAP æ˜¯äºŒå±‚ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ï¼Œä¸»è¦ç”¨äºä»¥å¤ªç½‘å¸§çš„å¤„ç†ã€‚TAP è®¾å¤‡å¯ä»¥æ¨¡æ‹Ÿä¸€ä¸ªä»¥å¤ªç½‘æ¥å£ï¼Œèƒ½å¤Ÿæ¥æ”¶å’Œå‘é€åŸå§‹çš„ä»¥å¤ªç½‘å¸§ã€‚è¿™ä½¿å¾— TAP è®¾å¤‡éå¸¸é€‚åˆç”¨äºæ¡¥æ¥ä¸åŒçš„ç½‘ç»œç¯å¢ƒï¼Œæˆ–è€…åœ¨è™šæ‹Ÿæœºä¸­æ¨¡æ‹Ÿç‰©ç†ç½‘å¡ã€‚TAPæ˜¯æ•°æ®é“¾è·¯å±‚çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;tunå’Œtapçš„å¼‚åŒ&#34;&gt;Tunå’ŒTapçš„å¼‚åŒ
&lt;/h2&gt;&lt;p&gt;Tunæ˜¯ä¸‰å±‚çš„è®¾å¤‡ï¼Œè¯¥è®¾å¤‡æ²¡æœ‰MACåœ°å€ï¼Œä»å­—ç¬¦è®¾å¤‡ä¸Šè¯»å–IPæ•°æ®åŒ…ï¼Œå†™å…¥çš„ä¹Ÿæ˜¯IPæ•°æ®åŒ…ï¼Œå› æ­¤ä¸èƒ½è¿›è¡ŒäºŒå±‚çš„æ“ä½œï¼Œä¾‹å¦‚å‘ARPåŒ…å’Œä»¥å¤ªç½‘å¹¿æ’­
Tabæ˜¯äºŒå±‚çš„è®¾å¤‡ï¼Œè¯¥è®¾å¤‡æœ‰MACåœ°å€ï¼Œå¤„ç†çš„æ˜¯æ•°æ®é“¾è·¯å±‚çš„æ•°æ®å¸§ï¼Œä»å­—ç¬¦è®¾å¤‡ä¸Šè¯»å–çš„æ˜¯æ•°æ®é“¾è·¯å±‚çš„æ•°æ®å¸§ï¼Œå†™å…¥çš„ä¹Ÿæ˜¯æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ä¸Šé¢ï¼Œä¸¤è€…éƒ½æ˜¯é€šè¿‡å­—ç¬¦è®¾å¤‡çš„æ–¹å¼è¿›è¡Œè¯»å–å’Œå†™å…¥ï¼ŒTunæ˜¯ä¸‰å±‚ç½‘ç»œè®¾å¤‡ï¼Œè€ŒTabæ˜¯äºŒå±‚ç½‘ç»œè®¾å¤‡ï¼ŒTunå¸¸ç”¨äºVPNç­‰æŠ€æœ¯ï¼Œç”±äºå·¥ä½œåœ¨IPå±‚ï¼Œæ— æ³•ä¸ç‰©ç†ç½‘å¡åšbridgeï¼Œä½†å¯ä»¥é€šè¿‡ä¸‰å±‚äº¤æ¢ï¼ˆå¦‚ ip_forwardï¼‰ä¸ç‰©ç†ç½‘å¡è¿é€šï¼ŒTabè®¾å¤‡å·¥ä½œåœ¨ç¬¬äºŒå±‚ï¼Œæ”¶å‘çš„æ˜¯MACå±‚æ•°æ®åŒ…ï¼Œæ‹¥æœ‰MACå±‚çš„åŠŸèƒ½ï¼Œå¯ä»¥ä¸ç‰©ç†ç½‘å¡åšbridgeï¼Œæ”¯æŒMACå±‚å¹¿æ’­
&lt;img src=&#34;https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/951914-20240613195221480-414693358.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;tunå’Œtapåº”ç”¨åœºæ™¯&#34;&gt;Tunå’ŒTapåº”ç”¨åœºæ™¯
&lt;/h2&gt;&lt;p&gt;Tunæ˜¯ä¸€ä¸ªç½‘ç»œå±‚è®¾å¤‡ï¼Œæ”¯æŒç‚¹åˆ°ç‚¹çš„ç½‘ç»œé€šä¿¡ï¼Œå¸¸ç”¨äºtunneléš§é“å’ŒVPNçš„æ„å»ºï¼ŒtunnelæŠ€æœ¯æ˜¯ç½‘ç»œè®¾å¤‡æŠŠç½‘ç»œå±‚æ•°æ®åŒ…å°è£…åˆ°å¦ä¸€ä¸ªåè®®ä¸­ä»¥è·¨è¿‡ç½‘ç»œä¼ é€åˆ°å¦ä¸€ä¸ªç½‘ç»œè®¾å¤‡çš„å¤„ç†è¿‡ç¨‹ï¼Œä¸»è¦ç”¨äºå…¬ç½‘ä¸»æœºå’Œç§æœ‰ç½‘ç»œäº’è”äº’é€šã€‚åœ¨Linuxç³»ç»Ÿä¸­æ”¯æŒå¤šç§éš§é“æŠ€æœ¯ï¼Œå…¶åº•å±‚å®ç°åŸç†éƒ½æ˜¯åŸºäºTunè®¾å¤‡ã€‚
&lt;img src=&#34;https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/951914-20240613195412140-1269419961.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;
TAPæ¥å£çš„å…¸å‹åº”ç”¨åœºæ™¯æ˜¯åœ¨è™šæ‹ŸåŒ–ç½‘ç»œä¸­ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬é€šè¿‡KVMåˆ›å»ºçš„å¤šä¸ªVMï¼ˆè™šæ‹Ÿæœºï¼‰ï¼Œä»¥LinuxBridgeï¼ˆæ¡¥æ¥ç½‘ç»œï¼‰äº’é€šï¼›å®é™…ä¸Šå³æ˜¯é€šè¿‡åƒvnet0è¿™æ ·çš„TAPæ¥å£æ¥æ¥å…¥LinuxBridgeçš„ã€‚åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼ŒKVMç¨‹åºå°±æ˜¯å‘TAPæ¥å£è¯»å†™æ•°æ®çš„ç”¨æˆ·ç©ºé—´ç¨‹åºã€‚å½“VM0å‘æœ¬æœºçš„eth0æ¥å£å‘é€æ•°æ®ï¼ŒKVMä¼šå°†æ•°æ®å‘é€åˆ°TAPæ¥å£vnet0ï¼Œå†é€šè¿‡LinuxBridgeå°†æ•°æ®è½¬å‘åˆ°vnet1ä¸Šã€‚ç„¶åï¼ŒKVMå°†æ•°æ®å‘é€åˆ°VM1çš„eth0å£ã€‚
&lt;img src=&#34;https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/951914-20240613195718534-1283418141.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;tun-é…ç½®&#34;&gt;Tun é…ç½®
&lt;/h2&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;\# åˆ›å»ºç½‘å¡å¹¶é…ç½®IP
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ip tuntap add dev tun0 mode tun
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ip link set dev tun0 up
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ip addr add 10.0.0.1/24 dev tun0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ip route add 10.0.0.0/24 via 10.0.0.1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;\# æ¸…é™¤ç½‘å¡
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ip link set dev tun0 down
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ip tuntap del dev tun0 mode tun 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;è½¬è½½è‡ª&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.cnblogs.com/yanchuanbin/p/18246678&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Linuxè™šæ‹Ÿç½‘å¡TUNå’ŒTAP - å¿ƒè‹¥å‘é˜³èŠ±è‡ªå¼€ - åšå®¢å›­&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;å‚è€ƒèµ„æ–™
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fwww.kernel.org%2Fdoc%2FDocumentation%2Fnetworking%2Ftuntap.txt&amp;amp;objectId=2063424&amp;amp;objectType=1&amp;amp;isNewArticle=undefined&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Universal TUN/TAP device driver&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Universal TUN/TAP device driver Frequently Asked Question&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fbackreference.org%2F2010%2F03%2F26%2Ftuntap-interface-tutorial%2F&amp;amp;objectId=2063424&amp;amp;objectType=1&amp;amp;isNewArticle=undefined&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Tun/Tap interface tutorial&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fgithub.com%2Fgregnietsky%2Fsimpletun%2Fblob%2Fmaster%2Fsimpletun.c&amp;amp;objectId=2063424&amp;amp;objectType=1&amp;amp;isNewArticle=undefined&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;A simplistic, simple-minded, naive tunnelling program using tun/tap interfaces and TCP&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Linux ä½œä¸šæ§åˆ¶ã€è¿›ç¨‹ç»„å’Œä¼šè¯</title>
        <link>https://charles-7777.github.io/hugo-stack/p/linux-%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6%E8%BF%9B%E7%A8%8B%E7%BB%84%E5%92%8C%E4%BC%9A%E8%AF%9D/</link>
        <pubDate>Wed, 06 Aug 2025 15:36:36 +0800</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/linux-%E4%BD%9C%E4%B8%9A%E6%8E%A7%E5%88%B6%E8%BF%9B%E7%A8%8B%E7%BB%84%E5%92%8C%E4%BC%9A%E8%AF%9D/</guid>
        <description>&lt;h2 id=&#34;ä½œä¸šæ§åˆ¶-job-control&#34;&gt;ä½œä¸šæ§åˆ¶ (Job Control)
&lt;/h2&gt;&lt;p&gt;ä½œä¸šæ§åˆ¶æ˜¯å¤§å¤šæ•° shell æä¾›çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·åœ¨å•ä¸ªç»ˆç«¯ä¸ŠåŒæ—¶è¿è¡Œå’Œç®¡ç†å¤šä¸ªå‘½ä»¤ï¼ˆä½œä¸šï¼‰ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‰å°ä½œä¸š (Foreground Job)&lt;/strong&gt;: åœ¨ç»ˆç«¯ä¸­å¯åŠ¨ï¼Œå®ƒä¼šç‹¬å ç»ˆç«¯çš„è¾“å…¥å’Œè¾“å‡ºã€‚åœ¨å®ƒè¿è¡ŒæœŸé—´ï¼Œshell ä¼šè¢«æŒ‚èµ·ï¼Œç­‰å¾…è¯¥ä½œä¸šå®Œæˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åå°ä½œä¸š (Background Job)&lt;/strong&gt;: é€šè¿‡åœ¨å‘½ä»¤åæ·»åŠ  &lt;code&gt;&amp;amp;&lt;/code&gt; ç¬¦å·å¯åŠ¨ã€‚å®ƒä¸ä¼šå ç”¨ç»ˆç«¯ï¼Œä½ å¯ä»¥åœ¨å®ƒè¿è¡Œæ—¶ç»§ç»­åœ¨ shell ä¸­è¾“å…¥å…¶ä»–å‘½ä»¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;Ctrl+Z&lt;/code&gt;(SIGTSTPï¼‰æš‚åœå‰å°è¿›ç¨‹&lt;code&gt;Ctrl+C&lt;/code&gt;(SIGINTï¼‰ç»ˆæ­¢å½“å‰å‰å°è¿›ç¨‹&lt;code&gt;Ctrl+D&lt;/code&gt;ï¼ˆEOFï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¸¸ç”¨å‘½ä»¤: &lt;code&gt;jobs&lt;/code&gt;, &lt;code&gt;fg&lt;/code&gt;, &lt;code&gt;bg&lt;/code&gt;, &lt;code&gt;kill %&amp;lt;job_id&amp;gt;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è¿›ç¨‹ç»„-process-group&#34;&gt;è¿›ç¨‹ç»„ (Process Group)
&lt;/h2&gt;&lt;p&gt;è¿›ç¨‹ç»„æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹çš„é›†åˆã€‚ç³»ç»Ÿä¸­çš„æ¯ä¸ªè¿›ç¨‹éƒ½å±äºä¸€ä¸ªè¿›ç¨‹ç»„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç›®çš„&lt;/strong&gt;: ä¸»è¦ç”¨äºä½œä¸šæ§åˆ¶ï¼Œæ–¹ä¾¿å°†ä¿¡å·ï¼ˆå¦‚ &lt;code&gt;SIGINT&lt;/code&gt;, &lt;code&gt;SIGTSTP&lt;/code&gt;ï¼‰å‘é€åˆ°ä¸€ç»„ç›¸å…³çš„è¿›ç¨‹ã€‚ä¾‹å¦‚ï¼Œå½“ä½ åœ¨ç»ˆç«¯æŒ‰ä¸‹ &lt;code&gt;Ctrl+C&lt;/code&gt; æ—¶ï¼Œ&lt;code&gt;SIGINT&lt;/code&gt; ä¿¡å·ä¼šè¢«å‘é€åˆ°å½“å‰å‰å°ä½œä¸šçš„æ•´ä¸ªè¿›ç¨‹ç»„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿›ç¨‹ç»„ID (PGID)&lt;/strong&gt;: æ¯ä¸ªè¿›ç¨‹ç»„éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ IDã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è¿›ç¨‹ç»„é¢†å¯¼ (Process Group Leader)&lt;/strong&gt;: è¿›ç¨‹ç»„ä¸­ç¬¬ä¸€ä¸ªåˆ›å»ºçš„è¿›ç¨‹ï¼Œå…¶ PID é€šå¸¸å°±æ˜¯è¯¥è¿›ç¨‹ç»„çš„ PGIDã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸€ä¸ªç®¡é“ï¼ˆpipelineï¼‰ä¸­çš„æ‰€æœ‰è¿›ç¨‹ï¼ˆä¾‹å¦‚ &lt;code&gt;cat file | grep &amp;quot;text&amp;quot; | wc -l&lt;/code&gt;ï¼‰é€šå¸¸å±äºåŒä¸€ä¸ªè¿›ç¨‹ç»„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä¼šè¯-session&#34;&gt;ä¼šè¯ (Session)
&lt;/h2&gt;&lt;p&gt;ä¼šè¯æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ç»„çš„é›†åˆã€‚å®ƒæä¾›äº†ä¸€ä¸ªæ›´é«˜å±‚æ¬¡çš„è¿›ç¨‹ç»„ç»‡æ–¹å¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç›®çš„&lt;/strong&gt;: å°†ä¸€ä¸ªç”¨æˆ·ç™»å½•åˆ°é€€å‡ºæœŸé—´åˆ›å»ºçš„æ‰€æœ‰è¿›ç¨‹ç»„ç»‡åœ¨ä¸€èµ·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼šè¯ID (SID)&lt;/strong&gt;: æ¯ä¸ªä¼šè¯éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ IDã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ä¼šè¯é¢†å¯¼ (Session Leader)&lt;/strong&gt;: åˆ›å»ºè¯¥ä¼šè¯çš„è¿›ç¨‹ã€‚é€šå¸¸ï¼Œè¿™æ˜¯ç”¨æˆ·ç™»å½•æ—¶å¯åŠ¨çš„ shell è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ§åˆ¶ç»ˆç«¯ (Controlling Terminal)&lt;/strong&gt;: ä¸€ä¸ªä¼šè¯é€šå¸¸ä¸ä¸€ä¸ªæ§åˆ¶ç»ˆç«¯ç›¸å…³è”ã€‚å½“æ§åˆ¶ç»ˆç«¯æ–­å¼€è¿æ¥æ—¶ï¼ˆä¾‹å¦‚å…³é—­ç»ˆç«¯çª—å£æˆ–ç½‘ç»œæ–­å¼€ï¼‰ï¼Œå†…æ ¸ä¼šå‘ä¼šè¯é¢†å¯¼å‘é€ &lt;code&gt;SIGHUP&lt;/code&gt; ä¿¡å·ï¼Œåè€…é€šå¸¸ä¼šå°†å…¶ä¼ æ’­ç»™ä¼šè¯ä¸­çš„æ‰€æœ‰è¿›ç¨‹ï¼Œå¯¼è‡´å®ƒä»¬ç»ˆæ­¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;setsid-ç³»ç»Ÿè°ƒç”¨&#34;&gt;&lt;code&gt;setsid()&lt;/code&gt; ç³»ç»Ÿè°ƒç”¨
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;setsid()&lt;/code&gt; æ˜¯ä¸€ä¸ªå…³é”®çš„ç³»ç»Ÿè°ƒç”¨ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„ä¼šè¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠŸèƒ½&lt;/strong&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Â  1. è°ƒç”¨ &lt;code&gt;setsid()&lt;/code&gt; çš„è¿›ç¨‹ä¼šæˆä¸ºä¸€ä¸ªæ–°ä¼šè¯çš„&lt;strong&gt;ä¼šè¯é¢†å¯¼&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Â  2. è¯¥è¿›ç¨‹ä¼šæˆä¸ºä¸€ä¸ªæ–°è¿›ç¨‹ç»„çš„&lt;strong&gt;è¿›ç¨‹ç»„é¢†å¯¼&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Â  3. è¯¥è¿›ç¨‹ä¼š&lt;strong&gt;è„±ç¦»&lt;/strong&gt;å®ƒä¹‹å‰çš„æ§åˆ¶ç»ˆç«¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å‰æ&lt;/strong&gt;: è°ƒç”¨ &lt;code&gt;setsid()&lt;/code&gt; çš„è¿›ç¨‹ä¸èƒ½æ˜¯æŸä¸ªç°æœ‰è¿›ç¨‹ç»„çš„é¢†å¯¼è€…ã€‚ä¸ºäº†ç¡®ä¿è¿™ä¸€ç‚¹ï¼Œé€šå¸¸çš„åšæ³•æ˜¯ &lt;code&gt;fork()&lt;/code&gt; ä¸€ä¸ªå­è¿›ç¨‹ï¼Œç„¶åè®©çˆ¶è¿›ç¨‹é€€å‡ºï¼Œå­è¿›ç¨‹å†è°ƒç”¨ &lt;code&gt;setsid()&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç”¨é€”&lt;/strong&gt;: è¿™æ˜¯åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹ï¼ˆDaemonï¼‰çš„æ ‡å‡†æ–¹æ³•ã€‚é€šè¿‡åˆ›å»ºä¸€ä¸ªæ²¡æœ‰æ§åˆ¶ç»ˆç«¯çš„æ–°ä¼šhsè¯ï¼Œå®ˆæŠ¤è¿›ç¨‹å¯ä»¥ç¡®ä¿è‡ªå·±ä¸ä¼šå› ä¸ºç»ˆç«¯çš„å…³é—­è€Œæ„å¤–ç»ˆæ­¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;lxc-attach-åå°è¿›ç¨‹å¯¼è‡´é€€å‡ºå¡ä½çš„åŸå› åˆ†æ&#34;&gt;&lt;code&gt;lxc-attach&lt;/code&gt; åå°è¿›ç¨‹å¯¼è‡´é€€å‡ºå¡ä½çš„åŸå› åˆ†æ
&lt;/h2&gt;&lt;h3 id=&#34;é—®é¢˜åœºæ™¯&#34;&gt;é—®é¢˜åœºæ™¯
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Â ç”¨æˆ·åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œ &lt;code&gt;lxc-attach &amp;lt;container_name&amp;gt;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Â åœ¨ &lt;code&gt;lxc-attach&lt;/code&gt; åˆ›å»ºçš„ shell ä¸­ï¼Œå¯åŠ¨ä¸€ä¸ªåå°ä½œä¸šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Â è¾“å…¥ &lt;code&gt;exit&lt;/code&gt; å°è¯•é€€å‡º &lt;code&gt;lxc-attach&lt;/code&gt; çš„ shellã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Â æ­¤æ—¶ï¼Œç»ˆç«¯å¡ä½ï¼Œç”¨telnet è¿æ¥ç„¶åkill æ‰æ‰å¯ä»¥å›åˆ°host ä¸»æœºçš„shell&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;åŸå› å‰–æ&#34;&gt;åŸå› å‰–æ
&lt;/h3&gt;&lt;p&gt;è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒåœ¨äº&lt;strong&gt;è¿›ç¨‹å…³ç³»å’Œä¿¡å·å¤„ç†&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Â &lt;strong&gt;è¿›ç¨‹ç»“æ„&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Â  Â  - å½“ä½ è¿è¡Œ &lt;code&gt;lxc-attach&lt;/code&gt; æ—¶ï¼Œå®ƒä¼šåœ¨å®¹å™¨å†…å¯åŠ¨ä¸€ä¸ªæ–°çš„ shell è¿›ç¨‹ï¼ˆå¦‚ &lt;code&gt;bash&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  - è¿™ä¸ªæ–°çš„ shell æ˜¯ &lt;code&gt;lxc-attach&lt;/code&gt; è¿›ç¨‹çš„å­è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  - é‡è¦çš„æ˜¯ï¼Œè¿™ä¸ªæ–° shell &lt;strong&gt;æ²¡æœ‰æˆä¸ºæ–°çš„ä¼šè¯é¢†å¯¼&lt;/strong&gt;ã€‚å®ƒä¸ &lt;code&gt;lxc-attach&lt;/code&gt; è¿›ç¨‹ã€ä»¥åŠä½ æœ€åˆçš„ç™»å½• shell ä½äº&lt;strong&gt;åŒä¸€ä¸ªä¼šè¯&lt;/strong&gt;ä¸­ï¼Œå¹¶å…±äº«åŒä¸€ä¸ª&lt;strong&gt;æ§åˆ¶ç»ˆç«¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;Â &lt;strong&gt;å¯åŠ¨åå°è¿›ç¨‹&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Â  Â  - å½“ä½ åœ¨ &lt;code&gt;lxc-attach&lt;/code&gt; çš„ shell ä¸­è¿è¡Œä¸€ä¸ªåå°è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  - è¿™ä¸ª åå°è¿›ç¨‹ä¸ &lt;code&gt;lxc-attach&lt;/code&gt; çš„ shell å±äº&lt;strong&gt;åŒä¸€ä¸ªè¿›ç¨‹ç»„&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;Â &lt;strong&gt;æ‰§è¡Œ &lt;code&gt;exit&lt;/code&gt;&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Â  Â  - ä½ è¾“å…¥ &lt;code&gt;exit&lt;/code&gt;ï¼Œ&lt;code&gt;lxc-attach&lt;/code&gt; çš„ shell è¿›ç¨‹å¼€å§‹é€€å‡ºæµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  - shell è¿›ç¨‹æœ¬èº«ä¼šç»ˆæ­¢ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  - &lt;code&gt;lxc-attach&lt;/code&gt; è¿›ç¨‹åœ¨ç­‰å¾…å…¶å­è¿›ç¨‹ï¼ˆå³é‚£ä¸ª shellï¼‰å®Œå…¨ç»ˆæ­¢ã€‚&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;Â &lt;strong&gt;å¡ä½çš„æ ¹æº&lt;/strong&gt;:&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Â  Â  - shell è¿›ç¨‹è™½ç„¶ç»ˆæ­¢äº†ï¼Œä½†å®ƒå¯åŠ¨çš„åå°è¿›ç¨‹ä»ç„¶åœ¨è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  - è¿™ä¸ªåå°è¿›ç¨‹ä»ç„¶æ˜¯&lt;strong&gt;å‰å°è¿›ç¨‹ç»„&lt;/strong&gt;çš„ä¸€éƒ¨åˆ†ï¼ˆç›¸å¯¹äºæ§åˆ¶ç»ˆç«¯è€Œè¨€ï¼‰ï¼Œæˆ–è€…è¯´å®ƒä»ç„¶ä¸æ§åˆ¶ç»ˆç«¯å…³è”ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  - æ§åˆ¶ç»ˆç«¯çš„é©±åŠ¨ç¨‹åºä¼šå‘ç°ï¼Œè™½ç„¶å‰å°çš„ shell é€€å‡ºäº†ï¼Œä½†è¯¥è¿›ç¨‹ç»„é‡Œè¿˜æœ‰å…¶ä»–è¿›ç¨‹ åœ¨è¿è¡Œã€‚æ­¤æ—¶ï¼Œç»ˆç«¯ä¼šå¤„äºä¸€ç§â€œæŒ‚èµ·â€æˆ–â€œç­‰å¾…â€çŠ¶æ€ï¼Œå› ä¸ºå®ƒéœ€è¦å¤„ç†è¿™ä¸ªä»åœ¨è¿è¡Œçš„åå°è¿›ç¨‹çš„æ ‡å‡†è¾“å…¥/è¾“å‡ºï¼ˆå³ä½¿å®ƒä¸è¯»å†™ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  - &lt;code&gt;lxc-attach&lt;/code&gt; è¿›ç¨‹æœ¬èº«ä¹Ÿåœ¨ç­‰å¾…ï¼Œå› ä¸ºå®ƒå¯èƒ½éœ€è¦æ¸…ç†ä¸å­è¿›ç¨‹ç›¸å…³çš„æ‰€æœ‰èµ„æºã€‚åªè¦ è¿™ä¸ªåå°è¿›ç¨‹è¿˜åœ¨è¿è¡Œï¼Œæ•´ä¸ªè¿›ç¨‹é“¾å°±æ— æ³•å¹²å‡€åœ°ç»“æŸã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  - åªæœ‰å½“ è¿™ä¸ªåå°è¿›ç¨‹ç»“æŸåï¼Œæ•´ä¸ªè¿›ç¨‹ç»„æ‰ç®—å®Œå…¨ç»ˆç»“ï¼Œæ§åˆ¶ç»ˆç«¯çš„é”å®šçŠ¶æ€è¢«è§£é™¤ï¼Œ&lt;code&gt;lxc-attach&lt;/code&gt; è¿›ç¨‹ä¹Ÿéšä¹‹é€€å‡ºï¼Œä½ æ‰èƒ½å›åˆ°åŸæ¥çš„ shell æç¤ºç¬¦ã€‚&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³åŠæ³•&lt;/strong&gt;: &lt;code&gt;nohup&lt;/code&gt; &lt;code&gt;setsid&lt;/code&gt; &lt;code&gt;disown&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Â Â Â Â &lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;å‚è€ƒé“¾æ¥
&lt;a class=&#34;link&#34; href=&#34;https://segmentfault.com/a/1190000009152815#item-1&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Linux sessionå’Œè¿›ç¨‹ç»„æ¦‚è¿° - Linuxç¨‹åºå‘˜ - SegmentFault æ€å¦&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://segmentfault.com/a/1190000009082089#item-6&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Linux TTY/PTSæ¦‚è¿° - Linuxç¨‹åºå‘˜ - SegmentFault æ€å¦&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
</description>
        </item>
        <item>
        <title>è¿›ç¨‹åŸè¯­fork exceve waitpid</title>
        <link>https://charles-7777.github.io/hugo-stack/p/%E8%BF%9B%E7%A8%8B%E5%8E%9F%E8%AF%ADfork-exceve-waitpid/</link>
        <pubDate>Thu, 31 Jul 2025 17:22:16 +0800</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/%E8%BF%9B%E7%A8%8B%E5%8E%9F%E8%AF%ADfork-exceve-waitpid/</guid>
        <description>&lt;h2 id=&#34;frok&#34;&gt;frok
&lt;/h2&gt;&lt;p&gt;ä¸€ä¸ªè¿è¡Œçš„è¿›ç¨‹,å®ƒè°ƒç”¨äº†fork()å‡½æ•°ï¼Œç„¶åå°±äº§ç”Ÿäº†å­è¿›ç¨‹ï¼ŒåŸæ¥çš„è¿›ç¨‹å«çˆ¶è¿›ç¨‹ã€‚è¿™ä¸ªå­è¿›ç¨‹ä¹Ÿæ˜¯è¿›ç¨‹ï¼Œä½†å‡¡æ˜¯è¿›ç¨‹ï¼Œéƒ½æœ‰è‡ªå·±çš„&lt;strong&gt;è™šæ‹Ÿåœ°å€ç©ºé—´&lt;/strong&gt;ï¼ˆè®©æ¯ä¸ªè¿›ç¨‹è‡ªå·±çœ‹èµ·æ¥æ˜¯ç‹¬å å†…å­˜ï¼Œé€šè¿‡æ®µé¡µå†…å­˜ç®¡ç†æ˜ å°„åˆ°ä¸åŒçš„ç‰©ç†åœ°å€ç©ºé—´ï¼‰ã€‚è™šæ‹Ÿåœ°å€ç©ºé—´æ˜¯ä»0åˆ°4Gçš„å¤§å°ï¼Œå…¶ä¸­3-4Gæ˜¯å±äºå†…æ ¸çš„ï¼ˆ32ä½ç³»ç»Ÿï¼‰ã€‚åˆ›å»ºå®Œå­è¿›ç¨‹åï¼Œçˆ¶è¿›ç¨‹ç»§ç»­è¿è¡Œç¨‹åºï¼ˆå³åŸæ¥çš„è¿›ç¨‹ï¼‰çš„ä»£ç ï¼Œåˆšåˆ›å»ºå‡ºæ¥çš„å­è¿›ç¨‹æ‹¥æœ‰å’Œçˆ¶è¿›ç¨‹å®Œå…¨ä¸€æ ·çš„ä»£ç æ®µï¼Œæ•°æ®æ®µï¼Œä¹Ÿå°±æ˜¯è¯´å®Œå®Œå…¨å…¨æ‹·è´äº†ä¸€ä»½çˆ¶è¿›ç¨‹ï¼Œå’Œçˆ¶è¿›ç¨‹å®Œå…¨ä¸€æ ·ã€‚å³&lt;strong&gt;clone&lt;/strong&gt;çˆ¶è¿›ç¨‹0-3Gçš„å†…å®¹ï¼Œè€Œ3-4Gçš„kernelåªéœ€è¦é‡æ–°æ˜ å°„ä¸€ä¸‹åˆ°ç‰©ç†åœ°å€çš„kernelå³å¯ã€‚ä½†æ˜¯æ“ä½œç³»ç»Ÿè¦å¦‚ä½•åŒºåˆ†è¿™ä¸¤ä¸ªè¿›ç¨‹å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯&lt;strong&gt;è¿›ç¨‹ID&lt;/strong&gt;å³pidã€‚&lt;strong&gt;pid&lt;/strong&gt;æ˜¯å­˜å‚¨åœ¨&lt;strong&gt;PCB&lt;/strong&gt;å½“ä¸­çš„ç±»ä¼¼èº«ä»½è¯çš„ä¸œè¥¿.
kernelä¼šåˆ›å»ºå­è¿›ç¨‹è‡ªå·±çš„PCB,ç„¶åcloneçˆ¶è¿›ç¨‹çš„PCB(&lt;em&gt;task_struct&lt;/em&gt;)çš„&lt;strong&gt;ç»å¤§éƒ¨åˆ†ä¿¡æ¯&lt;/strong&gt;ï¼Œå¦‚å†…å­˜æ˜ å°„(&lt;em&gt;mm_struct&lt;/em&gt;ï¼Œé‡‡ç”¨Â &lt;strong&gt;COW æœºåˆ¶&lt;/strong&gt;copy on write),æ–‡ä»¶æè¿°ç¬¦è¡¨,è°ƒåº¦ä¿¡æ¯ï¼ˆä¼˜å…ˆçº§ã€CPU æ—¶é—´ç­‰ï¼‰,ä½†æŸäº›å…³é”®å­—æ®µä¼šè¢«ä¿®æ”¹,å¦‚&lt;strong&gt;pid&lt;/strong&gt;,&lt;strong&gt;ppid&lt;/strong&gt;ç­‰.&lt;/p&gt;
&lt;p&gt;kernelä¼šè®¾ç½® fork() çš„è¿”å›å€¼.åœ¨å­è¿›ç¨‹çš„ task_struct ä¸­ï¼Œkernelä¼šé¢„å…ˆè®¾ç½® eax/rax å¯„å­˜å™¨ï¼ˆå­˜å‚¨è¿”å›å€¼ï¼‰ä¸º 0ï¼Œå› æ­¤å­è¿›ç¨‹çœ‹åˆ°çš„ fork() è¿”å› 0ã€‚çˆ¶è¿›ç¨‹çš„ fork() è¿”å›å­è¿›ç¨‹çš„ pidã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;sys/types.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;q_val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;father is running, pid: %d, ppid: %d&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getpid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getppid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;pid_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;fork&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cnt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;// Child process
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;I am child process, pid: %d, ppid: %d, q_val: %d, &amp;amp;q_val: %p&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;nf&#34;&gt;getpid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getppid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;q_val&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;q_val&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;cnt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cnt&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;q_val&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;300&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;I am child, q_val is changed, 100 -&amp;gt; 300&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;c1&#34;&gt;// Parent process
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;I am father process, pid: %d, ppid: %d, q_val: %d, &amp;amp;q_val: %p&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;nf&#34;&gt;getpid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getppid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;q_val&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;q_val&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;forkåº•å±‚æ˜¯è°ƒç”¨äº†å†…æ ¸çš„å‡½æ•°æ¥å®ç°forkçš„åŠŸèƒ½çš„ï¼Œå³å…ˆcreate()å…ˆåˆ›å»ºè¿›ç¨‹ï¼Œæ­¤æ—¶è¿›ç¨‹å†…å®¹ä¸ºç©ºï¼Œç„¶åclone()å¤åˆ¶çˆ¶è¿›ç¨‹çš„å†…å®¹åˆ°å­è¿›ç¨‹ä¸­ï¼Œæ­¤æ—¶å­è¿›ç¨‹å°±è¯ç”Ÿäº†ï¼Œæ¥ç€çˆ¶è¿›ç¨‹å°±returnè¿”å›äº†ã€‚è€Œå­è¿›ç¨‹è¯ç”Ÿåï¼Œæ˜¯ç›´æ¥è¿è¡Œreturnè¿”å›çš„ï¼Œç„¶åæ¥ç€æ‰§è¡Œåé¢çš„ç¨‹åºï¼Œè¿™é‡Œæ³¨æ„ï¼šå­è¿›ç¨‹æ˜¯ä¸ä¼šæ‰§è¡Œå‰é¢çˆ¶è¿›ç¨‹å·²ç»æ‰§è¡Œè¿‡çš„ç¨‹åºäº†å¾—ï¼Œå› ä¸ºPCBä¸­è®°å½•äº†å½“å‰è¿›ç¨‹è¿è¡Œåˆ°å“ªé‡Œï¼Œè€Œå­è¿›ç¨‹åˆæ˜¯å®Œå…¨æ‹·è´è¿‡æ¥çš„ï¼Œæ‰€ä»¥PCBçš„ç¨‹åºè®¡æ•°å™¨ä¹Ÿæ˜¯å’Œçˆ¶è¿›ç¨‹ç›¸åŒçš„ï¼Œæ‰€ä»¥æ˜¯ä»fork()åé¢çš„ç¨‹åºç»§ç»­æ‰§è¡Œã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;father is running, pid: 2193928, ppid: 784260
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am father process, pid: 2193928, ppid: 784260, q_val: 100, &amp;amp;q_val: 0x55e878c7f010
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am child process, pid: 2193930, ppid: 2193928, q_val: 100, &amp;amp;q_val: 0x55e878c7f010
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am father process, pid: 2193928, ppid: 784260, q_val: 100, &amp;amp;q_val: 0x55e878c7f010
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am child process, pid: 2193930, ppid: 2193928, q_val: 100, &amp;amp;q_val: 0x55e878c7f010
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am father process, pid: 2193928, ppid: 784260, q_val: 100, &amp;amp;q_val: 0x55e878c7f010
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am child process, pid: 2193930, ppid: 2193928, q_val: 100, &amp;amp;q_val: 0x55e878c7f010
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am father process, pid: 2193928, ppid: 784260, q_val: 100, &amp;amp;q_val: 0x55e878c7f010
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am child process, pid: 2193930, ppid: 2193928, q_val: 100, &amp;amp;q_val: 0x55e878c7f010
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am father process, pid: 2193928, ppid: 784260, q_val: 100, &amp;amp;q_val: 0x55e878c7f010
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am child, q_val is changed, 100 -&amp;gt; 300
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am child process, pid: 2193930, ppid: 2193928, q_val: 300, &amp;amp;q_val: 0x55e878c7f010
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am father process, pid: 2193928, ppid: 784260, q_val: 100, &amp;amp;q_val: 0x55e878c7f010
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am child process, pid: 2193930, ppid: 2193928, q_val: 300, &amp;amp;q_val: 0x55e878c7f010
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am father process, pid: 2193928, ppid: 784260, q_val: 100, &amp;amp;q_val: 0x55e878c7f010
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am child process, pid: 2193930, ppid: 2193928, q_val: 300, &amp;amp;q_val: 0x55e878c7f010
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am father process, pid: 2193928, ppid: 784260, q_val: 100, &amp;amp;q_val: 0x55e878c7f010
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;I am child process, pid
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;execæ—&#34;&gt;execæ—
&lt;/h2&gt;&lt;p&gt;ç”¨forkåˆ›å»ºå­è¿›ç¨‹åæ‰§è¡Œçš„æ˜¯å’Œçˆ¶è¿›ç¨‹ç›¸åŒçš„ç¨‹åºï¼ˆä½†æœ‰å¯èƒ½æ‰§è¡Œä¸åŒçš„ä»£ç åˆ†æ”¯ï¼‰ï¼Œ
å­è¿›ç¨‹å¾€å¾€è¦è°ƒç”¨ä¸€ç§execå‡½æ•°ä»¥æ‰§è¡Œå¦ä¸€ä¸ªç¨‹åºã€‚å½“è¿›ç¨‹è°ƒç”¨ä¸€ç§execå‡½æ•°æ—¶ï¼Œè¯¥è¿›ç¨‹çš„
ç”¨æˆ·ç©ºé—´ä»£ç å’Œæ•°æ®å®Œå…¨è¢«æ–°ç¨‹åºæ›¿æ¢ï¼Œä»æ–°ç¨‹åºçš„å¯åŠ¨ä¾‹ç¨‹å¼€å§‹æ‰§è¡Œã€‚è°ƒç”¨execå¹¶ä¸åˆ›å»º
æ–°è¿›ç¨‹ï¼Œæ‰€ä»¥è°ƒç”¨execå‰åè¯¥è¿›ç¨‹çš„idå¹¶æœªæ”¹å˜&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cpf&#34;&gt;int execl(const char *path, const char *arg, ...);&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;execlp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;execle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;arg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;...,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;envp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;execv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;execvp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;execve&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[],&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;envp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™äº›å‡½æ•°å¦‚æœè°ƒç”¨æˆåŠŸåˆ™åŠ è½½æ–°çš„ç¨‹åºä»å¯åŠ¨ä»£ç å¼€å§‹æ‰§è¡Œï¼Œä¸å†è¿”å›ï¼Œå¦‚æœè°ƒç”¨å‡ºé”™
åˆ™è¿”å›-1ï¼Œæ‰€ä»¥execå‡½æ•°åªæœ‰å‡ºé”™çš„è¿”å›å€¼è€Œæ²¡æœ‰æˆåŠŸçš„è¿”å›å€¼&lt;/p&gt;
&lt;h2 id=&#34;waitwaitpid&#34;&gt;wait/waitpid
&lt;/h2&gt;&lt;p&gt;åƒµå°¸è¿›ç¨‹: å­è¿›ç¨‹é€€å‡ºï¼Œçˆ¶è¿›ç¨‹æ²¡æœ‰å›æ”¶å­è¿›ç¨‹èµ„æºï¼ˆPCBï¼‰ï¼Œåˆ™å­è¿›ç¨‹å˜æˆåƒµå°¸è¿›ç¨‹
å­¤å„¿è¿›ç¨‹: çˆ¶è¿›ç¨‹å…ˆäºå­è¿›ç¨‹ç»“æŸï¼Œåˆ™å­è¿›ç¨‹æˆä¸ºå­¤å„¿è¿›ç¨‹,å­è¿›ç¨‹çš„çˆ¶è¿›ç¨‹æˆä¸º1å·
è¿›ç¨‹initè¿›ç¨‹ï¼Œç§°ä¸ºinitè¿›ç¨‹é¢†å…»å­¤å„¿è¿›ç¨‹&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªè¿›ç¨‹åœ¨ç»ˆæ­¢æ—¶ä¼šå…³é—­æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ï¼Œé‡Šæ”¾åœ¨ç”¨æˆ·ç©ºé—´åˆ†é…çš„å†…å­˜ï¼Œä½†å®ƒçš„PCBè¿˜
ä¿ç•™ç€ï¼Œå†…æ ¸åœ¨å…¶ä¸­ä¿å­˜äº†ä¸€äº›ä¿¡æ¯ï¼šå¦‚æœæ˜¯æ­£å¸¸ç»ˆæ­¢åˆ™ä¿å­˜ç€é€€å‡ºçŠ¶æ€ï¼Œå¦‚æœæ˜¯å¼‚å¸¸ç»ˆæ­¢
åˆ™ä¿å­˜ç€å¯¼è‡´è¯¥è¿›ç¨‹ç»ˆæ­¢çš„ä¿¡å·æ˜¯å“ªä¸ªã€‚è¿™ä¸ªè¿›ç¨‹çš„çˆ¶è¿›ç¨‹å¯ä»¥è°ƒç”¨waitæˆ–waitpidè·å–è¿™
äº›ä¿¡æ¯ï¼Œç„¶åå½»åº•æ¸…é™¤æ‰è¿™ä¸ªè¿›ç¨‹ã€‚æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªè¿›ç¨‹çš„é€€å‡ºçŠ¶æ€å¯ä»¥åœ¨Shellä¸­ç”¨ç‰¹æ®Šå˜
é‡$?æŸ¥çœ‹ï¼Œå› ä¸ºShellæ˜¯å®ƒçš„çˆ¶è¿›ç¨‹ï¼Œå½“å®ƒç»ˆæ­¢æ—¶Shellè°ƒç”¨waitæˆ–waitpidå¾—åˆ°å®ƒçš„é€€å‡ºçŠ¶
æ€åŒæ—¶å½»åº•æ¸…é™¤æ‰è¿™ä¸ªè¿›ç¨‹ã€‚ä½†æ˜¯ï¼Œå¦‚æœçˆ¶è¿›ç¨‹å…ˆäºå­è¿›ç¨‹ç»“æŸï¼Œåˆ™å­è¿›ç¨‹æˆä¸ºå­¤å„¿è¿›ç¨‹ã€‚å­¤å„¿è¿›ç¨‹å°†è¢« init è¿›ç¨‹ï¼ˆè¿›ç¨‹å·ä¸º1ï¼‰é¢†å…»ï¼Œå¹¶ç”± init è¿›ç¨‹å¯¹å­¤å„¿è¿›ç¨‹å®ŒæˆçŠ¶æ€æ”¶é›†å·¥ä½œã€‚è€Œå¦‚æœå­è¿›ç¨‹å…ˆäºçˆ¶è¿›ç¨‹é€€å‡ºï¼ŒåŒæ—¶çˆ¶è¿›ç¨‹å¤ªå¿™äº†ï¼Œæ— ç‘•å›æ”¶å­è¿›ç¨‹çš„èµ„æºï¼Œå­è¿›ç¨‹æ®‹ç•™èµ„æºï¼ˆPCBï¼‰å­˜æ”¾äºå†…æ ¸ä¸­ï¼Œå˜æˆåƒµå°¸ã€‚ä»»ä½•è¿›ç¨‹åœ¨åˆšç»ˆæ­¢æ—¶éƒ½æ˜¯åƒµå°¸è¿›ç¨‹ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œåƒµ
å°¸è¿›ç¨‹éƒ½ç«‹åˆ»è¢«çˆ¶è¿›ç¨‹æ¸…ç†äº†.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#include&lt;/span&gt; &lt;span class=&#34;cpf&#34;&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;pid_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;fork&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;I am child, my parent= %d, going to sleep 3s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getppid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;-------------child die--------------&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;I am parent, pid = %d, myson = %d, going to sleep 5s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getpid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;system&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ps -o pid,ppid,state,tty,command&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;perror&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;fork&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨è¿™ä¸ªç¨‹åºé‡Œï¼Œçˆ¶è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹ä¹‹åï¼Œå°±ä¼‘çœ  5 ç§’é’Ÿã€‚è€Œå­è¿›ç¨‹åªä¼‘çœ  3 ç§’é’Ÿå°±é€€å‡ºï¼Œåœ¨å®ƒé€€å‡ºä¹‹åï¼Œçˆ¶è¿›ç¨‹è¿˜æœªè‹é†’ï¼Œå› æ­¤æ²¡äººç»™å­è¿›ç¨‹ã€Œæ”¶å°¸ã€ï¼Œæ‰€ä»¥å®ƒå°±å˜æˆäº†åƒµå°¸è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;åƒµå°¸è¿›ç¨‹å…¶å®å·²ç»å°±æ˜¯é€€å‡ºçš„è¿›ç¨‹ï¼Œå› æ­¤æ— æ³•å†åˆ©ç”¨killå‘½ä»¤æ€æ­»åƒµå°¸è¿›ç¨‹ã€‚åƒµå°¸è¿›ç¨‹çš„ç½ªé­ç¥¸é¦–æ˜¯çˆ¶è¿›ç¨‹æ²¡æœ‰å›æ”¶å®ƒçš„èµ„æºï¼Œé‚£æˆ‘ä»¬å¯ä»¥æƒ³åŠæ³•å®ƒå…¶å®ƒè¿›ç¨‹å»å›æ”¶åƒµå°¸è¿›ç¨‹çš„èµ„æºï¼Œè¿™ä¸ªè¿›ç¨‹å°±æ˜¯ init è¿›ç¨‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ€æ­»çˆ¶è¿›ç¨‹ï¼Œinit è¿›ç¨‹å°±ä¼šå¾ˆå–„è‰¯åœ°æŠŠé‚£äº›åƒµå°¸è¿›ç¨‹é¢†å…»è¿‡æ¥ï¼Œå¹¶åˆç†çš„å›æ”¶å®ƒä»¬çš„èµ„æºï¼Œé‚£äº›åƒµå°¸è¿›ç¨‹å°±å¾—åˆ°äº†å¦¥å–„çš„å¤„ç†äº†&lt;/p&gt;
</description>
        </item>
        <item>
        <title>openwrt procdå¯åŠ¨æµç¨‹åˆ†æ</title>
        <link>https://charles-7777.github.io/hugo-stack/p/openwrt-procd%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/</link>
        <pubDate>Wed, 30 Jul 2025 18:28:23 +0800</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/openwrt-procd%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/</guid>
        <description>&lt;h1 id=&#34;openwrt-procdå¯åŠ¨æµç¨‹åˆ†æ&#34;&gt;openwrt procdå¯åŠ¨æµç¨‹åˆ†æ
&lt;/h1&gt;&lt;h2 id=&#34;kernel_init&#34;&gt;kernel_init
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;Linux&lt;/strong&gt;å†…æ ¸æ‰§è¡Œ&lt;em&gt;start_kernel&lt;/em&gt;å‡½æ•°æ—¶ä¼šè°ƒç”¨&lt;em&gt;kernel_init&lt;/em&gt;æ¥å¯åŠ¨&lt;strong&gt;init&lt;/strong&gt;è¿›ç¨‹ï¼Œæµç¨‹å¦‚ä¸‹å›¾&lt;/p&gt;
&lt;p&gt;start_kernel&amp;ndash;&amp;gt;rest_init&amp;ndash;&amp;gt;kernel_init&amp;ndash;&amp;gt;try_to_run_init_process&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;kernel_init()&lt;/strong&gt;(ä½äº linux-4.1.52/init/main.c)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;cm&#34;&gt;/*
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;     * We try each of these until one succeeds.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;     *
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;     * The Bourne shell can be used instead of init if we are
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;     * trying to recover a really broken machine.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;     */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;execute_command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;run_init_process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;execute_command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Requested init %s failed (error %d).&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;n&#34;&gt;execute_command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;try_to_run_init_process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/sbin/init&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;try_to_run_init_process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/etc/init&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;try_to_run_init_process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/bin/init&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;try_to_run_init_process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/bin/sh&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;No working init found.  Try passing init= option to kernel. &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;s&#34;&gt;&amp;#34;See Linux Documentation/init.txt for guidance.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;sbininit&#34;&gt;/sbin/init
&lt;/h2&gt;&lt;p&gt;openwrt æºç  openwrt/package/system/procd/Makefile&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-makefile&#34; data-lang=&#34;makefile&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;define&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;Package/procd/install&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;INSTALL_DIR&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;1&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;/sbin&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;1&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;/etc&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;1&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;/lib/functions&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;INSTALL_BIN&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;PKG_INSTALL_DIR&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;/usr/sbin/{init,procd,askfirst,udevtrigger,upgraded}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;1&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;/sbin/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;INSTALL_DATA&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;PKG_INSTALL_DIR&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;/usr/lib/libsetlbf.so&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;1&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;/lib&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;INSTALL_BIN&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;./files/reload_config&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;1&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;/sbin/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;INSTALL_CONF&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;./files/hotplug*.json&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;1&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;/etc/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;INSTALL_DATA&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;./files/procd.sh&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;1&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;/lib/functions/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;INSTALL_BIN&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;./files/service&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;1&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;/sbin/service&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;endef&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;procdæºç &lt;strong&gt;procd/CMakeList.txt&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-makefile&#34; data-lang=&#34;makefile&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;IF(DISABLE_INIT)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;ADD_DEFINITIONS(-DDISABLE_INIT)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;ELSE()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;ADD_EXECUTABLE(init&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;initd/init.c&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;initd/early.c&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;initd/preinit.c&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;initd/mkdev.c&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;sysupgrade.c&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;watchdog.c&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;err&#34;&gt;utils/utils.c)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;TARGET_INCLUDE_DIRECTORIES(init&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;PUBLIC&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;${SELINUX_INCLUDE_DIRS})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;TARGET_LINK_LIBRARIES(init&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;${LIBS}&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;${SELINUX_LIBRARIES})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;INSTALL(TARGETS&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;init&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;err&#34;&gt;RUNTIME&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;DESTINATION&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;${CMAKE_INSTALL_SBINDIR}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;procd-å¯åŠ¨æµç¨‹&#34;&gt;procd å¯åŠ¨æµç¨‹
&lt;/h2&gt;&lt;p&gt;/sbin/init  main å‡½æ•°å…¥å£ä½äº procd/&lt;strong&gt;initd/init.c&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;pid_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;ulog_open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ULOG_KMSG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LOG_DAEMON&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;init&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;sigaction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SIGTERM&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sa_shutdown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;sigaction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SIGUSR1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sa_shutdown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;sigaction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SIGUSR2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sa_shutdown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;sigaction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;SIGPWR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sa_shutdown&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;selinux&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;exit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;early&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;cmdline&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;watchdog_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;fork&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kmod&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;/sbin/kmodloader&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;/etc/modules-boot.d/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;debug&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;patch_stdio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/dev/null&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;execvp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;kmod&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kmod&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Failed to start kmodloader: %m&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;exit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EXIT_FAILURE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Failed to start kmodloader instance: %m&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;timespec&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;waitpid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;WNOHANG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;nanosleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;watchdog_ping&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;uloop_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;preinit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;uloop_run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;kmodloader
å…ˆå¯åŠ¨çš„æ˜¯kmodloader(å®ç°äºopenwrt/ubox/kmodloader.c),ä¼šinsmodä½äº/etc/modules.d/ä¸‹çš„kernel module list&lt;/p&gt;&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main_loader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gl_flags&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GLOB_NOESCAPE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GLOB_MARK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dir&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;/etc/modules.d/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;module_node&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;mn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;module&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;glob_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fail&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;n&#34;&gt;dir&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;malloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dir&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nf&#34;&gt;ULOG_ERR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;out of memory&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;strcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dir&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;strcat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;scan_module_folders&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;goto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;free_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;scan_loaded_modules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;goto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;free_path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;ULOG_INFO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;loading kernel modules from %s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;......&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exec&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;basename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;avl_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;modules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;avl_modcmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;strcmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;insmod&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main_insmod&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;strcmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;rmmod&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main_rmmod&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;strcmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;lsmod&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main_lsmod&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;strcmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;modinfo&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main_modinfo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;load_options&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;strcmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;exec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;modprobe&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main_modprobe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;nf&#34;&gt;ulog_open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ULOG_KMSG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LOG_USER&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;kmodloader&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main_loader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;uloop_init&lt;/strong&gt;å®ç°ä½äº&lt;strong&gt;libubox&lt;/strong&gt;æºç &lt;strong&gt;uloop.c&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;uloop_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;uloop_init_pollfd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;waker_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;uloop_done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;uloop_init_pollfd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;poll_fd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;poll_fd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;epoll_create&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;poll_fd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;fcntl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;poll_fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;F_SETFD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;fcntl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;poll_fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;F_GETFD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FD_CLOEXEC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;preinit&lt;/strong&gt;å®ç°ä½äº&lt;strong&gt;procd&lt;/strong&gt;æºç æ–‡ä»¶&lt;strong&gt;initd/preinit.c&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;uloop_process&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;preinit_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;uloop_process&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;plugd_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;preinit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;/bin/sh&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;/etc/preinit&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plug&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;/sbin/procd&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;-h&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;/etc/hotplug-preinit.json&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;LOG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;- preinit -&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;plugd_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;plugd_proc_cb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;plugd_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;fork&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugd_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;execvp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plug&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;plug&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Failed to start plugd: %m&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;exit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EXIT_FAILURE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugd_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Failed to start new plugd instance: %m&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;uloop_process_add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugd_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;setenv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;PREINIT&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;creat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/tmp/.preinit&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mo&#34;&gt;0600&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Failed to create sentinel file: %m&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;preinit_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;spawn_procd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;preinit_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;fork&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;preinit_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;execvp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Failed to start preinit: %m&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;exit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EXIT_FAILURE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;preinit_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Failed to start new preinit instance: %m&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;uloop_process_add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;preinit_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;DEBUG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Launched preinit instance, pid=%d&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;preinit_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;åˆ›å»ºå­è¿›ç¨‹æ‰§è¡Œ /sbin/procd -h /etc/hotplug-preinit.json ï¼Œä¸»è¿›ç¨‹åŒæ—¶ä½¿ç”¨ uloop_process_add()æŠŠ /sbin/procd å­è¿›ç¨‹åŠ å…¥ uloop è¿›è¡Œç›‘æ§ï¼Œå½“ /sbin/procd è¿›ç¨‹ç»“æŸæ—¶å›è°ƒ plugd_proc_cb å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;åˆ›å»ºå­è¿›ç¨‹æ‰§è¡Œ /etc/preinit è„šæœ¬ï¼Œæ­¤æ—¶ PREINITç¯å¢ƒå˜é‡è¢«è®¾ç½®ä¸º1ï¼Œä¸»è¿›ç¨‹åŒæ—¶ä½¿ç”¨ uloop_process_add() æŠŠ/etc/preinit å­è¿›ç¨‹åŠ å…¥ uloop è¿›è¡Œç›‘æ§ï¼Œå½“ /etc/preinit æ‰§è¡Œç»“æŸæ—¶å›è°ƒ spawn_procdå‡½æ•°&lt;/li&gt;
&lt;li&gt;spawn_procd()å‡½æ•°ç¹è¡Œåç»§çœŸæ­£ä½¿ç”¨çš„ /sbin/procd è¿›ç¨‹ï¼Œä» /tmp/debuglevel è¯»å‡º debug çº§åˆ«å¹¶è®¾ç½®åˆ°ç¯å¢ƒå˜é‡ DBGLVL ä¸­ï¼ŒæŠŠ watchdog fd è®¾ç½®åˆ°ç¯å¢ƒå˜é‡ WDTFD ä¸­ï¼Œæœ€åè°ƒç”¨ execvp()ç¹è¡Œ /sbin/procd è¿›ç¨‹&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;p&gt;é¦–å…ˆçœ‹&lt;strong&gt;procd&lt;/strong&gt;ï¼Œå› ä¸ºå¸¦æœ‰å‚æ•°â€œ-h /etc/hotplug-preinit.jsonâ€ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œ&lt;strong&gt;hotplug_run&lt;/strong&gt;å‡½æ•°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dbglvl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getenv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;DBGLVL&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ulog_channels&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ULOG_KMSG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dbglvl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;debug&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;atoi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dbglvl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;unsetenv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;DBGLVL&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getopt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;d:s:h:S&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;h&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hotplug_run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;optarg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// hotplug
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;s&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;ubus_socket&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;optarg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;d&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;debug&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;atoi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;optarg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;S&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;ulog_channels&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ULOG_STDIO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;usage&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;ulog_open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ulog_channels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LOG_DAEMON&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;procd&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;ulog_threshold&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LOG_DEBUG&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;setsid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;uloop_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;procd_signal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;procd_udebug_set_enabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;getpid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;procd_connect_ubus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;procd_state_next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;uloop_run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;uloop_done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;hotplug&lt;/strong&gt;å®ç°å¦‚ä¸‹ï¼Œè¿™é‡Œæ˜¯å»ºç«‹&lt;strong&gt;netlink&lt;/strong&gt;é€šä¿¡æœºåˆ¶ï¼Œå®Œæˆç”¨æˆ·å±‚å’Œå†…æ ¸çš„äº¤äº’ï¼Œç›‘å¬å†…æ ¸çš„ueventäº‹ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;procd/plug/hotplug.c&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hotplug&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_nl&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;nlbufsize&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;512&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;rule_file&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;strdup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;memset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_nl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;nls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nl_family&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AF_NETLINK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;nls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nl_pid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;getpid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;nls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nl_groups&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hotplug_fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;socket&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PF_NETLINK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SOCK_DGRAM&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SOCK_CLOEXEC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NETLINK_KOBJECT_UEVENT&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Failed to open hotplug socket: %s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;strerror&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;errno&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;exit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;bind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hotplug_fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_nl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Failed to bind hotplug socket: %s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;strerror&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;errno&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;exit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;setsockopt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hotplug_fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SOL_SOCKET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SO_RCVBUFFORCE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nlbufsize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nlbufsize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Failed to resize receive buffer: %s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;strerror&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;errno&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;json_script_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;jctx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;queue_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cb&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;queue_proc_cb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;uloop_fd_add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hotplug_fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ULOOP_READ&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;hotplug_run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;uloop_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;hotplug&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;uloop_run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å†…æ ¸å‘å‡ºueventäº‹ä»¶
å†…æ ¸ä½¿ç”¨ uevent äº‹ä»¶é€šçŸ¥ç”¨æˆ·ç©ºé—´ï¼Œ uevent é¦–å…ˆåœ¨å†…æ ¸ä¸­è°ƒç”¨ netink_kemel_create() å‡½æ•°åˆ›å»ºä¸€ä¸ª socket å¥—æ¥å­—ï¼Œè¯¥å‡½æ•°åŸå‹åœ¨ netink.h ä¸­å®šä¹‰ã€‚è¿™æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„ socket ï¼Œä¸“é—¨ç”¨äºå†…æ ¸ç©ºé—´ä¸ç”¨æˆ·ç©ºé—´çš„å¼‚æ­¥é€šä¿¡ã€‚kobject_uevent()äº§ç”Ÿuevent äº‹ä»¶ (/lib/kobject_uevent.c)ï¼Œäº‹ä»¶çš„éƒ¨åˆ†ä¿¡æ¯é€šè¿‡ç¯å¢ƒå˜é‡ä¼ é€’ï¼Œå¦‚$ACTION,$DEVPATH,$SUBSYSTEM ç­‰ï¼Œäº§ç”Ÿçš„ uevent å…ˆç”± netlink_broadcast_filtered()å‘å‡ºï¼Œæœ€åè°ƒç”¨uevent helper æ‰€æŒ‡å®šçš„ç¨‹åºæ¥å¤„ç†ã€‚åœ¨linux ä¸­ï¼Œuevent_helper é‡Œé»˜è®¤æŒ‡å®š&amp;quot;/sbin/hotplugâ€ï¼Œä½†å¯ä»¥é€šè¿‡ /sys/kemel/uevent helper (kernel/ksysfs.c) /proc/kernel/uevent_elper(kernel/sysctl.c)æ¥ä¿®æ”¹æˆæŒ‡å®šçš„ç¨‹åºã€‚åœ¨æ–° OpenWRT ä¸­ï¼Œå¹¶ä¸ä½¿ç”¨ user helper æŒ‡å®šç¨‹åºæ¥å¤„ç† uevent(/sbin/hotplug ä¸å­˜åœ¨ï¼Œåœ¨ä»¥å‰ç‰ˆæœ¬ä¸­å­˜åœ¨)ï¼Œè€Œæ˜¯é€šè¿‡&lt;strong&gt;PF_NETLINK&lt;/strong&gt;å¥—æ¥å­—æ¥è·å–æ¥è‡ªå†…æ ¸ç©ºé—´çš„ uevent ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·ç©ºé—´ç›‘å¬uevent
åœ¨ procd/plug/hotplug.c ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª PF_NETLINK å¥—æ¥å­—æ¥ç›‘å¬å†…æ ¸ netlink_broadcast_fitered() å‘å‡ºçš„ uevent ã€‚æ”¶åˆ°uevent ä¹‹åï¼Œåœ¨æ ¹æ® /etc/hotplug.json é‡Œçš„æè¿°ï¼Œå®šä½åˆ°å¯¹åº”çš„æ‰§è¡Œå‡½æ•°æ¥å¤„ç†.é€šå¸¸æƒ…å†µä¸‹ï¼Œ /etc/hotplug.json ä¼šè°ƒç”¨ /sbin/hotplug-call æ¥å¤„ç† uevent ï¼Œå®ƒæ ¹æ® uevent çš„ $SUBSYSTEM å˜é‡æ¥åˆ†åˆ«è°ƒç”¨ /etc/hotplug.d ä¸‹ä¸åŒç›®å½•ä¸­çš„è„šæœ¬ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;/etc/preinit&lt;/strong&gt;è„šæœ¬å¤§è‡´å†…å®¹å¦‚ä¸‹ï¼Œå…ˆè°ƒç”¨å¦å¤–çš„shellè„šæœ¬ï¼Œè·å–å‡½æ•°å®šä¹‰&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;. /lib/functions.sh
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;. /lib/functions/preinit.sh
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;. /lib/functions/system.sh
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# åˆå§‹åŒ–hooké“¾
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;boot_hook_init preinit_essential
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;boot_hook_init preinit_main
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;boot_hook_init failsafe
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;boot_hook_init initramfs
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# ä¾æ¬¡æ‰§è¡Œ/lib/preinitç›®å½•ä¸­çš„è„šæœ¬ï¼Œå°†å‡½æ•°è°ƒç”¨æ·»åŠ åˆ°hooké“¾ä¸­
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;for pi_source_file in /lib/preinit/*; do
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    . $pi_source_file
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;done
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# æ‰§è¡Œpreinit_essentialæ³¨å†Œçš„hooké“¾çš„æ‰€æœ‰å‡½æ•°
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;boot_run_hook preinit_essential
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# æ‰§è¡Œpreinit_mainæ³¨å†Œçš„hooké“¾çš„æ‰€æœ‰å‡½æ•°
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;boot_run_hook preinit_main
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;/etc/preinit&lt;/strong&gt;è„šæœ¬æ‰§è¡Œå®Œæˆåï¼Œè°ƒç”¨&lt;strong&gt;spawn_procd&lt;/strong&gt;,spawn_procdä¼šè°ƒç”¨ &lt;strong&gt;execvp&lt;/strong&gt;()æ‰§è¡Œ &lt;strong&gt;/sbin/procd&lt;/strong&gt;è¿›ç¨‹&lt;/p&gt;
&lt;p&gt;&lt;em&gt;procd/initd/preinit.c&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;spawn_procd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;uloop_process&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wdt_fd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;watchdog_fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;/sbin/procd&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dbg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugd_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;kill&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plugd_proc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SIGKILL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;unsetenv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;PREINIT&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;unlink&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/tmp/.preinit&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;check_sysupgrade&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;DEBUG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Exec to real procd now&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wdt_fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;setenv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;WDTFD&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wdt_fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;check_dbglvl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;debug&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;snprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dbg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;%d&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;debug&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;setenv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;DBGLVL&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dbg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;execvp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;procd/procd.c&lt;/strong&gt;ä¸­&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;setsid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;uloop_init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;procd_signal&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;procd_udebug_set_enabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;getpid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;procd_connect_ubus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;procd_state_next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;uloop_run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;uloop_done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ­¤æ—¶getpid()ç­‰äº1ï¼Œæ‰€ä»¥è°ƒç”¨&lt;strong&gt;procd_state_next&lt;/strong&gt;ï¼Œè¿›å…¥åˆ°çŠ¶æ€æœºå¤„ç†ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;procd_state&lt;/strong&gt;ä¸æ–­è¿ç§»ï¼ŒåŒ…æ‹¬&lt;strong&gt;STATE_EARLY&lt;/strong&gt;ï¼Œ&lt;strong&gt;STATE_UBUS&lt;/strong&gt;ï¼Œ&lt;strong&gt;STATE_INIT&lt;/strong&gt;ç­‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;3.161338&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Console&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alive&lt;/span&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;3.173921&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Ping&lt;/span&gt;        
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;3.184207&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Ping&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;3.192558&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kmodloader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;loading&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;modules&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;modules&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;boot&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/*&lt;/span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;3.194447&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Ping&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;3.196209&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kmodloader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;done&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;loading&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;kernel&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;modules&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;modules&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;boot&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/*&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;3.204716&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Ping&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;3.206180&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;preinit&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;3.208671&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Launched&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;preinit&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1308&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;3.302967&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Exec&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;real&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;procd&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;now&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;3.308865&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;procd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;early&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;3.524654&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;procd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Finished&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;udevtrigger&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;4.024929&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;procd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Coldplug&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;complete&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;4.028061&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;procd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ubus&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;4.029198&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;procd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Create&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;service&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ubus&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;4.030829&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;procd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Create&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ubus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;4.032109&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;procd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Started&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ubus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1554&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;4.098895&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;procd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Connected&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ubus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;459&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ede6c&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;4.099092&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;procd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;4.102474&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;procd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Launched&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;askconsole&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;action&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1555&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;    &lt;span class=&#34;mf&#34;&gt;4.104142&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;procd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Launched&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;askfirst&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;action&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1556&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä»¥&lt;strong&gt;STATE_INIT&lt;/strong&gt;ä¸ºä¾‹ï¼Œæ‰§è¡Œ&lt;strong&gt;procd_inittab_run&lt;/strong&gt;(&amp;ldquo;xxx&amp;rdquo;)ä¼šè°ƒç”¨å¯¹åº”handlersçš„callbackï¼Œå¯¹åº”æ‰€æœ‰çš„init_actionæ˜¯åœ¨&lt;strong&gt;procd_inittab&lt;/strong&gt;()ä¸­æ·»åŠ çš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    case STATE_INIT:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        LOG(&amp;#34;- init -\n&amp;#34;);
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        procd_inittab();
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        procd_inittab_run(&amp;#34;respawn&amp;#34;);
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        procd_inittab_run(&amp;#34;askconsole&amp;#34;);
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        procd_inittab_run(&amp;#34;askfirst&amp;#34;);
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        procd_inittab_run(&amp;#34;sysinit&amp;#34;);
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;static struct init_handler handlers[] = {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        .name = &amp;#34;sysinit&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        .cb = runrc,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    }, {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        .name = &amp;#34;shutdown&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        .cb = runrc,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    }, {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        .name = &amp;#34;askfirst&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        .cb = askfirst,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        .multi = 1,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    }, {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        .name = &amp;#34;askconsole&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        .cb = askconsole,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        .multi = 1,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    }, {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        .name = &amp;#34;respawn&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        .cb = rcrespawn,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        .multi = 1,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;63
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;64
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;65
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;66
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;67
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;68
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;69
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;70
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;71
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;72
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;73
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;74
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;75
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;76
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;77
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;78
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;79
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tab&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;/etc/inittab&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ask&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;/sbin/askfirst&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;add_action&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init_action&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ARRAY_SIZE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handlers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;strcmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handlers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handler&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handlers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;nf&#34;&gt;list_add_tail&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;actions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Unknown init handler %s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;procd_inittab&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define LINE_LEN    128
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;n&#34;&gt;FILE&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;fopen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tab&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;r&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init_action&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;regex_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pat_inittab&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;regmatch_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;matches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Failed to open %s: %m&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tab&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;regcomp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pat_inittab&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;([a-zA-Z0-9]*):([a-zA-Z0-9]*):([a-zA-Z0-9]*):(.*)&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;REG_EXTENDED&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;malloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LINE_LEN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;calloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init_action&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;fgets&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LINE_LEN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TAG_PROCESS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;len&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;strlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;isspace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;--&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;line&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;#&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;continue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;regexec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pat_inittab&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;matches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;continue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nf&#34;&gt;DEBUG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;Parsing inittab - %s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TAG_ID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TAG_PROCESS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;matches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rm_eo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;matches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rm_so&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;tok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;strtok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TAG_PROCESS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MAX_ARGS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;tok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;strtok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TAG_ID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;line&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;add_action&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TAG_ACTION&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;continue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;malloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LINE_LEN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;calloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init_action&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;fclose&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;free&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;free&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;regfree&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pat_inittab&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;procd_inittab_run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init_action&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;list_for_each_entry&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;actions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;strcmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handler&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;handler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handler&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;multi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handler&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;cb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;k&#34;&gt;continue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handler&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;cb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;em&gt;/etc/inittab&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;::sysinit:/etc/init.d/rcS S boot
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;::shutdown:/etc/init.d/rcS K shutdown
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;::askconsole:/usr/libexec/login.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™é‡Œæ¥çœ‹&lt;strong&gt;runrc&lt;/strong&gt;çš„å®ç°ï¼Œä»£ç ä½äº&lt;strong&gt;inittab.c&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;runrc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;init_action&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nf&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;valid format is rcS &amp;lt;S|K&amp;gt; &amp;lt;param&amp;gt;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\n&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;cm&#34;&gt;/* proceed even if no init or shutdown scripts run */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;rcS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;argv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rcdone&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;		&lt;span class=&#34;nf&#34;&gt;rcdone&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;NULL&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;em&gt;rcS.c&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;int rcS(char *pattern, char *param, void (*q_empty)(struct runqueue *))
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    runqueue_init(&amp;amp;q);
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    q.empty_cb = q_empty;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    q.max_running_tasks = 1;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    return _rc(&amp;amp;q, &amp;#34;/etc/rc.d&amp;#34;, pattern, &amp;#34;*&amp;#34;, param);
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ‰§è¡Œ/etc/rc.dç›®å½•ä¸‹&lt;strong&gt;S&lt;/strong&gt;å¼€å¤´çš„è„šæœ¬&lt;/p&gt;
</description>
        </item>
        <item>
        <title>OverlayFS</title>
        <link>https://charles-7777.github.io/hugo-stack/p/overlayfs/</link>
        <pubDate>Tue, 29 Jul 2025 09:52:54 +0800</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/overlayfs/</guid>
        <description>&lt;h1 id=&#34;overlayfs-åŸç†åŠåº”ç”¨åœºæ™¯&#34;&gt;OverlayFS åŸç†åŠåº”ç”¨åœºæ™¯
&lt;/h1&gt;&lt;h2 id=&#34;1-overlayfs-æ¦‚è¿°&#34;&gt;1. OverlayFS æ¦‚è¿°
&lt;/h2&gt;&lt;p&gt;OverlayFS æ˜¯ Linux å†…æ ¸ä¸­çš„ä¸€ç§è”åˆæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒå…è®¸å°†å¤šä¸ªç›®å½•å±‚å åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå•ä¸€çš„ã€ç»Ÿä¸€çš„æ–‡ä»¶ç³»ç»Ÿè§†å›¾ã€‚å…¶ä¸»è¦ç‰¹ç‚¹æ˜¯è½»é‡çº§ã€é«˜æ€§èƒ½ï¼Œå¹¶ä¸”ä¸éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´æ¥åˆ›å»ºåˆå¹¶åçš„è§†å›¾ã€‚OverlayFS ä» Linux 3.18 ç‰ˆæœ¬å¼€å§‹è¢«æ­£å¼åˆå¹¶åˆ°ä¸»çº¿å†…æ ¸ä¸­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-overlayfs-å·¥ä½œåŸç†&#34;&gt;2. OverlayFS å·¥ä½œåŸç†
&lt;/h2&gt;&lt;h3 id=&#34;21-åŸºæœ¬ç»“æ„&#34;&gt;2.1 åŸºæœ¬ç»“æ„
&lt;/h3&gt;&lt;p&gt;OverlayFS ä½¿ç”¨äº†ä¸‰ä¸ªä¸»è¦çš„æ¦‚å¿µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Lower å±‚&lt;/strong&gt;ï¼šåªè¯»å±‚ï¼Œå¯ä»¥æœ‰å¤šä¸ªï¼ˆåœ¨è¾ƒæ–°çš„å†…æ ¸ç‰ˆæœ¬æ”¯æŒï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Upper å±‚&lt;/strong&gt;ï¼šå¯è¯»å†™å±‚ï¼Œåªèƒ½æœ‰ä¸€ä¸ª&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Merged å±‚&lt;/strong&gt;ï¼šåˆå¹¶è§†å›¾ï¼Œç”¨æˆ·çœ‹åˆ°å¹¶æ“ä½œçš„ç»Ÿä¸€è§†å›¾&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“æŒ‚è½½ OverlayFS æ—¶ï¼Œlower å’Œ upper å±‚è¢«åˆå¹¶æˆä¸€ä¸ªç»Ÿä¸€çš„æ–‡ä»¶ç³»ç»Ÿè§†å›¾ã€‚&lt;/p&gt;
&lt;h3 id=&#34;22-æ–‡ä»¶æ“ä½œåŸç†&#34;&gt;2.2 æ–‡ä»¶æ“ä½œåŸç†
&lt;/h3&gt;&lt;h4 id=&#34;è¯»å–æ“ä½œ&#34;&gt;è¯»å–æ“ä½œ
&lt;/h4&gt;&lt;p&gt;å½“è¯»å–æ–‡ä»¶æ—¶ï¼Œå¦‚æœæ–‡ä»¶åœ¨ upper å±‚å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¯»å– upper å±‚çš„æ–‡ä»¶ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä» lower å±‚è¯»å–ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å†™å…¥æ“ä½œ&#34;&gt;å†™å…¥æ“ä½œ
&lt;/h4&gt;&lt;p&gt;å½“ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼ŒOverlayFS é‡‡ç”¨å†™æ—¶å¤åˆ¶ï¼ˆCopy-On-Writeï¼ŒCOWï¼‰ç­–ç•¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¦‚æœæ–‡ä»¶å·²åœ¨ upper å±‚å­˜åœ¨ï¼Œåˆ™ç›´æ¥ä¿®æ”¹&lt;/li&gt;
&lt;li&gt;å¦‚æœæ–‡ä»¶ä»…åœ¨ lower å±‚å­˜åœ¨ï¼Œåˆ™å…ˆå°†å…¶å¤åˆ¶åˆ° upper å±‚ï¼Œå†è¿›è¡Œä¿®æ”¹&lt;/li&gt;
&lt;li&gt;å¯¹æ–‡ä»¶çš„åˆ é™¤æ“ä½œä¹Ÿæ˜¯åœ¨ upper å±‚åˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„åˆ é™¤æ ‡è®°ï¼ˆwhiteoutï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;23-ç›®å½•åˆå¹¶&#34;&gt;2.3 ç›®å½•åˆå¹¶
&lt;/h3&gt;&lt;p&gt;ç›®å½•çš„å¤„ç†ç•¥æœ‰ä¸åŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ—å‡ºç›®å½•å†…å®¹æ—¶ï¼Œä¼šåˆå¹¶æ˜¾ç¤º lower å’Œ upper å±‚ä¸­çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•&lt;/li&gt;
&lt;li&gt;å¦‚æœåŒåæ–‡ä»¶/ç›®å½•åŒæ—¶å­˜åœ¨äºä¸¤å±‚ï¼Œåˆ™ upper å±‚çš„ç‰ˆæœ¬ä¼šè¦†ç›– lower å±‚çš„ç‰ˆæœ¬&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;3-overlayfs-çš„å…³é”®ç‰¹æ€§&#34;&gt;3. OverlayFS çš„å…³é”®ç‰¹æ€§
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è½»é‡çº§&lt;/strong&gt;ï¼šä¸éœ€è¦é¢å¤–çš„ç£ç›˜ç©ºé—´æ¥å­˜å‚¨åˆå¹¶è§†å›¾&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é«˜æ€§èƒ½&lt;/strong&gt;ï¼šç›¸æ¯”å…¶ä»–è”åˆæŒ‚è½½æ–‡ä»¶ç³»ç»Ÿï¼Œæœ‰æ›´å¥½çš„æ€§èƒ½è¡¨ç°&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€æ˜æ€§&lt;/strong&gt;ï¼šå¯¹åº”ç”¨ç¨‹åºå®Œå…¨é€æ˜ï¼Œåº”ç”¨æ— éœ€æ„ŸçŸ¥åº•å±‚æ–‡ä»¶ç³»ç»Ÿçš„å¤æ‚æ€§&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;ï¼šå¯ä»¥æ ¹æ®éœ€è¦ç»„åˆä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;4-åº”ç”¨åœºæ™¯&#34;&gt;4. åº”ç”¨åœºæ™¯
&lt;/h2&gt;&lt;h3 id=&#34;41-å®¹å™¨æŠ€æœ¯&#34;&gt;4.1 å®¹å™¨æŠ€æœ¯
&lt;/h3&gt;&lt;p&gt;OverlayFS æ˜¯ Dockerã€Podman ç­‰å®¹å™¨æŠ€æœ¯çš„ä¸»è¦å­˜å‚¨é©±åŠ¨ä¹‹ä¸€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŸºç¡€é•œåƒä½œä¸ºåªè¯»çš„ lower å±‚&lt;/li&gt;
&lt;li&gt;å®¹å™¨è¿è¡Œæ—¶çš„å¯å†™å±‚ä½œä¸º upper å±‚&lt;/li&gt;
&lt;li&gt;å¤šä¸ªå®¹å™¨å¯ä»¥å…±äº«ç›¸åŒçš„åŸºç¡€å±‚ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´å’Œæé«˜å¯åŠ¨é€Ÿåº¦&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;42-å®æ—¶ç³»ç»Ÿ&#34;&gt;4.2 å®æ—¶ç³»ç»Ÿ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å¯ä»¥å°†åªè¯»çš„ç³»ç»Ÿæ–‡ä»¶ä½œä¸º lower å±‚ï¼Œä¸´æ—¶çš„è¿è¡Œæ—¶æ•°æ®ä½œä¸º upper å±‚&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿé‡å¯åï¼Œä¸Šå±‚çš„æ›´æ”¹ä¼šä¸¢å¤±ï¼Œç³»ç»Ÿæ¢å¤åˆ°åˆå§‹çŠ¶æ€&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;43-åµŒå…¥å¼ç³»ç»Ÿ&#34;&gt;4.3 åµŒå…¥å¼ç³»ç»Ÿ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;åœ¨èµ„æºå—é™çš„åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œå¯ä»¥å°†åªè¯»çš„å›ºä»¶ä½œä¸º lower å±‚&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·æ•°æ®å’Œé…ç½®ä½œä¸º upper å±‚å­˜å‚¨åœ¨å¯å†™ä»‹è´¨ä¸Š&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;44-ç³»ç»Ÿå‡çº§&#34;&gt;4.4 ç³»ç»Ÿå‡çº§
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å°†å½“å‰ç³»ç»Ÿä½œä¸º lower å±‚ï¼Œå‡çº§å†…å®¹ä½œä¸º upper å±‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå‡çº§å‡ºç°é—®é¢˜ï¼Œå¯ä»¥è½»æ¾å›æ»šåˆ°åŸå§‹çŠ¶æ€&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>LXCè¯¦è§£</title>
        <link>https://charles-7777.github.io/hugo-stack/p/lxc%E8%AF%A6%E8%A7%A3/</link>
        <pubDate>Mon, 28 Jul 2025 20:00:08 +0800</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/lxc%E8%AF%A6%E8%A7%A3/</guid>
        <description>&lt;h1 id=&#34;lxc-linux-å®¹å™¨-å·¥ä½œåŸç†è¯¦è§£&#34;&gt;LXC (Linux å®¹å™¨) å·¥ä½œåŸç†è¯¦è§£
&lt;/h1&gt;&lt;p&gt;LXC (Linux Containers) æ˜¯ä¸€ç§æ“ä½œç³»ç»Ÿçº§åˆ«çš„è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå®ƒå…è®¸åœ¨å•ä¸ª Linux å†…æ ¸ä¸Šè¿è¡Œå¤šä¸ªéš”ç¦»çš„ Linux ç³»ç»Ÿï¼ˆå®¹å™¨ï¼‰ã€‚ä¸è™šæ‹Ÿæœºï¼ˆVMï¼‰ä¸åŒï¼ŒLXC ä¸éœ€è¦æ¨¡æ‹Ÿç¡¬ä»¶ï¼Œå› æ­¤å®ƒéå¸¸è½»é‡çº§ä¸”å¯åŠ¨é€Ÿåº¦å¿«ã€‚&lt;/p&gt;
&lt;p&gt;LXC çš„æ ¸å¿ƒæ˜¯åˆ©ç”¨ Linux å†…æ ¸çš„ä¸¤ä¸ªå…³é”®ç‰¹æ€§ï¼š&lt;strong&gt;å‘½åç©ºé—´ (Namespaces)&lt;/strong&gt; å’Œ &lt;strong&gt;æ§åˆ¶ç»„ (Cgroups)&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Namespaces&lt;/strong&gt;ï¼šè´Ÿè´£éš”ç¦»ï¼Œç¡®ä¿ä¸€ä¸ªå®¹å™¨ä¸­çš„è¿›ç¨‹çœ‹ä¸åˆ°æˆ–å½±å“åˆ°å¦ä¸€ä¸ªå®¹å™¨æˆ–å®¿ä¸»æœºçš„è¿›ç¨‹ã€ç½‘ç»œã€æ–‡ä»¶ç³»ç»Ÿç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cgroups&lt;/strong&gt;ï¼šè´Ÿè´£èµ„æºé™åˆ¶å’Œå®¡è®¡ï¼Œç¡®ä¿æ¯ä¸ªå®¹å™¨åªèƒ½ä½¿ç”¨åˆ†é…ç»™å®ƒçš„ CPUã€å†…å­˜ã€I/O ç­‰èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ¬æ–‡å°†é‡ç‚¹è¯¦ç»†ä»‹ç»å‡ ä¸ªå…³é”®çš„å‘½åç©ºé—´ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;1-pid-å‘½åç©ºé—´-pid-namespace&#34;&gt;1. PID å‘½åç©ºé—´ (PID Namespace)
&lt;/h2&gt;&lt;p&gt;PID (Process ID) å‘½åç©ºé—´ç”¨äºéš”ç¦»è¿›ç¨‹ IDã€‚&lt;/p&gt;
&lt;h3 id=&#34;åŸç†&#34;&gt;åŸç†
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éš”ç¦»è¿›ç¨‹æ ‘&lt;/strong&gt;ï¼šæ¯ä¸ª PID å‘½åç©ºé—´éƒ½æœ‰ä¸€å¥—ç‹¬ç«‹çš„è¿›ç¨‹ IDï¼Œä» 1 å¼€å§‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¹å™¨çš„ &lt;code&gt;init&lt;/code&gt; è¿›ç¨‹&lt;/strong&gt;ï¼šåœ¨ä¸€ä¸ªæ–°çš„ PID å‘½åç©ºé—´ä¸­åˆ›å»ºçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ä¼šæˆä¸ºè¯¥ç©ºé—´çš„ &amp;ldquo;init&amp;rdquo; è¿›ç¨‹ï¼Œå…¶ PID ä¸º 1ã€‚è¿™ä¸ªè¿›ç¨‹è´Ÿè´£ç®¡ç†å®¹å™¨å†…çš„æ‰€æœ‰å…¶ä»–è¿›ç¨‹ï¼ˆä¾‹å¦‚ï¼Œå¤„ç†å­¤å„¿è¿›ç¨‹ï¼‰ã€‚å¦‚æœè¿™ä¸ª PID ä¸º 1 çš„è¿›ç¨‹ç»ˆæ­¢ï¼Œå†…æ ¸å°†ç»ˆæ­¢è¯¥å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰å…¶ä»–è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å¤– PID æ˜ å°„&lt;/strong&gt;ï¼šå®¹å™¨å†…çš„è¿›ç¨‹åœ¨å®¹å™¨å†…éƒ¨æœ‰è‡ªå·±çš„ PIDï¼ˆä¾‹å¦‚ï¼ŒPID 1, 2, 3&amp;hellip;ï¼‰ï¼ŒåŒæ—¶åœ¨å®¿ä¸»æœºä¸Šä¹Ÿæœ‰ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ PIDã€‚è¿™æ„å‘³ç€ä»å®¿ä¸»æœºçœ‹ï¼Œæ‰€æœ‰å®¹å™¨çš„è¿›ç¨‹éƒ½æ˜¯æ™®é€šçš„è¿›ç¨‹ï¼Œåªæ˜¯è¢« PID å‘½åç©ºé—´éš”ç¦»å¼€æ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç¤ºä¾‹&#34;&gt;ç¤ºä¾‹
&lt;/h3&gt;&lt;p&gt;å‡è®¾æˆ‘ä»¬åœ¨å®¿ä¸»æœºä¸Šå¯åŠ¨ä¸€ä¸ª LXC å®¹å™¨ï¼Œå¹¶åœ¨å®¹å™¨å†…è¿è¡Œ &lt;code&gt;bash&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®¹å™¨å†…è§†è§’&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åœ¨å®¹å™¨å†…æ‰§è¡Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ps aux
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;root           &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;  0.1  0.0   &lt;span class=&#34;m&#34;&gt;2384&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;1596&lt;/span&gt; ?        Ss   10:00   0:00 /sbin/init
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;root          &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;  0.0  0.0   &lt;span class=&#34;m&#34;&gt;4372&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;3480&lt;/span&gt; pts/0    Ss   10:01   0:00 bash
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;root          &lt;span class=&#34;m&#34;&gt;25&lt;/span&gt;  0.0  0.0   &lt;span class=&#34;m&#34;&gt;5924&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;1788&lt;/span&gt; pts/0    R+   10:02   0:00 ps aux
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨è¿™é‡Œï¼Œ&lt;code&gt;init&lt;/code&gt; è¿›ç¨‹çš„ PID æ˜¯ 1ï¼Œ&lt;code&gt;bash&lt;/code&gt; çš„ PID æ˜¯ 15ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å®¿ä¸»æœºè§†è§’&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åœ¨å®¿ä¸»æœºæ‰§è¡Œ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ps aux &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep bash
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è¾“å‡ºå¯èƒ½åƒè¿™æ ·&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;root       &lt;span class=&#34;m&#34;&gt;12345&lt;/span&gt;  0.0  0.0   &lt;span class=&#34;m&#34;&gt;4372&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;3480&lt;/span&gt; pts/0    Ss   10:01   0:00 bash
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åœ¨å®¿ä¸»æœºä¸Šï¼ŒåŒä¸€ä¸ª &lt;code&gt;bash&lt;/code&gt; è¿›ç¨‹çš„ PID å¯èƒ½æ˜¯ 12345ã€‚è¿™ç§éš”ç¦»ä½¿å¾—å®¹å™¨å†…çš„è¿›ç¨‹ç®¡ç†ä¸å®¿ä¸»æœºå®Œå…¨åˆ†ç¦»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;2-ç½‘ç»œå‘½åç©ºé—´-network-namespace&#34;&gt;2. ç½‘ç»œå‘½åç©ºé—´ (Network Namespace)
&lt;/h2&gt;&lt;p&gt;ç½‘ç»œå‘½åç©ºé—´ä¸ºæ¯ä¸ªå®¹å™¨æä¾›äº†ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„ç½‘ç»œåè®®æ ˆã€‚&lt;/p&gt;
&lt;h3 id=&#34;åŸç†-1&#34;&gt;åŸç†
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç‹¬ç«‹ç½‘ç»œæ ˆ&lt;/strong&gt;ï¼šæ¯ä¸ªç½‘ç»œå‘½åç©ºé—´éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ç½‘ç»œè®¾å¤‡ï¼ˆå¦‚ &lt;code&gt;lo&lt;/code&gt;, &lt;code&gt;eth0&lt;/code&gt;ï¼‰ã€IP åœ°å€ã€è·¯ç”±è¡¨ã€iptables é˜²ç«å¢™è§„åˆ™ã€ç«¯å£å·ç­‰ã€‚ä¸€ä¸ªå®¹å™¨é»˜è®¤æ— æ³•è®¿é—®å¦ä¸€ä¸ªå®¹å™¨æˆ–å®¿ä¸»æœºçš„ç½‘ç»œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;veth&lt;/code&gt; è®¾å¤‡å¯¹&lt;/strong&gt;ï¼šä¸ºäº†è®©å®¹å™¨èƒ½ä¸å¤–éƒ¨é€šä¿¡ï¼ŒLXC é€šå¸¸ä½¿ç”¨ &lt;code&gt;veth&lt;/code&gt; (Virtual Ethernet) è®¾å¤‡å¯¹ã€‚&lt;code&gt;veth&lt;/code&gt; è®¾å¤‡æ€»æ˜¯æˆå¯¹å‡ºç°ï¼Œåƒä¸€æ ¹è™šæ‹Ÿç½‘çº¿ã€‚æ•°æ®ä»ä¸€ç«¯è¿›å…¥ï¼Œä¼šä»å¦ä¸€ç«¯å‡ºæ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿æ¥è¿‡ç¨‹&lt;/strong&gt;:
&lt;ol&gt;
&lt;li&gt;åˆ›å»ºä¸€å¯¹ &lt;code&gt;veth&lt;/code&gt; è®¾å¤‡ï¼Œä¾‹å¦‚ &lt;code&gt;veth_host&lt;/code&gt; å’Œ &lt;code&gt;veth_container&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å°† &lt;code&gt;veth_host&lt;/code&gt; ç•™åœ¨å®¿ä¸»æœºçš„ç½‘ç»œå‘½åç©ºé—´ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;å°† &lt;code&gt;veth_container&lt;/code&gt; &amp;ldquo;ç§»åŠ¨&amp;rdquo; åˆ°å®¹å™¨çš„ç½‘ç»œå‘½åç©ºé—´ä¸­ï¼Œå¹¶å°†å…¶é‡å‘½åä¸º &lt;code&gt;eth0&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å®¿ä¸»æœºä¸Šï¼Œé€šå¸¸ä¼šåˆ›å»ºä¸€ä¸ªç½‘æ¡¥ï¼ˆä¾‹å¦‚ &lt;code&gt;lxcbr0&lt;/code&gt;ï¼‰ï¼Œå¹¶å°† &lt;code&gt;veth_host&lt;/code&gt; ç«¯è¿æ¥åˆ°è¿™ä¸ªç½‘æ¡¥ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºå®¹å™¨å†…çš„ &lt;code&gt;eth0&lt;/code&gt; åˆ†é… IP åœ°å€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®æµ&lt;/strong&gt;: å®¹å™¨å†… &lt;code&gt;eth0&lt;/code&gt; å‘å‡ºçš„ç½‘ç»œåŒ… -&amp;gt; é€šè¿‡ &lt;code&gt;veth&lt;/code&gt; å¯¹åˆ°è¾¾å®¿ä¸»æœºçš„ &lt;code&gt;veth_host&lt;/code&gt; -&amp;gt; è¿›å…¥å®¿ä¸»æœºçš„ç½‘æ¡¥ &lt;code&gt;lxcbr0&lt;/code&gt; -&amp;gt; é€šè¿‡å®¿ä¸»æœºçš„ç‰©ç†ç½‘å¡å’Œè·¯ç”±è§„åˆ™ä¸å¤–éƒ¨ç½‘ç»œé€šä¿¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§ç»“æ„ä½¿å¾—æ¯ä¸ªå®¹å™¨éƒ½åƒä¸€å°ç‹¬ç«‹çš„æœºå™¨è¿æ¥åˆ°äº†ä¸€ä¸ªè™šæ‹Ÿäº¤æ¢æœºï¼ˆç½‘æ¡¥ï¼‰ä¸Šï¼Œå®ç°äº†ç½‘ç»œéš”ç¦»å’Œäº’è”ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;3-æ–‡ä»¶ç³»ç»Ÿå‘½åç©ºé—´-mount-namespace&#34;&gt;3. æ–‡ä»¶ç³»ç»Ÿå‘½åç©ºé—´ (Mount Namespace)
&lt;/h2&gt;&lt;p&gt;æ–‡ä»¶ç³»ç»Ÿï¼ˆæŒ‚è½½ï¼‰å‘½åç©ºé—´å…è®¸æ¯ä¸ªå®¹å™¨æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿè§†å›¾ï¼Œå°¤å…¶æ˜¯ç‹¬ç«‹çš„æ ¹ç›®å½• (&lt;code&gt;/&lt;/code&gt;)ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åŸç†-2&#34;&gt;åŸç†
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éš”ç¦»æŒ‚è½½ç‚¹&lt;/strong&gt;ï¼šæ¯ä¸ªæŒ‚è½½å‘½åç©ºé—´ç»´æŠ¤ç€ä¸€ä¸ªç‹¬ç«‹çš„æŒ‚è½½ç‚¹åˆ—è¡¨ã€‚åœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸­çš„ &lt;code&gt;mount()&lt;/code&gt; å’Œ &lt;code&gt;umount()&lt;/code&gt; æ“ä½œä¸ä¼šå½±å“åˆ°å…¶ä»–å‘½åç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‹¬ç«‹çš„æ ¹æ–‡ä»¶ç³»ç»Ÿ (&lt;code&gt;rootfs&lt;/code&gt;)&lt;/strong&gt;ï¼šLXC åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ä¸ºæ¯ä¸ªå®¹å™¨åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚å®¹å™¨è¿›ç¨‹çœ‹åˆ°çš„æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„ä¸å®¿ä¸»æœºå®Œå…¨ä¸åŒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®ç°æ–¹å¼&lt;/strong&gt;:
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å‡†å¤‡ &lt;code&gt;rootfs&lt;/code&gt;&lt;/strong&gt;ï¼šé¦–å…ˆï¼Œéœ€è¦ä¸ºå®¹å™¨å‡†å¤‡ä¸€ä¸ªç›®å½•ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªå®Œæ•´çš„ Linux ç³»ç»Ÿæ‰€éœ€çš„æ–‡ä»¶å’Œç›®å½•ï¼ˆå¦‚ &lt;code&gt;/bin&lt;/code&gt;, &lt;code&gt;/etc&lt;/code&gt;, &lt;code&gt;/lib&lt;/code&gt;, &lt;code&gt;/usr&lt;/code&gt; ç­‰ï¼‰ã€‚è¿™é€šå¸¸é€šè¿‡å¤åˆ¶ä¸€ä¸ªæœ€å°åŒ–çš„ç³»ç»Ÿæ¨¡æ¿æ¥å®Œæˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;pivot_root&lt;/code&gt; ç³»ç»Ÿè°ƒç”¨&lt;/strong&gt;ï¼šä¸ºäº†å°†å®¹å™¨çš„æ ¹ç›®å½•åˆ‡æ¢åˆ°å‡†å¤‡å¥½çš„ &lt;code&gt;rootfs&lt;/code&gt;ï¼ŒLXC ä½¿ç”¨ &lt;code&gt;pivot_root&lt;/code&gt; ç³»ç»Ÿè°ƒç”¨ï¼ˆæˆ–è€…åœ¨æŸäº›æƒ…å†µä¸‹ä½¿ç”¨ &lt;code&gt;chroot&lt;/code&gt;ï¼Œä½† &lt;code&gt;pivot_root&lt;/code&gt; æ›´å¼ºå¤§ã€æ›´å®‰å…¨ï¼‰ã€‚&lt;code&gt;pivot_root&lt;/code&gt; ä¼šå°†å½“å‰è¿›ç¨‹çš„æ ¹æ–‡ä»¶ç³»ç»Ÿåˆ‡æ¢åˆ°ä¸€ä¸ªæ–°çš„æŒ‚è½½ç‚¹ï¼ŒåŒæ—¶å°†æ—§çš„æ ¹æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ°æ–°æ ¹ä¸‹çš„ä¸€ä¸ªæŒ‡å®šç›®å½•ä¸­ï¼Œä¹‹åå¯ä»¥å°†å…¶å¸è½½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éš”ç¦»æŒ‚è½½&lt;/strong&gt;ï¼šåœ¨å®¹å™¨å¯åŠ¨åï¼Œå®ƒå¯ä»¥åœ¨è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿå‘½åç©ºé—´å†…è‡ªç”±åœ°æŒ‚è½½å…¶ä»–è®¾å¤‡æˆ–æ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚ &lt;code&gt;proc&lt;/code&gt;, &lt;code&gt;sysfs&lt;/code&gt;, &lt;code&gt;tmpfs&lt;/code&gt;ï¼‰ï¼Œè€Œè¿™äº›æŒ‚è½½å¯¹å®¿ä¸»æœºæ˜¯ä¸å¯è§çš„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå®¹å™¨å†…çš„è¿›ç¨‹è¢«&amp;quot;å›šç¦&amp;quot;åœ¨å…¶è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿè§†å›¾ä¸­ï¼Œæ— æ³•è®¿é—®æˆ–ä¿®æ”¹å®¿ä¸»æœºçš„æ–‡ä»¶ç³»ç»Ÿï¼ˆé™¤éç‰¹åˆ«é…ç½®äº†ç»‘å®šæŒ‚è½½ &lt;code&gt;bind mount&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;å…¶ä»–å‘½åç©ºé—´&#34;&gt;å…¶ä»–å‘½åç©ºé—´
&lt;/h2&gt;&lt;p&gt;é™¤äº†ä»¥ä¸Šä¸‰ä¸ªï¼ŒLXC è¿˜ä½¿ç”¨äº†å…¶ä»–å‘½åç©ºé—´æ¥å®ç°å…¨æ–¹ä½éš”ç¦»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;UTS Namespace&lt;/strong&gt;: éš”ç¦»ä¸»æœºåå’ŒåŸŸåã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IPC Namespace&lt;/strong&gt;: éš”ç¦»è¿›ç¨‹é—´é€šä¿¡èµ„æºï¼Œå¦‚ System V IPC å’Œ POSIX æ¶ˆæ¯é˜Ÿåˆ—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;User Namespace&lt;/strong&gt;: éš”ç¦»ç”¨æˆ·å’Œç»„ IDã€‚å…è®¸å®¹å™¨å†…çš„ &lt;code&gt;root&lt;/code&gt; ç”¨æˆ·ï¼ˆUID 0ï¼‰æ˜ å°„ä¸ºå®¿ä¸»æœºä¸Šçš„ä¸€ä¸ªéç‰¹æƒç”¨æˆ·ï¼Œæå¤§åœ°æå‡äº†å®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cgroup Namespace&lt;/strong&gt;: éš”ç¦»æ§åˆ¶ç»„è§†å›¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“
&lt;/h2&gt;&lt;p&gt;LXC é€šè¿‡ç²¾å·§åœ°ç»„åˆä½¿ç”¨ Linux å†…æ ¸çš„ &lt;strong&gt;Namespaces&lt;/strong&gt; å’Œ &lt;strong&gt;Cgroups&lt;/strong&gt; ç‰¹æ€§ï¼Œä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªè½»é‡çº§ã€é«˜æ•ˆä¸”éš”ç¦»æ€§è‰¯å¥½çš„å®¹å™¨ç¯å¢ƒã€‚PIDã€ç½‘ç»œå’Œæ–‡ä»¶ç³»ç»Ÿå‘½åç©ºé—´æ˜¯å®ç°è¿™ç§éš”ç¦»çš„åŸºç¡€ï¼Œå®ƒä»¬åˆ†åˆ«åˆ›å»ºäº†ç‹¬ç«‹çš„è¿›ç¨‹æ ‘ã€ç½‘ç»œåè®®æ ˆå’Œæ–‡ä»¶ç³»ç»Ÿè§†å›¾ï¼Œä½¿å¾—å®¹å™¨å†…çš„ç¯å¢ƒçœ‹èµ·æ¥å°±åƒä¸€ä¸ªç‹¬ç«‹çš„æ“ä½œç³»ç»Ÿã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>è¯ä¹¦è¯¦è§£</title>
        <link>https://charles-7777.github.io/hugo-stack/p/%E8%AF%81%E4%B9%A6%E8%AF%A6%E8%A7%A3/</link>
        <pubDate>Mon, 28 Jul 2025 16:36:08 +0800</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/%E8%AF%81%E4%B9%A6%E8%AF%A6%E8%A7%A3/</guid>
        <description>&lt;h2 id=&#34;å¯¹ç§°åŠ å¯†&#34;&gt;å¯¹ç§°åŠ å¯†
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;åŠ å¯†å‰çš„åŸå§‹æ•°æ®ï¼Œå«åšÂ &lt;strong&gt;åŸæ–‡&lt;/strong&gt;ï¼ˆÂ &lt;em&gt;original text&lt;/em&gt;Â ï¼‰ï¼Œæˆ–è€…Â &lt;strong&gt;æ˜æ–‡&lt;/strong&gt;ï¼ˆÂ &lt;em&gt;plain text&lt;/em&gt;Â ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;åŠ å¯†åçš„ä¸è§„åˆ™ï¼ˆÂ &lt;em&gt;scrambled&lt;/em&gt;Â ï¼‰æ•°æ®ï¼Œé€šå¸¸å«åšÂ &lt;strong&gt;å¯†æ–‡&lt;/strong&gt;ï¼ˆÂ &lt;em&gt;cipher text&lt;/em&gt;Â ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;åŠ å¯†æ‰€ç”¨çš„å¯†ç ï¼Œé€šå¸¸å«åšÂ &lt;strong&gt;å¯†é’¥&lt;/strong&gt;ï¼ˆÂ &lt;em&gt;secret key&lt;/em&gt;Â ï¼‰ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;å¯¹ç§°åŠ å¯†ï¼ˆsymmetric encryptionï¼‰ç®—æ³•æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ï¼Œå®ƒåªæœ‰ä¸€æŠŠå¯†é’¥ï¼ŒåŠ å¯†å’Œè§£å¯†è¿‡ç¨‹ç”¨çš„éƒ½æ˜¯åŒä¸€æŠŠå¯†é’¥ï¼Œè¿™ä¹Ÿç¬¦åˆå¤§ä¼—å¯¹åŠ å¯†ç®—æ³•çš„è®¤çŸ¥ï¼Œç”¨å¯†ç å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ä¹‹åï¼Œå¿…é¡»ç”¨åŒä¸€ä¸ªå¯†ç æ‰èƒ½å°†æ•°æ®è§£å¯†å‡ºæ¥&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;AES&lt;/em&gt;Â ï¼Œé«˜çº§åŠ å¯†æ ‡å‡†ï¼Œæ–°ä¸€ä»£åŠ å¯†ç®—æ³•æ ‡å‡†ï¼Œé€Ÿåº¦å¿«ï¼Œå®‰å…¨çº§åˆ«é«˜ï¼›&lt;/li&gt;
&lt;li&gt;&lt;em&gt;DES&lt;/em&gt;Â ï¼Œæ•°æ®åŠ å¯†æ ‡å‡†ï¼Œé€Ÿåº¦è¾ƒå¿«ï¼Œé€‚ç”¨äºåŠ å¯†å¤§é‡æ•°æ®ï¼Œä½†å®‰å…¨æ€§è¾ƒå¼±ï¼›&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Blowfish&lt;/em&gt;Â ï¼Œä½¿ç”¨å˜é•¿å¯†é’¥ï¼Œè¿è¡Œé€Ÿåº¦å¾ˆå¿«ï¼Œéä¸“åˆ©ç®—æ³•ï¼Œæ²¡æœ‰ä½¿ç”¨é™åˆ¶ï¼›&lt;/li&gt;
&lt;li&gt;&lt;em&gt;etc&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;éå¯¹ç§°åŠ å¯†&#34;&gt;éå¯¹ç§°åŠ å¯†
&lt;/h2&gt;&lt;p&gt;ä»å‰æœ‰ä¸€ä¸ªé»‘å¸®ï¼Œè€å¤§å’Œæ‰‹ä¸‹ä»¬ä¹‹é—´çš„é€šä¿¡å¿…é¡»åŠ å¯†ç¡®ä¿å®‰å…¨ã€‚äºæ­¤åŒæ—¶ï¼Œè€å¤§å¸Œæœ›æ‰‹ä¸‹å‘ç»™ä»–çš„ä¿¡æ¯ï¼Œä¸èƒ½è¢«å…¶ä»–æ‰‹ä¸‹çŸ¥æ™“ã€‚è‹¥é‡‡ç”¨å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œåªèƒ½ç»™æ¯ä¸ªæ‰‹ä¸‹éƒ½åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„å¯†é’¥ï¼Œä½†è€å¤§è§‰å¾—å¤ªéº»çƒ¦äº†ã€‚è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;é»‘å¸®è€å¤§å¸Œæœ›ä»–åªç»´æŠ¤ä¸€ä»½å¯†é’¥ï¼Œå°±èƒ½è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæœ‰åŠæ³•åšåˆ°å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¯ä»¥ç”¨éå¯¹ç§°åŠ å¯†ï¼ˆ&lt;em&gt;asymmetric encryption&lt;/em&gt;ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;code&gt;éå¯¹ç§°åŠ å¯†ï¼Œé¡¾æ˜æ€è®®ï¼Œåœ¨åŠ å¯†å’Œè§£å¯†ç¯èŠ‚ç”¨çš„å¯†é’¥æ˜¯ä¸åŒçš„ã€‚&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;éå¯¹ç§°åŠ å¯†ç®—æ³•éœ€è¦ä¸¤æŠŠä¸åŒçš„å¯†é’¥ï¼Œè¿™ä¸¤æŠŠå¯†é’¥ç»„æˆä¸€å¯¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å…¬é’¥&lt;/strong&gt;ï¼ˆÂ &lt;em&gt;public key&lt;/em&gt;Â ï¼‰ï¼Œå…¬é’¥ç”¨æ¥å¯¹æ•°æ®è¿›è¡ŒÂ &lt;strong&gt;åŠ å¯†&lt;/strong&gt;Â ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç§é’¥&lt;/strong&gt;ï¼ˆÂ &lt;em&gt;private key&lt;/em&gt;Â ï¼‰ï¼Œä¹Ÿç§°ä¸ºÂ &lt;strong&gt;å¯†é’¥&lt;/strong&gt;ï¼ˆÂ &lt;em&gt;secret key&lt;/em&gt;Â ï¼‰ï¼Œç”¨æ¥å¯¹æ•°æ®è¿›è¡ŒÂ &lt;strong&gt;è§£å¯†&lt;/strong&gt;Â ï¼›&lt;/li&gt;
&lt;li&gt;å…¬é’¥å’Œç§é’¥æ€»æ˜¯æˆå¯¹å‡ºç°ï¼Œç”¨å…¬é’¥åŠ å¯†åå¾—åˆ°çš„å¯†æ–‡ï¼Œå¿…é¡»ç”¨å¯¹åº”çš„ç§é’¥æ‰èƒ½è§£å¯†ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™å¥—åŠ å¯†æœºåˆ¶å®Œç¾è§£å†³äº†é»‘å¸®è€å¤§çš„éš¾é¢˜ï¼Œä»–åªéœ€è¦ç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼šå…¬é’¥åˆ†å‘ç»™æ‰‹ä¸‹ä»¬ï¼Œä»–ä»¬å…ˆç”¨å…¬é’¥åŠ å¯†ä¿¡æ¯ï¼Œå†å‘è€å¤§ï¼›è€å¤§æ¥åˆ°å¯†æ–‡ï¼Œå°±ç”¨è‡ªå·±ä¿ç®¡çš„ç§é’¥æ¥è§£å¯†ï¼›æ‰‹ä¸‹ä»¬å°±ç®—æ‹¿åˆ°åˆ«äººå‘çš„å¯†æ–‡ä¹Ÿè§£ä¸å¼€ï¼Œå› ä¸ºç§é’¥åªæœ‰ä»–ä»¬è€å¤§æ‰æœ‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ•°å­¦åŸç†&#34;&gt;æ•°å­¦åŸç†
&lt;/h3&gt;&lt;p&gt;å…¬é’¥å’Œç§é’¥çš„åŠ å¯†æœºåˆ¶çœ‹èµ·æ¥éå¸¸ä¸å¯æ€è®®ï¼Œè¿™ä¸€åˆ‡å…¶å®æ¥ä¸€ä¸ªç¥å¥‡çš„æ•°å­¦åŸç†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ¥åšä¸€ä¸ªæ•°å­—æ¸¸æˆï¼Œæ‚¨éšä¾¿å†™ä¸‹ä¸€ä¸ªæ•´æ•°Â &lt;em&gt;m&lt;/em&gt;Â ï¼ˆ1&amp;lt;m&amp;lt;7387Â Â ï¼‰ï¼Œç„¶åè®¡ç®—m ^3  mod  7387Â Â å¹¶æŠŠç»“æœå‘Šè¯‰æˆ‘ï¼Œæˆ‘å°±çŸ¥é“æ‚¨å†™ä¸‹çš„æ•´æ•°Â &lt;em&gt;m&lt;/em&gt;Â æ˜¯ä»€ä¹ˆ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 520&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;520&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;7387&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mi&#34;&gt;3842&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3842&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4811&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;7387&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mi&#34;&gt;520&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 1314&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1314&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;7387&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mi&#34;&gt;7382&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;7382&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;**&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4811&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;7387&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mi&#34;&gt;1314&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å…¬é’¥å‚æ•° 3 å’Œ 7387 ï¼Œç§é’¥å‚æ•° 4811 å’Œ 7387 åˆæ˜¯æ€ä¹ˆç”Ÿæˆçš„å‘¢ï¼Ÿ
ç¬¬ä¸€æ­¥ï¼Œéšæœºé€‰æ‹©ä¸¤ä¸ªè´¨æ•° p å’Œ q ï¼š
&lt;code&gt;p = 83   q = 89&lt;/code&gt;
ç¬¬äºŒæ­¥ï¼Œè®¡ç®— p å’Œ q çš„ä¹˜ç§¯ n ï¼š
&lt;code&gt;n = p * q = 7387&lt;/code&gt;
ç¬¬ä¸‰æ­¥ï¼Œè®¡ç®— n çš„æ¬§æ‹‰å‡½æ•° ï¼Œè®°ä¸º phi ï¼š
&lt;code&gt;Ï†(n) = (p-1) * (q-1) = 7216&lt;/code&gt;
ç¬¬å››æ­¥ï¼Œéšæœºé€‰æ‹©ä¸€ä¸ªæ•´æ•° e ï¼Œæ»¡è¶³1&amp;lt;e&amp;lt;Ï†(n)ï¼Œä¸” e å’ŒÏ†(n)äº’è´¨ï¼š
&lt;code&gt;é€‰ä¸€ä¸ªè´¨æ•° e ï¼Œä½¿å¾—ä¸èƒ½è¢« e æ•´é™¤å³å¯ã€‚&lt;/code&gt;
ç¬¬äº”æ­¥ï¼Œè®¡ç®— e å¯¹Ï†(n)çš„æ¨¡åå…ƒç´  d ï¼Œå³æ‰¾åˆ°ä¸€ä¸ªæ•° d ä½¿å¾— ed é™¤ä»¥Ï†(n)çš„ä½™æ•°ä¸º 1 ï¼š
&lt;code&gt;ed â‰¡ 1 mod(Ï† ( n ))  &amp;lt;=&amp;gt; ed = kÏ†(n) + 1 &lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Â å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªd :4811&lt;/p&gt;
&lt;h3 id=&#34;å®‰å…¨æ€§åˆ†æ&#34;&gt;å®‰å…¨æ€§åˆ†æ
&lt;/h3&gt;&lt;p&gt;é‚£ä¹ˆï¼Œæœ‰æ— å¯èƒ½åœ¨å·²çŸ¥nå’Œeçš„æƒ…å†µä¸‹ï¼Œæ¨å¯¼å‡ºdï¼Ÿ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;edâ‰¡1 (mod Ï†(n))ã€‚åªæœ‰çŸ¥é“eå’ŒÏ†(n)ï¼Œæ‰èƒ½ç®—å‡ºdã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Ï†(n)=(p-1)(q-1)ã€‚åªæœ‰çŸ¥é“på’Œqï¼Œæ‰èƒ½ç®—å‡ºÏ†(n)ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;n=pqã€‚åªæœ‰å°†nå› æ•°åˆ†è§£ï¼Œæ‰èƒ½ç®—å‡ºpå’Œqã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¤§æ•´æ•°çš„å› æ•°åˆ†è§£ï¼Œæ˜¯ä¸€ä»¶éå¸¸å›°éš¾çš„äº‹æƒ…&lt;/p&gt;
&lt;p&gt;ç›®å‰ï¼Œèƒ½å¤Ÿè¢«ç ´è§£çš„Â &lt;em&gt;n&lt;/em&gt;Â æœ€å¤§ä½æ•°æ˜¯Â &lt;em&gt;768&lt;/em&gt;Â ä½(è¿™é‡Œæåˆ°çš„ä½æ˜¯æŒ‡äºŒè¿›åˆ¶ä½)ï¼Œå› æ­¤æœ‰äººå¼€å§‹è´¨ç–‘Â &lt;em&gt;1024&lt;/em&gt;Â ä½å¯†é’¥çš„å®‰å…¨æ€§ã€‚ç°åœ¨æ¨èçš„å¯†é’¥é•¿åº¦è‡³å°‘è¦Â &lt;em&gt;2048&lt;/em&gt;Â ä½ï¼Œåªè¦é•¿åº¦è¶³å¤Ÿï¼Œå®‰å…¨æ€§å®Œå…¨ä¸ç”¨æ‹…å¿ƒ&lt;/p&gt;
&lt;h3 id=&#34;åº”ç”¨åœºæ™¯&#34;&gt;åº”ç”¨åœºæ™¯
&lt;/h3&gt;&lt;h4 id=&#34;åŠ å¯†&#34;&gt;åŠ å¯†
&lt;/h4&gt;&lt;p&gt;å…¬é’¥åŠ å¯†ç§é’¥è§£å¯†æ˜¯éå¯¹ç§°åŠ å¯†ç®—æ³•æœ€å…¸å‹çš„åº”ç”¨åœºæ™¯ï¼Œç‰¹åˆ«é€‚ç”¨äºå¯†é’¥éœ€è¦å…¬å¼€çš„åœºæ™¯ï¼Œæ¯”å¦‚ ä¼ è¾“å±‚å®‰å…¨åè®®Â &lt;em&gt;TLS&lt;/em&gt;Â ï¼Œå®ƒä¸ºé€šè®¯åŒæ–¹æä¾›å¯é çš„åŠ å¯†è¿æ¥&lt;/p&gt;
&lt;p&gt;å¦‚æœæ²¡æœ‰éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œ&lt;em&gt;TLS&lt;/em&gt;Â å°†æ— æ³•å®ç°ã€‚å› ä¸ºå¯¹ç§°åŠ å¯†ç®—æ³•è¦æ±‚åŒæ–¹ä½¿ç”¨åŒä¸€å¯†é’¥ï¼ŒåŠ å¯†è¿æ¥å»ºç«‹ä¹‹å‰ï¼Œåªèƒ½æ˜æ–‡åå•†å¯†é’¥ã€‚è¯•æƒ³æµè§ˆå™¨æƒ³è·ŸæœåŠ¡å™¨å»ºç«‹å®‰å…¨è¿æ¥ï¼Œæ— è®ºæ˜¯å®ƒé€‰å®šå¯†é’¥ç„¶åå‘ç»™æœåŠ¡å™¨ï¼Œè¿˜æ˜¯æœåŠ¡å™¨é€‰å®šå¯†é’¥å‘ç»™å®ƒï¼Œåªè¦å¯†é’¥ç»è¿‡æ˜æ–‡ä¼ è¾“ï¼ŒåŠ å¯†å°±å¤±å»æ„ä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰äº†éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼ŒæœåŠ¡å™¨å¯ä»¥ç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼Œç§é’¥è‡ªå·±ä¿ç®¡ï¼Œå…¬é’¥å¯ä»¥å…¬å¼€ã€‚å½“æµè§ˆå™¨è¯·æ±‚å»ºç«‹åŠ å¯†è¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥å°†å…¬é’¥å‘ç»™æµè§ˆå™¨ï¼Œå› ä¸ºå…¬é’¥æ˜¯å¯ä»¥å…¬å¼€çš„ã€‚æµè§ˆå™¨å°†æ•æ„Ÿä¿¡æ¯ç”¨å…¬é’¥åŠ å¯†åå†å‘ç»™æµè§ˆå™¨ï¼Œåªæœ‰æŒæ¡ç§é’¥çš„æœåŠ¡å™¨æ‰èƒ½è§£å¯†ï¼Œä»–äººä¾¿æ— æ³•çŸ¥æ™“ã€‚&lt;/p&gt;
&lt;p&gt;åŒç†ï¼ŒæœåŠ¡å™¨æƒ³å‘æ•æ„Ÿä¿¡æ¯ç»™å®¢æˆ·ç«¯ï¼Œå¿…é¡»ç”±å®¢æˆ·ç«¯ç”Ÿæˆçš„å…¬é’¥åŠ å¯†ã€‚æ¢å¥è¯è®²ï¼Œæ¯å¯¹å¯†é’¥&lt;strong&gt;è§£å†³ä¸€ä¸ªæ–¹å‘çš„åŠ å¯†&lt;/strong&gt;é—®é¢˜ï¼Œé€šè®¯åŒæ–¹éƒ½éœ€è¦ç”Ÿæˆè‡ªå·±çš„å¯†é’¥å¯¹ï¼Œè´Ÿè´£åŠ å¯†å¯¹æ–¹å‘æ¥çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºéå¯¹ç§°åŠ å¯†ç®—æ³•è¿ç®—å¤æ‚ï¼ŒåŠ å¯†æ•ˆç‡ä¸é«˜ï¼Œé€šå¸¸åªæ˜¯ç”¨æ¥åŠ å¯†å°‘é‡çš„å…³é”®ä¿¡æ¯ï¼Œæ¯”å¦‚åå•†å¯†é’¥ã€‚å›åˆ°Â &lt;em&gt;TLS&lt;/em&gt;Â è¿™ä¸ªä¾‹å­ï¼Œå…¶å®å¯ä»¥å€ŸåŠ©éå¯¹ç§°åŠ å¯†ç®—æ³•åå•†å¯†é’¥ï¼Œä»è€Œç›´æ¥ä½¿ç”¨æ›´é«˜æ•ˆçš„å¯¹ç§°åŠ å¯†ç®—æ³•æ¥åŠ å¯†æ•°æ®ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æœåŠ¡å™¨&lt;/strong&gt;ç”Ÿæˆ&lt;strong&gt;å…¬é’¥&lt;/strong&gt;å’Œ&lt;strong&gt;ç§é’¥&lt;/strong&gt; å¯¹ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;ï¼ˆæµè§ˆå™¨ï¼‰è¿æ¥ä¸Šæ¥åï¼ŒæœåŠ¡å™¨å°†&lt;strong&gt;å…¬é’¥&lt;/strong&gt;å‘ç»™å®¢æˆ·ç«¯ï¼›&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯&lt;strong&gt;éšæœºç”Ÿæˆ&lt;/strong&gt;ä¸€ä¸ªç”¨äº&lt;strong&gt;å¯¹ç§°åŠ å¯†&lt;/strong&gt;ï¼ˆÂ &lt;em&gt;AES&lt;/em&gt;Â ï¼‰çš„å¯†é’¥ï¼›&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯ç”¨&lt;strong&gt;å…¬é’¥&lt;/strong&gt;å¯¹ç”Ÿæˆçš„å¯†é’¥è¿›è¡Œ&lt;strong&gt;åŠ å¯†&lt;/strong&gt;ï¼Œç„¶ååå‘ç»™æœåŠ¡å™¨ï¼›&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯ç”¨å…¬é’¥åŠ å¯†çš„å¯†é’¥åï¼Œç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ï¼Œè‡³æ­¤å¯†é’¥åå•†å®Œæ¯•ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”±äºç§é’¥åªæœ‰æœåŠ¡å™¨æ‰æœ‰ï¼Œå› æ­¤ç¬¬ä¸‰æ–¹æ— æ³•çŸ¥æ™“å®¢æˆ·ç«¯é€‰å®šçš„å¯†é’¥æ˜¯å•¥&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;li&gt;æ­¤åé€šä¿¡åŒæ–¹é‡‡ç”¨å¯¹ç§°åŠ å¯†ï¼Œä»¥è¯¥å¯†é’¥åŠ å¯†æ•°æ®ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;ç­¾å&#34;&gt;ç­¾å
&lt;/h4&gt;&lt;p&gt;å®é™…ä¸Šï¼Œç§é’¥ä¹Ÿå¯ä»¥ç”¨æ¥åŠ å¯†æ•°æ®ï¼ŒåŠ å¯†åçš„å¯†æ–‡åªæœ‰å…¬é’¥æ‰èƒ½è§£å¯†ã€‚å°½ç®¡å¦‚æ­¤ï¼Œç”±äºå…¬é’¥æ˜¯å…¬å¼€çš„ï¼Œå› æ­¤è¿™ä¸ªæœºåˆ¶ä¸èƒ½æ¥åŠ å¯†æ•°æ®ï¼Œä½†å¯ä»¥å¯¹ç”¨æ¥å¯¹æ•°æ®è¿›è¡Œç­¾åé˜²ä¼ªã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ•°å­—è¯ä¹¦certificate&#34;&gt;æ•°å­—è¯ä¹¦(certificate)
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¿¡æ¯æ‘˜è¦&lt;/strong&gt;ï¼ˆÂ &lt;em&gt;digest&lt;/em&gt;Â ï¼‰ï¼Œæ•°æ®ç»è¿‡å“ˆå¸Œç®—æ³•å¾—åˆ°çš„ä¸€ä¸²å“ˆå¸Œå€¼ï¼Œä»£è¡¨æ•°æ®çš„ç‰¹å¾ï¼Œä¹Ÿç§°ä¸ºæ•°æ®æŒ‡çº¹ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‘˜è¦ç®—æ³•&lt;/strong&gt;Â ï¼Œå¯ä»¥æŠŠä»»æ„é•¿åº¦çš„æ•°æ®ï¼Œæ˜ å°„æˆä¸€ä¸ªå®šé•¿çš„å­—ç¬¦ä¸²ï¼ˆå“ˆå¸Œå€¼ï¼‰ï¼›
&lt;ul&gt;
&lt;li&gt;ç”±äºå“ˆå¸Œå†²çªçš„å­˜åœ¨ï¼Œä¸¤ä»½ä¸åŒçš„æ•°æ®ï¼Œæœ‰å¯èƒ½ç®—å‡ºç›¸åŒçš„æ‘˜è¦å€¼ï¼›&lt;/li&gt;
&lt;li&gt;æ‘˜è¦ç®—æ³•æ— æ³•ç”¨äºæ•°æ®åŠ å¯†ï¼Œé€šå¸¸ç”¨æ¥æ ¡éªŒæ•°æ®å®Œæ•´æ€§ï¼Œå³Â &lt;strong&gt;æ•°æ®é˜²ä¼ª&lt;/strong&gt;Â ï¼›&lt;/li&gt;
&lt;li&gt;å¸¸è§çš„æ‘˜è¦ç®—æ³•æœ‰ï¼š&lt;em&gt;MD5&lt;/em&gt;Â ã€&lt;em&gt;SHA1&lt;/em&gt;Â ã€&lt;em&gt;SHA256&lt;/em&gt;Â ã€&lt;em&gt;SHA512&lt;/em&gt;Â ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°å­—ç­¾å&lt;/strong&gt;ï¼ˆÂ &lt;em&gt;signature&lt;/em&gt;Â ï¼‰ï¼Œæ‘˜è¦ç”±ç§é’¥åŠ å¯†åï¼Œå¾—åˆ°çš„æ‘˜è¦å¯†æ–‡å°±æ˜¯æ•°å­—ç­¾åï¼›
&lt;ul&gt;
&lt;li&gt;ç­¾åï¼Œç”±æ•°æ®å‘é€æ–¹ç”Ÿæˆï¼Œè¿™æ˜¯ä¸€ä¸ªÂ &lt;strong&gt;åŠ å¯†&lt;/strong&gt;Â è¿‡ç¨‹ï¼ˆä½¿ç”¨ç§é’¥ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;éªŒç­¾ï¼Œç”±æ•°æ®æ¥æ”¶æ–¹æ ¡éªŒï¼Œè¿™æ˜¯ä¸€ä¸ªÂ &lt;strong&gt;è§£å¯†&lt;/strong&gt;Â è¿‡ç¨‹ï¼ˆä½¿ç”¨å…¬é’¥ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;æ•°å­—ç­¾ååªèƒ½ç”±ç§é’¥ç”Ÿæˆï¼Œå› æ­¤ç¬¬ä¸‰æ–¹æ— æ³•ä¼ªé€ ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨ä»‹ç»å¯†é’¥åå•†æ—¶ï¼Œæˆ‘ä»¬æåˆ°æœåŠ¡å™¨å…ˆå°†å…¬é’¥å‘ç»™å®¢æˆ·ç«¯ï¼Œç”¨å…¬é’¥ä¿æŠ¤å¯¹ç§°åŠ å¯†å¯†é’¥ï¼Œç¡®ä¿é€šä¿¡å†…å®¹ä¸ä¼šè¢«ç¬¬ä¸‰æ–¹è·æ‚‰ã€‚ä½†å¦‚æœå®¢æˆ·ç«¯è¿æ¥çš„æœåŠ¡å™¨æ˜¯å‡çš„å‘¢ï¼Ÿå¦‚æœç”¨æˆ·å¯¹å‡ç½‘ç«™ä¿¡ä»¥ä¸ºçœŸï¼Œè¾“å…¥äº†è´¦å·å¯†ç ï¼Œé‚£ä¹ˆè¿™äº›æ•æ„Ÿä¿¡æ¯éƒ½ä¼šè¢«å‡ç½‘ç«™çªƒå–ï¼&lt;/p&gt;
&lt;p&gt;ä¸ŠèŠ‚æˆ‘ä»¬ä¹Ÿè®¨è®ºäº†æ•°å­—ç­¾åï¼Œé€šè¿‡å®ƒå¯ä»¥å®ç°æ•°æ®é˜²ä¼ªã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥åˆ©ç”¨è¿™é¡¹æŠ€æœ¯æ¥ç”„åˆ«ä»¿å†’ç«™ç‚¹å‘¢&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æƒå¨æœºæ„&lt;/strong&gt;ç”Ÿæˆ&lt;strong&gt;ä¸€å¯¹å¯†é’¥&lt;/strong&gt;ï¼Œå¹¶æä¾›ç«™ç‚¹è®¤è¯å®¡æ ¸å’Œæ•°å­—ç­¾åé¢å‘æœåŠ¡ï¼›&lt;/li&gt;
&lt;li&gt;ç«™ç‚¹ç®¡ç†å‘˜å°†&lt;strong&gt;ç«™ç‚¹ä¿¡æ¯&lt;/strong&gt;ï¼ŒåŒ…æ‹¬åŸŸåã€è¿è¥å•ä½ã€&lt;strong&gt;å…¬é’¥&lt;/strong&gt;ç­‰ä¿¡æ¯å‘ç»™æƒå¨æœºæ„å®¡æ ¸ï¼›&lt;/li&gt;
&lt;li&gt;æƒå¨æœºæ„å¯¹æäº¤ä¸Šæ¥çš„ç«™ç‚¹ä¿¡æ¯è¿›è¡Œå®¡æ ¸ï¼Œå®¡æ ¸é€šè¿‡åˆ™ç”¨&lt;strong&gt;ç§é’¥ç­¾å&lt;/strong&gt;åè¿”å›ç»™ç«™ç‚¹ç®¡ç†å‘˜ï¼›&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰è¿æ¥ç«™ç‚¹æœåŠ¡å™¨ï¼Œ&lt;strong&gt;æœåŠ¡å™¨&lt;/strong&gt;å°†&lt;strong&gt;ç«™ç‚¹ä¿¡æ¯&lt;/strong&gt;ä»¥åŠå¯¹åº”çš„&lt;strong&gt;æ•°å­—ç­¾å&lt;/strong&gt;å‘ç»™å®¢æˆ·ç«¯ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;ç”¨æƒå¨æœºæ„æä¾›çš„&lt;strong&gt;å…¬é’¥&lt;/strong&gt;æ¥&lt;strong&gt;æ ¡éªŒæ•°å­—ç­¾å&lt;/strong&gt;ï¼Œå³å¯åˆ¤æ–­ç«™ç‚¹ä¿¡æ¯çš„çœŸä¼ªæ€§ï¼›&lt;/li&gt;
&lt;li&gt;ç­¾åéªŒè¯é€šè¿‡ï¼Œå®¢æˆ·ç«¯ä»ç«™ç‚¹ä¿¡æ¯ä¸­å–å‡ºå…¬é’¥ï¼Œä¸æœåŠ¡ç«¯åå•†å¯†é’¥ï¼Œå‘èµ·åŠ å¯†é€šä¿¡ï¼›&lt;/li&gt;
&lt;li&gt;ç”±äºç­¾åç”¨çš„ç§é’¥åªæœ‰æƒå¨æœºæ„æŒæ¡ï¼Œé»‘å®¢æ— æ³•ä¼ªé€ æ•°å­—ç­¾åï¼Œä¹Ÿå°±æ— æ³•æ¶è®¾ä»¿å†’ç«™ç‚¹ï¼›&lt;/li&gt;
&lt;li&gt;æƒå¨æœºæ„å¿…é¡»ç”±å¯ä¿¡çš„å•ä½è¿è¥ï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½ å¯èƒ½ä¼šè§‰å¾—ï¼Œé»‘å®¢ç›´æ¥ç›—ç”¨ç«™ç‚¹ä¿¡æ¯å’Œç­¾åä¸å°±å¯ä»¥ä¼ªé€ åŸç«™ç‚¹äº†å˜›ï¼Ÿæ­¤è¨€å·®çŸ£ï¼å› ä¸ºå…¬é’¥å±äºç«™ç‚¹ä¿¡æ¯&lt;br&gt;
çš„ä¸€ éƒ¨åˆ†ï¼Œä¹Ÿä¼šå‚ä¸ç­¾åï¼å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åå•†å¯†é’¥æ—¶ï¼Œä¼šä½¿ç”¨è¿™ä¸ªå…¬é’¥åŠ å¯†å¯†é’¥ã€‚ç”±äºé»‘å®¢ä¸æŒæ¡ç«™ç‚¹ç§
é’¥ï¼Œå› æ­¤  åŠ å¯†è¿æ¥æ— æ³•å»ºç«‹ï¼é»‘å®¢æŠŠå…¬é’¥æ›¿æ¢æˆè‡ªå·±çš„å§ï¼Œç­¾åå°±ä¸å¯¹ï¼Œè‚¯å®šä¼šè¢«éªŒå‡ºæ¥ï¼&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3 id=&#34;è¯ä¹¦ç­¾å‘å®éªŒ&#34;&gt;è¯ä¹¦ç­¾å‘å®éªŒ
&lt;/h3&gt;&lt;h4 id=&#34;caæƒå¨æœºæ„&#34;&gt;CAæƒå¨æœºæ„
&lt;/h4&gt;&lt;p&gt;é¦–å…ˆï¼Œæƒå¨æœºæ„éœ€è¦ç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼Œcakey.pem æ˜¯ç§é’¥,&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl genrsa -out cakey.pem 2048
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç„¶åï¼Œç”Ÿæˆæ ¹è¯ä¹¦ç­¾å‘ç”³è¯·æ–‡ä»¶ï¼ˆ csr æ–‡ä»¶ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl req -new -key cakey.pem -out ca.csr -subj &amp;#39;/C=CN/ST=Guangdong/L=Guangzhou/O=coding-fans/OU=CA/CN=ca.fasionchan.com&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¯ä¹¦ç”³è¯·æ–‡ä»¶åŒ…å«æƒå¨æœºæ„çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æœºæ„ä¿¡æ¯(&lt;em&gt;Subject&lt;/em&gt;Â )å’Œå…¬é’¥(&lt;em&gt;Public Key&lt;/em&gt;Â éƒ¨åˆ†)å¯ä»¥ç”¨ä¸‹é¢å‘½ä»¤æŸ¥çœ‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl req -in ca.csr -text -noout
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æœ€åï¼Œè‡ªç­¾æ ¹è¯ä¹¦ï¼ˆÂ &lt;em&gt;cer&lt;/em&gt;Â æ–‡ä»¶ ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl x509 -req -days 3650 -sha1 -extensions v3_ca -signkey cakey.pem -in ca.csr -out ca.cer
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™ä¸€æ­¥ç”Ÿæˆçš„Â &lt;em&gt;cer&lt;/em&gt;Â æ–‡ä»¶å°±æ˜¯&lt;strong&gt;æ ¹è¯ä¹¦æ–‡ä»¶&lt;/strong&gt;ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯æ‰¿è½½æƒå¨æœºæ„&lt;strong&gt;å…¬é’¥&lt;/strong&gt;ï¼Œä»¥ä¾¿é¢„è£…åœ¨æ“ä½œç³»ç»Ÿæˆ–è€…å…¶ä»–ç»ˆç«¯ã€‚å®ƒåŒæ ·ä¼šåŒ…å«æƒå¨æœºæ„çš„ä¿¡æ¯ï¼Œå…¬é’¥ï¼Œä»¥åŠå¯¹åº”çš„ç­¾åã€‚&lt;/p&gt;
&lt;h4 id=&#34;å•†ä¸šç«™ç‚¹æœåŠ¡ç«¯&#34;&gt;å•†ä¸šç«™ç‚¹ï¼ˆæœåŠ¡ç«¯ï¼‰
&lt;/h4&gt;&lt;p&gt;é¦–å…ˆï¼Œç«™ç‚¹ç®¡ç†å‘˜ç”Ÿæˆä¸€å¯¹å¯†é’¥&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl genrsa -out sitekey.pem 2048
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç„¶åï¼Œç”Ÿæˆè¯ä¹¦ç­¾å‘ç”³è¯·æ–‡ä»¶ï¼ˆ csr æ–‡ä»¶ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl req -new -key sitekey.pem -out site.csr -subj &amp;#39;/C=CN/ST=Guangdong/L=Guangzhou/O=fasionchan/OU=website/CN=fasionchan.co
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¯ä¹¦ç”³è¯·æ–‡ä»¶åŒ…å«ç«™ç‚¹ä¿¡æ¯å’Œå…¬é’¥ï¼Œç«™ç‚¹ç®¡ç†å‘˜å°†è¯ä¹¦ç”³è¯·æ–‡ä»¶å‘ç»™æƒå¨æœºæ„å®¡æ ¸ï¼Œ&lt;/p&gt;
&lt;p&gt;æƒå¨æœºæ„å¯¹ç”³è¯·è¿›è¡Œå®¡æ ¸ï¼Œå®¡æ ¸é€šè¿‡åˆ™ç”¨è‡ªå·±çš„&lt;strong&gt;ç§é’¥&lt;/strong&gt;å¯¹å®ƒè¿›è¡Œç­¾åï¼Œç”Ÿæˆè¯ä¹¦(cer æ–‡ä»¶):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl x509 -req -days 365 -sha1 -extensions v3_req -CA ca.cer -CAkey cakey.pem -CAserial ca.srl -CAcreateserial -in site.csr -out site.cer
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¯ä¹¦ä¸­ä¿å­˜ç€åŒ…æ‹¬å…¬é’¥åœ¨å†…çš„ç«™ç‚¹ä¿¡æ¯ï¼Œä»¥åŠæƒå¨æœºæ„å¯¹è¿™äº›ä¿¡æ¯çš„ç­¾åã€‚ç®¡ç†å‘˜æ¥åˆ°æƒå¨æœºæ„é¢å‘çš„è¯ä¹¦ï¼Œå°±å¯ä»¥éƒ¨ç½²ç½‘ç«™äº†&lt;/p&gt;
&lt;h4 id=&#34;æµè§ˆå™¨å®¢æˆ·ç«¯&#34;&gt;æµè§ˆå™¨ï¼ˆå®¢æˆ·ç«¯ï¼‰
&lt;/h4&gt;&lt;p&gt;å®¢æˆ·ç«¯æµè§ˆå™¨è®¿é—®ç«™ç‚¹ï¼Œ&lt;strong&gt;æœåŠ¡ç«¯&lt;/strong&gt;ä¼šå°†å…¶&lt;strong&gt;è¯ä¹¦å‘&lt;/strong&gt;ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯å…ˆå¯¹è¯ä¹¦ç­¾åè¿›è¡ŒéªŒè¯ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡æ–°å¯¹è¯ä¹¦ä¸­çš„ç«™ç‚¹ä¿¡æ¯è®¡ç®—Â &lt;strong&gt;æ‘˜è¦å€¼&lt;/strong&gt;Â ï¼›&lt;/li&gt;
&lt;li&gt;ç”¨å…¬é’¥å¯¹è¯ä¹¦ä¸­çš„ç­¾åè¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°è¯ä¹¦çš„åŸå§‹æ‘˜è¦å€¼ï¼›
&lt;ul&gt;
&lt;li&gt;å…¬é’¥é€šå¸¸ç”±æ ¹è¯ä¹¦æä¾›ï¼Œæ ¹è¯ä¹¦é€šå¸¸é¢„è£…åœ¨ç³»ç»Ÿé‡Œï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å¯¹æ¯”ä¸¤ä¸ªæ‘˜è¦å€¼çœ‹æ˜¯å¦ä¸€è‡´ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è°ƒç”¨Â &lt;em&gt;openssl&lt;/em&gt;Â å·¥å…·ï¼Œä¸€è¡Œå‘½ä»¤å³å¯å®Œæˆç­¾åéªŒè¯&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;openssl verify -CAfile ca.cer site.cer
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“
&lt;/h3&gt;&lt;p&gt;æ•°å­—è¯ä¹¦æ˜¯æ”¯æ’‘äº’è”ç½‘èº«ä»½è®¤è¯çš„é‡è¦æŠ€æœ¯æ‰‹æ®µï¼Œå¯ä»¥ç®€å•ç†è§£æˆç»è¿‡Â &lt;em&gt;CA&lt;/em&gt;Â æƒå¨ç»“æ„ç­¾åè®¤è¯è¿‡çš„ç«™ç‚¹ä¿¡æ¯ã€‚ç”±äºç»è¿‡Â &lt;em&gt;CA&lt;/em&gt;Â ç­¾åï¼Œç¬¬ä¸‰æ–¹æ— æ³•é€šè¿‡ä¼ªé€ æ‰‹æ®µå†’å……èº«ä»½ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯ä¹¦ç”±&lt;strong&gt;ç«™ç‚¹ä¿¡æ¯&lt;/strong&gt;å’ŒÂ &lt;strong&gt;&lt;em&gt;CA&lt;/em&gt;Â ç­¾å&lt;/strong&gt;ç»„æˆï¼Œ&lt;strong&gt;ç«™ç‚¹ä¿¡æ¯åŒ…å«ç«™ç‚¹å…¬é’¥&lt;/strong&gt;ï¼Œå…¬é’¥ç”¨äºåå•†å¯¹ç§°åŠ å¯†å¯†é’¥ï¼›&lt;/li&gt;
&lt;li&gt;è¯ä¹¦ç”±Â &lt;em&gt;CA&lt;/em&gt;Â æƒå¨æœºæ„å®¡æ ¸ç­¾å‘ï¼Œç­¾åç”¨çš„æ˜¯Â &lt;em&gt;CA&lt;/em&gt;Â çš„ç§é’¥ï¼›&lt;/li&gt;
&lt;li&gt;&lt;em&gt;CA&lt;/em&gt;Â å…¬é’¥é€šå¸¸ä»¥æ ¹è¯ä¹¦å½¢å¼é¢„è£…åœ¨ç³»ç»Ÿå†…ï¼Œå®¢æˆ·ç«¯é€šè¿‡å®ƒæ¥éªŒè¯è¯ä¹¦ç­¾åï¼›&lt;/li&gt;
&lt;li&gt;æœ‰äº†æ•°å­—ç­¾åï¼Œé»‘å®¢æ— æ³•å¯¹è¯ä¹¦è¿›è¡Œç¯¡æ”¹ï¼Œä¹Ÿæ— æ³•ä¼ªé€ è¯ä¹¦ï¼Œå› æ­¤æ— æ³•éƒ¨ç½²ä»¿å†’ç«™ç‚¹ï¼›
&lt;ul&gt;
&lt;li&gt;è‹¥åªçªƒå–åŸç«™ç‚¹è¯ä¹¦ï¼Œä¸åšç¯¡æ”¹ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨çœŸå®ç«™ç‚¹çš„å…¬é’¥ï¼Œè€Œé»‘å®¢æ— æ³•æŒæ¡ç«™ç‚¹ç§é’¥ï¼Œå› æ­¤åŠ å¯†è¿æ¥æ— æ³•å»ºç«‹ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœç¯¡æ”¹åŸç«™ç‚¹è¯ä¹¦ï¼Œæ¢ä¸Šè‡ªå·±çš„å…¬é’¥ï¼Œä½†å› ä¸ºæ²¡æœ‰Â &lt;em&gt;CA&lt;/em&gt;Â ç§é’¥æ— æ³•ç”Ÿæˆåˆæ³•ç­¾åï¼Œä¹Ÿä¼šè¢«è¯†åˆ«å‡ºæ¥ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;è½¬è½½è‡ª&lt;a class=&#34;link&#34; href=&#34;https://fasionchan.com/network/cryptography/certificate/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æ•°å­—è¯ä¹¦èº«ä»½è®¤è¯åŸç†ä¸ç­¾å‘æ­¥éª¤è¯¦è§£ | å°èœå­¦ç½‘ç»œ&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
</description>
        </item>
        <item>
        <title>RESTful API</title>
        <link>https://charles-7777.github.io/hugo-stack/p/restful-api/</link>
        <pubDate>Thu, 26 Jun 2025 15:22:59 +0800</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/restful-api/</guid>
        <description>&lt;h1 id=&#34;restful-api&#34;&gt;RESTful API
&lt;/h1&gt;&lt;h2 id=&#34;ä¸€restful-apiæ¦‚è¿°&#34;&gt;ä¸€ã€RESTful APIæ¦‚è¿°
&lt;/h2&gt;&lt;h3 id=&#34;11-å®šä¹‰&#34;&gt;1.1 å®šä¹‰
&lt;/h3&gt;&lt;p&gt;RESTï¼ˆRepresentational State Transferï¼‰å³è¡¨ç°å±‚çŠ¶æ€è½¬ç§»ï¼Œæ˜¯ä¸€ç§é’ˆå¯¹ç½‘ç»œåº”ç”¨çš„è®¾è®¡é£æ ¼ï¼Œä¸»è¦ç”¨äºè®¾è®¡åˆ†å¸ƒå¼è¶…åª’ä½“ç³»ç»Ÿã€‚RESTful API åˆ™æ˜¯éµå¾ª REST æ¶æ„åŸåˆ™çš„åº”ç”¨ç¨‹åºæ¥å£ï¼Œå…è®¸å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šè¿‡ HTTP åè®®è¿›è¡Œäº¤äº’ã€‚å®ƒé‡‡ç”¨èµ„æºå®šä½çš„æ€ç»´æ¨¡å¼ï¼Œå°†æ‰€æœ‰çš„æ“ä½œéƒ½è§†ä¸ºå¯¹&lt;strong&gt;èµ„æº&lt;/strong&gt;çš„æ“ä½œï¼Œä»¥ä½¿ç³»ç»Ÿæ›´åŠ ç®€æ´ã€æ˜“äºç†è§£å’Œæ‰©å±•ã€‚&lt;/p&gt;
&lt;h3 id=&#34;12-æ ¸å¿ƒæ¦‚å¿µ&#34;&gt;1.2 æ ¸å¿ƒæ¦‚å¿µ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºï¼ˆResourceï¼‰&lt;/strong&gt;ï¼šRESTful API ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡ã€å®ä½“æˆ–æ•°æ®éƒ½è¢«æŠ½è±¡ä¸ºä¸€ä¸ªèµ„æºã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·ã€æ–‡ç« ç­‰éƒ½å¯ä»¥ä½œä¸ºèµ„æºã€‚æ¯ä¸ªèµ„æºéƒ½é€šè¿‡ä¸€ä¸ªå”¯ä¸€çš„ URIï¼ˆç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰æ ‡è¯†ã€‚æ¯”å¦‚ï¼Œ&lt;code&gt;/users/123&lt;/code&gt; è¡¨ç¤º &lt;code&gt;id&lt;/code&gt; ä¸º &lt;code&gt;123&lt;/code&gt; çš„ç”¨æˆ·èµ„æºï¼Œ&lt;code&gt;/posts/456&lt;/code&gt; è¡¨ç¤º &lt;code&gt;id&lt;/code&gt; ä¸º &lt;code&gt;456&lt;/code&gt; çš„æ–‡ç« èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;URIï¼ˆç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼‰&lt;/strong&gt;ï¼šç”¨äºæ ‡è¯†èµ„æºçš„åœ°å€ï¼Œé€šå¸¸ä½¿ç”¨ URLï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰ä½œä¸º URIã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HTTP åŠ¨ä½œï¼ˆHTTP Methodsï¼‰&lt;/strong&gt;ï¼šä¾èµ–äº HTTP åè®®çš„å¸¸è§æ–¹æ³•æ¥å¯¹èµ„æºè¿›è¡Œæ“ä½œï¼Œæ¯ä¸ª HTTP æ–¹æ³•å¯¹åº”ä¸åŒçš„æ“ä½œï¼š
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;GET&lt;/strong&gt;ï¼šè·å–æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;POST&lt;/strong&gt;ï¼šåœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºæ–°çš„èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;PUT&lt;/strong&gt;ï¼šæ›´æ–°æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DELETE&lt;/strong&gt;ï¼šåˆ é™¤æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— çŠ¶æ€ï¼ˆStatelessnessï¼‰&lt;/strong&gt;ï¼šæ¯ä¸ªè¯·æ±‚éƒ½åº”è¯¥æ˜¯ç‹¬ç«‹çš„ï¼ŒæœåŠ¡å™¨ä¸ä¼šåœ¨è¯·æ±‚ä¹‹é—´ä¿å­˜å®¢æˆ·ç«¯çš„çŠ¶æ€ã€‚æ¯æ¬¡è¯·æ±‚éƒ½å¿…é¡»åŒ…å«ç†è§£è¯·æ±‚æ‰€å¿…éœ€çš„ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¡¨ç°å±‚çŠ¶æ€è½¬ç§»ï¼ˆRepresentational State Transferï¼‰&lt;/strong&gt;ï¼šèµ„æºçš„è¡¨ç°å½¢å¼å¯ä»¥æ˜¯ JSONã€XMLã€HTML ç­‰æ ¼å¼ï¼Œé€šå¸¸ RESTful API ä½¿ç”¨ JSON ä½œä¸ºæ•°æ®äº¤æ¢æ ¼å¼ï¼Œå› ä¸ºå®ƒè½»é‡ä¸”æ˜“äºè§£æã€‚å®¢æˆ·ç«¯é€šè¿‡æ¥æ”¶èµ„æºçš„è¡¨ç°å½¢å¼ï¼ˆå¦‚ JSONã€XMLï¼‰æ¥æ„ŸçŸ¥èµ„æºçš„å˜åŒ–ï¼Œä»è€Œå®ç°çŠ¶æ€çš„â€œè½¬ç§»â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;äºŒrestful-apiçš„ç‰¹ç‚¹å’Œä¼˜åŠ¿&#34;&gt;äºŒã€RESTful APIçš„ç‰¹ç‚¹å’Œä¼˜åŠ¿
&lt;/h2&gt;&lt;h3 id=&#34;21-ç‰¹ç‚¹&#34;&gt;2.1 ç‰¹ç‚¹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºå¯¼å‘&lt;/strong&gt;ï¼šæ‰€æœ‰å†…å®¹éƒ½è¢«æŠ½è±¡ä¸ºèµ„æºï¼ˆå¦‚ Userã€Orderã€Article ç­‰ï¼‰ï¼Œæ¯ä¸ªèµ„æºéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼ˆURIï¼‰ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;/users&lt;/code&gt; è¡¨ç¤ºç”¨æˆ·èµ„æºï¼Œ&lt;code&gt;/users/1&lt;/code&gt; è¡¨ç¤º ID ä¸º 1 çš„ç”¨æˆ·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä½¿ç”¨æ ‡å‡†åè®®&lt;/strong&gt;ï¼šåŸºäº HTTP åè®®ï¼Œç›´æ¥ä½¿ç”¨å…¶æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰æ¥æ“ä½œèµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— çŠ¶æ€é€šä¿¡&lt;/strong&gt;ï¼šæ¯æ¬¡è¯·æ±‚éƒ½åŒ…å«æ‰€æœ‰ä¸Šä¸‹æ–‡ï¼Œä¸ä¾èµ–æœåŠ¡å™¨ä¿å­˜çŠ¶æ€ã€‚è¿™ä½¿å¾—æœåŠ¡å™¨å¯ä»¥æ›´åŠ å®¹æ˜“åœ°è¿›è¡Œæ‰©å±•å’Œè´Ÿè½½å‡è¡¡ï¼Œå› ä¸ºæ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸éœ€è¦è€ƒè™‘ä¹‹å‰çš„è¯·æ±‚çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»Ÿä¸€æ¥å£&lt;/strong&gt;ï¼šæ¥å£é£æ ¼ç»Ÿä¸€ã€æ˜“äºç†è§£å’Œä½¿ç”¨ã€‚é€šè¿‡æ ‡å‡†çš„ HTTP æ–¹æ³•ï¼ˆGETã€POSTã€PUTã€DELETE ç­‰ï¼‰å’Œèµ„æºæ ‡è¯†ç¬¦ï¼ˆURIï¼‰è®¿é—®èµ„æºï¼Œç®€åŒ–äº†ç³»ç»Ÿçš„æ•´ä½“æ¶æ„ï¼Œæå‡äº†äº’æ“ä½œæ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯ç¼“å­˜&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯å¯æ ¹æ®å“åº”å¤´å¯¹èµ„æºè¿›è¡Œç¼“å­˜ï¼Œæé«˜æ€§èƒ½ã€‚åˆ©ç”¨ HTTP åè®®çš„ç¼“å­˜æœºåˆ¶ï¼Œå…è®¸ä¸­é—´ä»¶æˆ–å®¢æˆ·ç«¯ç¼“å­˜å“åº”ç»“æœï¼Œå‡å°‘ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚ï¼Œä»è€Œæå‡å“åº”é€Ÿåº¦å’Œå‡è½»æœåŠ¡å™¨è´Ÿæ‹…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å±‚æ¶æ„&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯æ— éœ€çŸ¥é“è¯·æ±‚æœ€ç»ˆç”±è°å¤„ç†ï¼ˆä¾‹å¦‚ä¸­é—´å±‚ã€è´Ÿè½½å‡è¡¡ç­‰ï¼‰ã€‚å…è®¸é€šè¿‡ä¸­é—´å±‚ï¼ˆå¦‚ä»£ç†æœåŠ¡å™¨ã€ç½‘å…³ï¼‰æ¥å¤„ç†è¯·æ±‚ï¼Œæ¯å±‚åªéœ€ä¸ç›¸é‚»å±‚é€šä¿¡ï¼Œå¢å¼ºäº†ç³»ç»Ÿçš„å®‰å…¨æ€§ã€å¯æ‰©å±•æ€§å’Œçµæ´»æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŒ‰éœ€ä»£ç ï¼ˆå¯é€‰ï¼‰&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯å¯ä»¥ä»æœåŠ¡å™¨ä¸‹è½½ä»£ç æˆ–è„šæœ¬ï¼Œä»¥æ‰©å±•å…¶åŠŸèƒ½ï¼Œå¢åŠ äº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;22-ä¼˜åŠ¿&#34;&gt;2.2 ä¼˜åŠ¿
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç®€æ´æ˜“æ‡‚&lt;/strong&gt;ï¼šä½¿ç”¨ HTTP åè®®çš„æ ‡å‡†æ–¹æ³•å’Œ URIï¼Œå¯ä»¥è®© API çš„è®¾è®¡å’Œä½¿ç”¨å˜å¾—ç®€å•ã€‚é€šè¿‡ URL å’Œ HTTP åŠ¨è¯çš„ç»„åˆï¼Œå¯ä»¥æ˜ç¡®åœ°è¡¨ç¤ºå¯¹ç‰¹å®šèµ„æºçš„æ“ä½œæ„å›¾ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çµæ´»æ€§&lt;/strong&gt;ï¼šèµ„æºå¯ä»¥æœ‰ä¸åŒçš„è¡¨ç¤ºå½¢å¼ï¼ˆJSONã€XML ç­‰ï¼‰ï¼ŒåŒæ—¶ HTTP æ–¹æ³•æ˜ç¡®åŒºåˆ†ä¸åŒçš„æ“ä½œã€‚å®¢æˆ·ç«¯å¯ä»¥æ ¹æ®è‡ªèº«éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ•°æ®æ ¼å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å±•æ€§å¼º&lt;/strong&gt;ï¼šé€šè¿‡ä¸€è‡´çš„æ¥å£è®¾è®¡ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰©å±•å’Œç»´æŠ¤ APIã€‚éšç€åº”ç”¨ç¨‹åºçš„å‘å±•ï¼Œå¯ä»¥è½»æ¾åœ°æ·»åŠ æ–°çš„èµ„æºå’Œæ“ä½œï¼Œè€Œä¸ä¼šå½±å“ç°æœ‰çš„ API ç»“æ„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— çŠ¶æ€æ€§&lt;/strong&gt;ï¼šç®€åŒ–äº†æœåŠ¡å™¨ç«¯çš„è®¾è®¡ï¼Œå¢å¼ºäº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€‚æœåŠ¡å™¨ä¸éœ€è¦ä¿å­˜å®¢æˆ·ç«¯çš„çŠ¶æ€ä¿¡æ¯ï¼Œä½¿å¾—æœåŠ¡å™¨å¯ä»¥æ›´å®¹æ˜“åœ°è¿›è¡Œæ‰©å±•å’Œè´Ÿè½½å‡è¡¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¨å¹³å°&lt;/strong&gt;ï¼šåŸºäº HTTP åè®®ï¼Œå¯ä»¥è¢«ä»»ä½•æ”¯æŒ HTTP çš„å®¢æˆ·ç«¯è°ƒç”¨ï¼Œé€‚ç”¨äºå„ç§åº”ç”¨åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯éœ€è¦è·¨å¹³å°å’Œè·¨è¯­è¨€äº¤äº’çš„ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä¸‰restful-apiçš„è®¾è®¡åŸåˆ™&#34;&gt;ä¸‰ã€RESTful APIçš„è®¾è®¡åŸåˆ™
&lt;/h2&gt;&lt;h3 id=&#34;31-åŸºäºèµ„æº&#34;&gt;3.1 åŸºäºèµ„æº
&lt;/h3&gt;&lt;p&gt;å°†ç½‘ç»œä¸Šçš„æ¯ä¸ªå®ä½“æˆ–æ¦‚å¿µè§†ä¸ºå”¯ä¸€èµ„æºæ˜¯ä¸€ä¸ªå…³é”®åŸåˆ™ã€‚é€šè¿‡ URL æ¥è¡¨ç¤ºè¿™äº›èµ„æºï¼Œä½¿å¾—èµ„æºçš„å®šä½æ›´åŠ æ¸…æ™°å’Œç›´è§‚ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªåšå®¢æ–‡ç« å¯ä»¥è¢«è¡¨ç¤ºä¸º &lt;code&gt;/articles/123&lt;/code&gt;ï¼Œå…¶ä¸­ â€œarticlesâ€ è¡¨ç¤ºæ–‡ç« èµ„æºçš„é›†åˆï¼Œâ€œ123â€ æ˜¯å…·ä½“æŸä¸€ç¯‡æ–‡ç« çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚è¿™ç§æ–¹å¼ä½¿å¾—å¼€å‘è€…å’Œç”¨æˆ·éƒ½èƒ½å¤Ÿè½»æ¾åœ°ç†è§£å’Œè®¿é—®ç‰¹å®šçš„èµ„æºã€‚ä»¥ç”µå•†å¹³å°ä¸ºä¾‹ï¼Œå•†å“å¯ä»¥è¡¨ç¤ºä¸º &lt;code&gt;/products&lt;/code&gt;ï¼Œæ¯ä¸ªå…·ä½“çš„å•†å“å¯ä»¥é€šè¿‡ &lt;code&gt;/products/{productId}&lt;/code&gt; æ¥è®¿é—®ï¼Œå…¶ä¸­ &lt;code&gt;{productId}&lt;/code&gt; æ˜¯å•†å“çš„å”¯ä¸€æ ‡è¯†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;32-ç»Ÿä¸€æ¥å£&#34;&gt;3.2 ç»Ÿä¸€æ¥å£
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºæ ‡è¯†ï¼ˆResource Identificationï¼‰&lt;/strong&gt;ï¼šæ¯ä¸ªèµ„æºéƒ½åº”æœ‰å”¯ä¸€çš„ URLã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·èµ„æºå¯ä»¥é€šè¿‡ &lt;code&gt;/users/{id}&lt;/code&gt; è¿›è¡Œæ ‡è¯†ï¼Œå…¶ä¸­ &lt;code&gt;{id}&lt;/code&gt; æ˜¯ç”¨æˆ·çš„å…·ä½“æ ‡è¯†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èµ„æºæ“ä½œï¼ˆResource Manipulation Through Representationsï¼‰&lt;/strong&gt;ï¼šé€šè¿‡è¡¨ç¤ºï¼ˆrepresentationï¼‰æ¥æ“ä½œèµ„æºï¼Œè€Œä¸æ˜¯ç›´æ¥æ“ä½œèµ„æºæœ¬èº«ã€‚ä½¿ç”¨æ ‡å‡†çš„ HTTP æ–¹æ³•ï¼ˆGETã€POSTã€PUTã€DELETE ç­‰ï¼‰æ¥æ“ä½œèµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªæè¿°æ¶ˆæ¯ï¼ˆSelf - descriptive Messagesï¼‰&lt;/strong&gt;ï¼šå“åº”æ¶ˆæ¯åº”åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯ä»¥ä¾¿å®¢æˆ·ç«¯æ— éœ€é¢å¤–æ–‡æ¡£å³å¯ç†è§£ã€‚æ¯ä¸ªè¯·æ±‚å’Œå“åº”éƒ½åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œä½¿å¾—å®¢æˆ·ç«¯èƒ½å¤Ÿç†è§£å¦‚ä½•å¤„ç†å®ƒä»¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— çŠ¶æ€ï¼ˆStatelessï¼‰&lt;/strong&gt;ï¼šæœåŠ¡å™¨ä¸ä¿å­˜å®¢æˆ·ç«¯çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚æ¯ä¸ªè¯·æ±‚éƒ½å¿…é¡»åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œä½¿æœåŠ¡å™¨èƒ½å¤Ÿç†è§£å’Œå¤„ç†è¯¥è¯·æ±‚ï¼Œè€Œä¸ä¾èµ–äºä¹‹å‰çš„è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;33-ä½¿ç”¨æ ‡å‡†çš„-http-æ–¹æ³•&#34;&gt;3.3 ä½¿ç”¨æ ‡å‡†çš„ HTTP æ–¹æ³•
&lt;/h3&gt;&lt;p&gt;ä¸»è¦ä½¿ç”¨ HTTP æ–¹æ³•æ¥å®šä¹‰å¯¹èµ„æºçš„æ“ä½œï¼Œå¸¸è§çš„ HTTP æ–¹æ³•åŠå…¶ä½œç”¨å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;HTTP æ–¹æ³•&lt;/th&gt;
          &lt;th&gt;æ“ä½œ&lt;/th&gt;
          &lt;th&gt;å¹‚ç­‰æ€§&lt;/th&gt;
          &lt;th&gt;å®‰å…¨æ€§&lt;/th&gt;
          &lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;GET&lt;/td&gt;
          &lt;td&gt;è·å–èµ„æº&lt;/td&gt;
          &lt;td&gt;âœ…&lt;/td&gt;
          &lt;td&gt;âœ…&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;GET /users&lt;/code&gt; æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼›&lt;code&gt;GET /users/id&lt;/code&gt; æŸ¥çœ‹è¯¥ id çš„ç”¨æˆ·ä¿¡æ¯&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;POST&lt;/td&gt;
          &lt;td&gt;åˆ›å»ºèµ„æº&lt;/td&gt;
          &lt;td&gt;âŒ&lt;/td&gt;
          &lt;td&gt;âŒ&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;POST /users&lt;/code&gt; åˆ›å»ºç”¨æˆ·ï¼Œå¯åœ¨ DATA å¤„å¸¦éœ€è¦çš„å‚æ•°&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;PUT&lt;/td&gt;
          &lt;td&gt;æ›´æ–°æˆ–æ›¿æ¢èµ„æº&lt;/td&gt;
          &lt;td&gt;âœ…&lt;/td&gt;
          &lt;td&gt;âŒ&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;PUT /users/id?name=&#39;å¼ ä¸‰&#39;&amp;amp;age=20&lt;/code&gt; ä¿®æ”¹è¯¥ id çš„ç”¨æˆ·ä¿¡æ¯ï¼ˆname å’Œ ageï¼‰&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;PATCH&lt;/td&gt;
          &lt;td&gt;éƒ¨åˆ†æ›´æ–°èµ„æº&lt;/td&gt;
          &lt;td&gt;âŒ&lt;/td&gt;
          &lt;td&gt;âŒ&lt;/td&gt;
          &lt;td&gt;å¯¹èµ„æºè¿›è¡Œéƒ¨åˆ†å±æ€§çš„æ›´æ–°&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;DELETE&lt;/td&gt;
          &lt;td&gt;åˆ é™¤èµ„æº&lt;/td&gt;
          &lt;td&gt;âœ…&lt;/td&gt;
          &lt;td&gt;âŒ&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;DELETE /users/id&lt;/code&gt; åˆ é™¤è¯¥ id çš„ç”¨æˆ·ä¿¡æ¯&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;HEAD&lt;/td&gt;
          &lt;td&gt;è·å–èµ„æºçš„å…ƒæ•°æ®&lt;/td&gt;
          &lt;td&gt;âœ…&lt;/td&gt;
          &lt;td&gt;âœ…&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;OPTIONS&lt;/td&gt;
          &lt;td&gt;è·å–ä¿¡æ¯ï¼Œå…³äºèµ„æºçš„å“ªäº›å±æ€§æ˜¯å®¢æˆ·ç«¯å¯ä»¥æ”¹å˜çš„&lt;/td&gt;
          &lt;td&gt;âœ…&lt;/td&gt;
          &lt;td&gt;âœ…&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;34-æ— çŠ¶æ€é€šä¿¡&#34;&gt;3.4 æ— çŠ¶æ€é€šä¿¡
&lt;/h3&gt;&lt;p&gt;æ¯ä¸ªè¯·æ±‚å¿…é¡»åŒ…å«æœåŠ¡å™¨å¤„ç†è¯¥è¯·æ±‚æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒæœåŠ¡å™¨ä¸ä¾èµ–ä¹‹å‰çš„è¯·æ±‚ä¸Šä¸‹æ–‡ã€‚è¿™ä½¿å¾—æœåŠ¡å™¨å¯ä»¥æ›´åŠ å®¹æ˜“åœ°è¿›è¡Œæ‰©å±•å’Œè´Ÿè½½å‡è¡¡ï¼Œå› ä¸ºæ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸éœ€è¦è€ƒè™‘ä¹‹å‰çš„è¯·æ±‚çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œå½“å®¢æˆ·ç«¯å‘é€å¤šä¸ªè¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä¸éœ€è¦è®°ä½ä¹‹å‰çš„è¯·æ±‚å†…å®¹ï¼Œåªéœ€è¦æ ¹æ®å½“å‰è¯·æ±‚çš„ä¿¡æ¯è¿›è¡Œå¤„ç†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;35-è¿”å›é€‚å½“çš„çŠ¶æ€ç &#34;&gt;3.5 è¿”å›é€‚å½“çš„çŠ¶æ€ç 
&lt;/h3&gt;&lt;p&gt;API åº”è¿”å›é€‚å½“çš„ HTTP çŠ¶æ€ç ï¼Œå‡†ç¡®åæ˜ è¯·æ±‚ç»“æœã€‚å¸¸ç”¨çš„çŠ¶æ€ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;çŠ¶æ€ç &lt;/th&gt;
          &lt;th&gt;å«ä¹‰&lt;/th&gt;
          &lt;th&gt;è¯´æ˜&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;200&lt;/td&gt;
          &lt;td&gt;OK&lt;/td&gt;
          &lt;td&gt;æœåŠ¡å™¨æˆåŠŸè¿”å›ç”¨æˆ·è¯·æ±‚çš„æ•°æ®ï¼Œè¯¥æ“ä½œæ˜¯å¹‚ç­‰çš„ï¼ˆIdempotentï¼‰ï¼Œé€šç”¨æˆåŠŸã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;201&lt;/td&gt;
          &lt;td&gt;Created&lt;/td&gt;
          &lt;td&gt;èµ„æºå·²åˆ›å»ºï¼Œé€šå¸¸ç”¨äº POST è¯·æ±‚ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;204&lt;/td&gt;
          &lt;td&gt;No Content&lt;/td&gt;
          &lt;td&gt;è¯·æ±‚æˆåŠŸï¼Œä½†æ— è¿”å›å†…å®¹ï¼Œé€šå¸¸ç”¨äº DELETE è¯·æ±‚ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;400&lt;/td&gt;
          &lt;td&gt;Bad Request&lt;/td&gt;
          &lt;td&gt;è¯·æ±‚å‚æ•°æœ‰è¯¯ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;401&lt;/td&gt;
          &lt;td&gt;Unauthorized&lt;/td&gt;
          &lt;td&gt;è®¤è¯å¤±è´¥ï¼Œå®¢æˆ·ç«¯éœ€è¦æä¾›èº«ä»½éªŒè¯ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;403&lt;/td&gt;
          &lt;td&gt;Forbidden&lt;/td&gt;
          &lt;td&gt;æ²¡æœ‰æƒé™è®¿é—®èµ„æºï¼ŒæœåŠ¡å™¨ç†è§£è¯·æ±‚ï¼Œä½†æ‹’ç»æ‰§è¡Œï¼Œé€šå¸¸ç”±äºæƒé™é—®é¢˜ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;404&lt;/td&gt;
          &lt;td&gt;Not Found&lt;/td&gt;
          &lt;td&gt;è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ã€‚&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;500&lt;/td&gt;
          &lt;td&gt;Internal Server Error&lt;/td&gt;
          &lt;td&gt;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ã€‚&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;36-è¿‡æ»¤ä¿¡æ¯&#34;&gt;3.6 è¿‡æ»¤ä¿¡æ¯
&lt;/h3&gt;&lt;p&gt;å¦‚æœè®°å½•æ•°é‡å¾ˆå¤šï¼ŒæœåŠ¡å™¨ä¸å¯èƒ½éƒ½å°†å®ƒä»¬è¿”å›ç»™ç”¨æˆ·ã€‚API åº”è¯¥æä¾›å‚æ•°ï¼Œè¿‡æ»¤è¿”å›ç»“æœã€‚å¸¸è§çš„å‚æ•°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;?limit=10&lt;/code&gt;ï¼šæŒ‡å®šè¿”å›è®°å½•çš„æ•°é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;?offset=10&lt;/code&gt;ï¼šæŒ‡å®šè¿”å›è®°å½•çš„å¼€å§‹ä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;?page=2&amp;amp;per_page=100&lt;/code&gt;ï¼šæŒ‡å®šç¬¬å‡ é¡µï¼Œä»¥åŠæ¯é¡µçš„è®°å½•æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;?sortby=name&amp;amp;order=asc&lt;/code&gt;ï¼šæŒ‡å®šè¿”å›ç»“æœæŒ‰ç…§å“ªä¸ªå±æ€§æ’åºï¼Œä»¥åŠæ’åºé¡ºåºã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;?animal_type_id=1&lt;/code&gt;ï¼šæŒ‡å®šç­›é€‰æ¡ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;37-æ”¯æŒ-hateoasè¶…åª’ä½“ä½œä¸ºåº”ç”¨ç¨‹åºçŠ¶æ€å¼•æ“&#34;&gt;3.7 æ”¯æŒ HATEOASï¼ˆè¶…åª’ä½“ä½œä¸ºåº”ç”¨ç¨‹åºçŠ¶æ€å¼•æ“ï¼‰
&lt;/h3&gt;&lt;p&gt;HATEOAS è¦æ±‚å®¢æˆ·ç«¯èƒ½å¤Ÿé€šè¿‡æœåŠ¡å™¨è¿”å›çš„è¶…é“¾æ¥ï¼ˆURLï¼‰å¯¼èˆªåˆ°ç›¸å…³èµ„æºã€‚ç®€è€Œè¨€ä¹‹ï¼ŒHATEOAS è¦æ±‚ API çš„å“åº”ä¸ä»…åŒ…å«èµ„æºæ•°æ®ï¼Œè¿˜åº”è¯¥åŒ…å«ä¸èµ„æºç›¸å…³çš„æ“ä½œé“¾æ¥ï¼Œå¸®åŠ©å®¢æˆ·ç«¯æ›´å¥½åœ°ç†è§£å¦‚ä½•è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚ä¾‹å¦‚ï¼Œè·å–ç”¨æˆ·ä¿¡æ¯æ—¶ï¼Œé™¤äº†è¿”å›ç”¨æˆ·çš„è¯¦ç»†æ•°æ®å¤–ï¼ŒAPI è¿˜å¯ä»¥æä¾›ç›¸å…³æ“ä½œçš„é“¾æ¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;user_id&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;123&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;John Doe&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;links&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;#34;self&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/users/123&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;#34;update&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/users/123/update&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nt&#34;&gt;&amp;#34;delete&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/users/123/delete&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;38-æ•°æ®æ ¼å¼&#34;&gt;3.8 æ•°æ®æ ¼å¼
&lt;/h3&gt;&lt;p&gt;è¿”å›æ•°æ®æ ¼å¼é€šå¸¸ä½¿ç”¨ JSON æˆ– XMLï¼Œå…¶ä¸­ JSON å› å…¶è½»é‡çº§å’Œæ˜“è¯»æ€§ï¼Œå·²æˆä¸º RESTful API äº‹å®ä¸Šçš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚ç»Ÿä¸€è¿”å› JSON æ ¼å¼ï¼ŒåŒ…å«æ•°æ®ã€çŠ¶æ€ç å’Œé”™è¯¯ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;status&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;data&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;123&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Alice&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;error&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;39-ç‰ˆæœ¬æ§åˆ¶&#34;&gt;3.9 ç‰ˆæœ¬æ§åˆ¶
&lt;/h3&gt;&lt;p&gt;å½“ API å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥é€šè¿‡ç‰ˆæœ¬å·æ¥ç®¡ç†ä¸åŒç‰ˆæœ¬çš„ APIï¼Œä»¥ä¿æŒå‘åå…¼å®¹æ€§ã€‚å¸¸è§çš„ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;URL è·¯å¾„ç‰ˆæœ¬&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;/v1/resource&lt;/code&gt;ï¼Œä¼˜ç‚¹æ˜¯ç®€å•ã€æ˜¾å¼ã€æ˜“ç¼“å­˜ï¼›ç¼ºç‚¹æ˜¯ä¸å¤Ÿä¼˜é›…ã€URL è†¨èƒ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯·æ±‚å¤´ç‰ˆæœ¬&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;X - API - Version: 1&lt;/code&gt;ï¼Œä¼˜ç‚¹æ˜¯ URL å¹²å‡€ã€æ¾è€¦åˆï¼›ç¼ºç‚¹æ˜¯éš¾è°ƒè¯•ã€å¯èƒ½è¢«ä»£ç†ç§»é™¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…å®¹åå•†ç‰ˆæœ¬&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;Accept: application/vnd.example.v1+json&lt;/code&gt;ï¼Œä¼˜ç‚¹æ˜¯ RESTfulã€æ ‡å‡† HTTP å¤´ï¼›ç¼ºç‚¹æ˜¯å¤æ‚ã€å®¢æˆ·ç«¯æ”¯æŒä¸ä¸€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŸ¥è¯¢å‚æ•°ç‰ˆæœ¬&lt;/strong&gt;ï¼šå¦‚ &lt;code&gt;/resource?version=1&lt;/code&gt;ï¼Œä¼˜ç‚¹æ˜¯ç®€å•ã€æ˜¾å¼ï¼›ç¼ºç‚¹æ˜¯ä¸æ˜¯ RESTfulã€URL æ±¡æŸ“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å››restful-apiçš„è®¾è®¡ç¤ºä¾‹&#34;&gt;å››ã€RESTful APIçš„è®¾è®¡ç¤ºä¾‹
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸€ä¸ªç®€å•çš„åšå®¢å¹³å°ä¸ºä¾‹ï¼Œè®¾è®¡å…¶ RESTful APIï¼š&lt;/p&gt;
&lt;h3 id=&#34;41-èµ„æºåˆ—è¡¨&#34;&gt;4.1 èµ„æºåˆ—è¡¨
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·ï¼ˆ&lt;code&gt;/users&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;æ–‡ç« ï¼ˆ&lt;code&gt;/articles&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;è¯„è®ºï¼ˆ&lt;code&gt;/comments&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;42-æ“ä½œè®¾è®¡&#34;&gt;4.2 æ“ä½œè®¾è®¡
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;æ“ä½œ&lt;/th&gt;
          &lt;th&gt;HTTP æ–¹æ³•&lt;/th&gt;
          &lt;th&gt;URL&lt;/th&gt;
          &lt;th&gt;è¯´æ˜&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;è·å–æ‰€æœ‰ç”¨æˆ·&lt;/td&gt;
          &lt;td&gt;GET&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;/users&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;è¿”å›æ‰€æœ‰ç”¨æˆ·çš„åˆ—è¡¨&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;è·å–ç‰¹å®šç”¨æˆ·&lt;/td&gt;
          &lt;td&gt;GET&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;/users/{id}&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;è¿”å›æŒ‡å®š ID ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;åˆ›å»ºç”¨æˆ·&lt;/td&gt;
          &lt;td&gt;POST&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;/users&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;æ ¹æ®è¯·æ±‚ä½“ä¸­çš„æ•°æ®åˆ›å»ºæ–°ç”¨æˆ·&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æ›´æ–°ç”¨æˆ·ä¿¡æ¯&lt;/td&gt;
          &lt;td&gt;PUT&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;/users/{id}&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;æ›´æ–°æŒ‡å®š ID ç”¨æˆ·çš„ä¿¡æ¯&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;åˆ é™¤ç”¨æˆ·&lt;/td&gt;
          &lt;td&gt;DELETE&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;/users/{id}&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;åˆ é™¤æŒ‡å®š ID çš„ç”¨æˆ·&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;è·å–æ‰€æœ‰æ–‡ç« &lt;/td&gt;
          &lt;td&gt;GET&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;/articles&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;è¿”å›æ‰€æœ‰æ–‡ç« çš„åˆ—è¡¨&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;è·å–ç‰¹å®šæ–‡ç« &lt;/td&gt;
          &lt;td&gt;GET&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;/articles/{id}&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;è¿”å›æŒ‡å®š ID æ–‡ç« çš„è¯¦ç»†ä¿¡æ¯&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;åˆ›å»ºæ–‡ç« &lt;/td&gt;
          &lt;td&gt;POST&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;/articles&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;æ ¹æ®è¯·æ±‚ä½“ä¸­çš„æ•°æ®åˆ›å»ºæ–°æ–‡ç« &lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æ›´æ–°æ–‡ç« ä¿¡æ¯&lt;/td&gt;
          &lt;td&gt;PUT&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;/articles/{id}&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;æ›´æ–°æŒ‡å®š ID æ–‡ç« çš„ä¿¡æ¯&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;åˆ é™¤æ–‡ç« &lt;/td&gt;
          &lt;td&gt;DELETE&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;/articles/{id}&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;åˆ é™¤æŒ‡å®š ID çš„æ–‡ç« &lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;è·å–ç‰¹å®šæ–‡ç« çš„è¯„è®º&lt;/td&gt;
          &lt;td&gt;GET&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;/articles/{id}/comments&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;è¿”å›æŒ‡å®š ID æ–‡ç« çš„æ‰€æœ‰è¯„è®º&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;åˆ›å»ºè¯„è®º&lt;/td&gt;
          &lt;td&gt;POST&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;/articles/{id}/comments&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;åœ¨æŒ‡å®š ID æ–‡ç« ä¸‹åˆ›å»ºæ–°è¯„è®º&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;åˆ é™¤è¯„è®º&lt;/td&gt;
          &lt;td&gt;DELETE&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;/comments/{id}&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;åˆ é™¤æŒ‡å®š ID çš„è¯„è®º&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;äº”restful-apiçš„å®ç°&#34;&gt;äº”ã€RESTful APIçš„å®ç°
&lt;/h2&gt;&lt;h3 id=&#34;51-æœåŠ¡ç«¯å®ç°ä»¥-nodejs-ä¸ºä¾‹&#34;&gt;5.1 æœåŠ¡ç«¯å®ç°ï¼ˆä»¥ Node.js ä¸ºä¾‹ï¼‰
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;59
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;60
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;61
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;62
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;express&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;express&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;express&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;use&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;express&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// æ¨¡æ‹Ÿç”¨æˆ·æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;users&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;John Doe&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;email&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;john@example.com&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Jane Smith&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;email&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;jane@example.com&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// è·å–æ‰€æœ‰ç”¨æˆ·
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;/api/v1/users&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;users&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// åˆ›å»ºæ–°ç”¨æˆ·
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;post&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;/api/v1/users&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;newUser&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;users&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;push&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;newUser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;201&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;201&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;newUser&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// è·å–ç‰¹å®šç”¨æˆ·
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;/api/v1/users/:id&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;userId&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;parseInt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;users&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;find&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;userId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;404&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;404&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;User not found&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// æ›´æ–°ç”¨æˆ·ä¿¡æ¯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;put&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;/api/v1/users/:id&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;userId&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;parseInt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;updatedUser&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;users&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;findIndex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;userId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!==&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;users&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;updatedUser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;updatedUser&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;404&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;404&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;User not found&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// åˆ é™¤ç”¨æˆ·
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;/api/v1/users/:id&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;userId&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;parseInt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;users&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;findIndex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;id&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;===&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;userId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!==&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;users&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;splice&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;204&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;send&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;404&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;404&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;User not found&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;port&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;env&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PORT&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;listen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`Server is running on port &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;52-å®¢æˆ·ç«¯è°ƒç”¨ä»¥-javascript-fetch-ä¸ºä¾‹&#34;&gt;5.2 å®¢æˆ·ç«¯è°ƒç”¨ï¼ˆä»¥ JavaScript Fetch ä¸ºä¾‹ï¼‰
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// è·å–ç”¨æˆ·æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fetch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;https://api.example.com/users/123&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;then&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;then&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;catch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;error&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;console&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Error:&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// æäº¤æ–°æ–‡ç« 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fetch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;https://api.example.com/articles&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;POST&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Content - Type&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;application/json&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;JSON&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;stringify&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;title&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Hello REST&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;...&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;å…­restful-apiçš„åº”ç”¨åœºæ™¯&#34;&gt;å…­ã€RESTful APIçš„åº”ç”¨åœºæ™¯
&lt;/h2&gt;&lt;h3 id=&#34;61-web-æœåŠ¡&#34;&gt;6.1 Web æœåŠ¡
&lt;/h3&gt;&lt;p&gt;æä¾› Web æœåŠ¡ï¼Œå¦‚ç¤¾äº¤åª’ä½“ã€ç”µå•†ç½‘ç«™ç­‰ã€‚å‰ç«¯ï¼ˆå¦‚ JavaScriptã€Angularã€React ç­‰ï¼‰å¯ä»¥é€šè¿‡ RESTful API ä¸åç«¯æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼Œè·å–å’Œæ›´æ–°æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç”µå•†ç½‘ç«™çš„å‰ç«¯å¯ä»¥ä½¿ç”¨ RESTful API ä»æœåŠ¡å™¨è·å–å•†å“åˆ—è¡¨ã€ç”¨æˆ·ä¿¡æ¯ç­‰ï¼Œå¹¶å°†ç”¨æˆ·çš„è®¢å•ä¿¡æ¯å‘é€åˆ°æœåŠ¡å™¨è¿›è¡Œå¤„ç†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;62-ç§»åŠ¨åº”ç”¨&#34;&gt;6.2 ç§»åŠ¨åº”ç”¨
&lt;/h3&gt;&lt;p&gt;ç§»åŠ¨åº”ç”¨é€šè¿‡ RESTful API ä¸æœåŠ¡å™¨äº¤äº’ï¼Œè·å–å’Œæ›´æ–°æ•°æ®ï¼Œå®ç°ç”¨æˆ·ç™»å½•ã€æ•°æ®åŒæ­¥ç­‰åŠŸèƒ½ã€‚Android å’Œ iOS åº”ç”¨å¯ä»¥ä½¿ç”¨ RESTful API ä¸æœåŠ¡å™¨äº¤äº’ï¼Œæä¾›ä¸°å¯Œçš„ç”¨æˆ·ä½“éªŒã€‚&lt;/p&gt;
&lt;h3 id=&#34;63-ç‰©è”ç½‘iot&#34;&gt;6.3 ç‰©è”ç½‘ï¼ˆIoTï¼‰
&lt;/h3&gt;&lt;p&gt;è®¾å¤‡é€šè¿‡ RESTful API ä¸æœåŠ¡å™¨é€šä¿¡ï¼Œå®ç°æ•°æ®é‡‡é›†å’Œæ§åˆ¶ã€‚ç‰©è”ç½‘è®¾å¤‡å¯ä»¥é€šè¿‡ RESTful API å°†é‡‡é›†åˆ°çš„æ•°æ®å‘é€åˆ°æœåŠ¡å™¨ï¼ŒåŒæ—¶æ¥æ”¶æœåŠ¡å™¨çš„æ§åˆ¶æŒ‡ä»¤ã€‚&lt;/p&gt;
&lt;h3 id=&#34;64-å¾®æœåŠ¡æ¶æ„&#34;&gt;6.4 å¾®æœåŠ¡æ¶æ„
&lt;/h3&gt;&lt;p&gt;å¾®æœåŠ¡ä¹‹é—´é€šè¿‡ RESTful API è¿›è¡Œé€šä¿¡å’Œåä½œã€‚æ¯ä¸ªå¾®æœåŠ¡éƒ½å¯ä»¥æš´éœ²è‡ªå·±çš„ RESTful APIï¼Œå…¶ä»–å¾®æœåŠ¡å¯ä»¥é€šè¿‡è°ƒç”¨è¿™äº› API æ¥è·å–æ‰€éœ€çš„æ•°æ®æˆ–æ‰§è¡Œç‰¹å®šçš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç”µå•†ç³»ç»Ÿå¯èƒ½ç”±ç”¨æˆ·æœåŠ¡ã€å•†å“æœåŠ¡ã€è®¢å•æœåŠ¡ç­‰å¤šä¸ªå¾®æœåŠ¡ç»„æˆï¼Œè¿™äº›å¾®æœåŠ¡ä¹‹é—´å¯ä»¥é€šè¿‡ RESTful API è¿›è¡Œæ•°æ®äº¤äº’å’Œä¸šåŠ¡åä½œã€‚&lt;/p&gt;
&lt;h3 id=&#34;65-ä¼ä¸šçº§åº”ç”¨é›†æˆ&#34;&gt;6.5 ä¼ä¸šçº§åº”ç”¨é›†æˆ
&lt;/h3&gt;&lt;p&gt;ä¼ä¸šå†…éƒ¨çš„ä¸åŒç³»ç»Ÿä¹‹é—´å¯ä»¥ä½¿ç”¨ RESTful API è¿›è¡Œé›†æˆã€‚ä¾‹å¦‚ï¼Œä¼ä¸šçš„å®¢æˆ·å…³ç³»ç®¡ç†ç³»ç»Ÿï¼ˆCRMï¼‰å’Œä¼ä¸šèµ„æºè§„åˆ’ç³»ç»Ÿï¼ˆERPï¼‰å¯ä»¥é€šè¿‡ RESTful API è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œå®ç°ä¿¡æ¯å…±äº«å’Œä¸šåŠ¡æµç¨‹çš„ååŒã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸ƒrestful-apiä¸ä¼ ç»Ÿ-apiçš„å¯¹æ¯”&#34;&gt;ä¸ƒã€RESTful APIä¸ä¼ ç»Ÿ APIçš„å¯¹æ¯”
&lt;/h2&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;æ¯”è¾ƒé¡¹&lt;/th&gt;
          &lt;th&gt;RESTful API&lt;/th&gt;
          &lt;th&gt;ä¼ ç»Ÿ API é£æ ¼&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;æ¥å£é£æ ¼&lt;/td&gt;
          &lt;td&gt;èµ„æºå¯¼å‘ï¼Œç»“æ„æ¸…æ™°&lt;/td&gt;
          &lt;td&gt;åŠ¨ä½œå¯¼å‘ï¼Œæ¥å£æ··ä¹±&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;åŠ¨ä½œè¡¨ç¤º&lt;/td&gt;
          &lt;td&gt;ä½¿ç”¨ HTTP æ–¹æ³•è¡¨ç¤ºåŠ¨ä½œ&lt;/td&gt;
          &lt;td&gt;æ¥å£è·¯å¾„ä¸­åŒ…å«åŠ¨è¯ï¼ˆå¦‚ &lt;code&gt;/getUser&lt;/code&gt;ï¼‰&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;å¯è¯»æ€§&lt;/td&gt;
          &lt;td&gt;é«˜ï¼Œå¯ç›´è§‚ç†è§£æ“ä½œå«ä¹‰&lt;/td&gt;
          &lt;td&gt;ä½ï¼Œéœ€è¦é˜…è¯»æ–‡æ¡£æ‰èƒ½ç†è§£&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ç»´æŠ¤æ€§&lt;/td&gt;
          &lt;td&gt;æ˜“äºæ‰©å±•å’Œç»´æŠ¤&lt;/td&gt;
          &lt;td&gt;æ‰©å±•æ€§å·®ï¼Œæ¥å£è†¨èƒ€&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æ•°æ®ä¼ è¾“æ ¼å¼&lt;/td&gt;
          &lt;td&gt;é€šå¸¸ä½¿ç”¨ JSON æˆ– XMLï¼Œæœ‰æ˜ç¡®æ ‡å‡†&lt;/td&gt;
          &lt;td&gt;å¯èƒ½ä½¿ç”¨å¤šç§æ ¼å¼ï¼Œæ— æ˜ç¡®æ ‡å‡†&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;çŠ¶æ€ä¸ç¼“å­˜&lt;/td&gt;
          &lt;td&gt;å¼ºè°ƒçŠ¶æ€æ— å…³æ€§ï¼Œå¯åˆ©ç”¨ HTTP ç¼“å­˜æœºåˆ¶&lt;/td&gt;
          &lt;td&gt;å¯èƒ½ä¾èµ–æœåŠ¡å™¨ç«¯çŠ¶æ€ï¼Œç¼“å­˜ç­–ç•¥ä¸ä¸€è‡´&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;å®‰å…¨æ€§å’Œè®¤è¯&lt;/td&gt;
          &lt;td&gt;æ”¯æŒå„ç§å®‰å…¨æ€§æªæ–½ï¼Œå¦‚ HTTPSã€è®¤è¯ã€æˆæƒç­‰&lt;/td&gt;
          &lt;td&gt;å¯èƒ½ç¼ºä¹ç»Ÿä¸€çš„å®‰å…¨æ ‡å‡†&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æ¥å£ä¸€è‡´æ€§&lt;/td&gt;
          &lt;td&gt;ç»Ÿä¸€æ¥å£ï¼Œæ˜“äºä½¿ç”¨&lt;/td&gt;
          &lt;td&gt;æ¥å£è®¾è®¡æ¾æ•£ï¼Œä¸ä¸€è‡´&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;èµ„æºå…³è”æ€§&lt;/td&gt;
          &lt;td&gt;åœ¨å“åº”ä¸­æä¾›ç›¸å…³èµ„æºçš„é“¾æ¥ï¼Œå…·æœ‰è‡ªæè¿°æ€§&lt;/td&gt;
          &lt;td&gt;é€šå¸¸ä¸æä¾›è‡ªæè¿°æ€§&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç»¼ä¸Šæ‰€è¿°ï¼ŒRESTful API ä»¥å…¶ç®€æ´ã€çµæ´»ã€å¯æ‰©å±•ç­‰ä¼˜ç‚¹ï¼Œæˆä¸ºç°ä»£ Web å¼€å‘ä¸­ä¸»æµçš„ API è®¾è®¡é£æ ¼ä¹‹ä¸€ï¼Œå¹¿æ³›åº”ç”¨äºå„ç§ç½‘ç»œåº”ç”¨åœºæ™¯ä¸­ã€‚åœ¨è®¾è®¡å’Œå¼€å‘ RESTful API æ—¶ï¼Œéµå¾ªå…¶è®¾è®¡åŸåˆ™å’Œæœ€ä½³å®è·µï¼Œèƒ½å¤Ÿæ„å»ºå‡ºé«˜æ•ˆã€æ˜“ç”¨ã€å¯ç»´æŠ¤çš„ API ç³»ç»Ÿã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Github &#43; PicGo æ­å»ºå›¾åºŠ</title>
        <link>https://charles-7777.github.io/hugo-stack/p/github--picgo-%E6%90%AD%E5%BB%BA%E5%9B%BE%E5%BA%8A/</link>
        <pubDate>Thu, 12 Jun 2025 19:33:46 +0800</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/github--picgo-%E6%90%AD%E5%BB%BA%E5%9B%BE%E5%BA%8A/</guid>
        <description>&lt;h2 id=&#34;åˆ›å»ºpublicä»“åº“ç”¨æ¥å­˜æ”¾ç…§ç‰‡&#34;&gt;åˆ›å»ºpublicä»“åº“ç”¨æ¥å­˜æ”¾ç…§ç‰‡
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/image-20250612194003078.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250612194003078&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;åˆ›å»ºtoken&#34;&gt;åˆ›å»ºtoken
&lt;/h2&gt;&lt;p&gt;tokenå°†æ¥PicGoæ“ä½œä½ çš„githubä»“åº“æ¥ä¸Šä¼ å›¾ç‰‡æ—¶è¦ç”¨åˆ°ï¼Œåœ¨ GitHub è´¦æˆ·ä¸‹ &lt;code&gt;Setting - Developer setting - Personal access tokens(classic)&lt;/code&gt; ä¸‹åˆ›å»ºä¸€ä¸ªä¸è¿‡æœŸ(no expiration)çš„ Tokenï¼Œæƒé™éœ€è¦å¼€å¯ &lt;code&gt;repo&lt;/code&gt;.è¿™ä¸ªæˆ‘ä»¬åœ¨ç”¨Github action æ¥éƒ¨ç½²åšå®¢ä»“åº“æ—¶å·²ç»åˆ›å»ºäº†ï¼Œç”¨é‚£ä¸ªå°±å¥½.token åœ¨åˆ›å»ºæ—¶åªæ˜¾ç¤ºä¸€æ¬¡ï¼Œè¦ä¿å­˜å¥½å“¦ï¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/image-20250612194911382.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250612194911382&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;é…ç½®picgo&#34;&gt;é…ç½®PicGo
&lt;/h2&gt;&lt;h3 id=&#34;github-æœç´¢picgo-ç„¶åå®‰è£…&#34;&gt;github æœç´¢&lt;a class=&#34;link&#34; href=&#34;https://github.com/Molunerfinn/PicGo&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;PicGo&lt;/a&gt; ç„¶åå®‰è£…
&lt;/h3&gt;&lt;h3 id=&#34;å›¾åºŠå…·ä½“å‚æ•°é…ç½®&#34;&gt;å›¾åºŠå…·ä½“å‚æ•°é…ç½®
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/image-20250612195909612.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250612195909612&#34;
	
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»“åº“å åˆ†æ”¯å å¯¹åº”äºä¹‹å‰ä½ åˆ›å»ºçš„GitHubä»“åº“&lt;br&gt;
Tokenå°±æ˜¯å‰é¢åˆ›å»ºçš„Token,è¢«PicGoç”¨æ¥ä¸Šä¼ ç…§ç‰‡åˆ°é•¿ä»“åº“&lt;br&gt;
è·¯å¾„å¯ä»¥è‡ªå®šä¹‰&lt;br&gt;
è‡ªå®šä¹‰åŸŸåæ ¼å¼:https://cdn.jsdelivr.net/gh/ç”¨æˆ·å/ä»“åº“å@åˆ†æ”¯å&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2 id=&#34;typora&#34;&gt;Typora
&lt;/h2&gt;&lt;p&gt;Typora å¯æ­é…PicGoä½¿ç”¨&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/image-20250612201005537.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250612201005537&#34;
	
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è‹¥PicGoæ˜¾ç¤ºunable to verify the first certificate at TLS,æ— æ³•ä¸Šä¼ ï¼Œåˆ™å¯èƒ½æ˜¯ä½ çš„ç½‘ç»œåŠ é€Ÿå·¥å…·é€ æˆçš„æŸäº›ç½‘ç»œåŠ é€Ÿå·¥å…·å¯èƒ½ä¼šä¿®æ”¹ç½‘ç»œæµé‡ï¼Œå¯èƒ½ä¸ SSLè¯ä¹¦éªŒè¯æœºåˆ¶å‘ç”Ÿå†²çªã€‚è¿™å¯èƒ½å¯¼è‡´ SSL è¯ä¹¦éªŒè¯å¤±è´¥ï¼Œå› ä¸ºæœåŠ¡å™¨çš„è¯ä¹¦æ— æ³•æ­£å¸¸éªŒè¯ï¼Œä»è€Œå‡ºç°ç±»ä¼¼ &amp;ldquo;unable to verify the first certificate&amp;rdquo; çš„é”™è¯¯ã€‚ä¾‹å¦‚æˆ‘ä¹‹å‰ç”¨Watt Toolkitå°±å‡ºç°äº†ï¼š&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/image-20250613102831957.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250613102831957&#34;
	
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœTyporaæ˜¾ç¤ºfailed to fetch ï¼›æ£€æŸ¥PicGo  server è®¾ç½®çš„ç›‘å¬åœ°å€æ˜¯å¦ä¸€è‡´ï¼ˆç‚¹å‡»Typoraå›¾ç‰‡è®¾ç½®ä¸­çš„éªŒè¯å›¾ç‰‡ä¸Šä¼ ï¼‰&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/image-20250612202248915.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250612202248915&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;jsdelivr&#34;&gt;jsDelivr
&lt;/h2&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.jsdelivr.com/documentation#id-github&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;jsDelivr&lt;/a&gt;æ˜¯ä¸€ä¸ªå…è´¹ã€å¼€æºçš„åŠ é€ŸCDNå…¬å…±æœåŠ¡,æ‰˜ç®¡äº†è®¸å¤šå¤§å¤§å°å°çš„é¡¹ç›®,å¯åŠ é€Ÿè®¿é—®æ‰˜ç®¡çš„é¡¹ç›®ç›®å½•æˆ–å›¾ç‰‡èµ„æºã€‚ ä»–æ”¯æŒæä¾›&lt;code&gt;npm&lt;/code&gt;ã€&lt;code&gt;Github&lt;/code&gt;ã€&lt;code&gt;WordPress&lt;/code&gt;ä¸Šèµ„æºcdnæœåŠ¡ã€‚&lt;/p&gt;
&lt;blockquote class=&#34;alert alert-tip&#34;&gt;
    &lt;p&gt;CDN (å…¨ç§° Content Delivery Network)ï¼Œå³å†…å®¹åˆ†å‘ç½‘ç»œã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;CDNæ„å»ºåœ¨ç°æœ‰ç½‘ç»œåŸºç¡€ä¹‹ä¸Šçš„æ™ºèƒ½è™šæ‹Ÿç½‘ç»œï¼Œä¾é éƒ¨ç½²åœ¨å„åœ°çš„è¾¹ç¼˜æœåŠ¡å™¨ï¼Œé€šè¿‡ä¸­å¿ƒå¹³å°çš„è´Ÿè½½å‡è¡¡ã€å†…å®¹åˆ†å‘ã€è°ƒåº¦ç­‰åŠŸèƒ½æ¨¡å—ï¼Œä½¿ç”¨æˆ·å°±è¿‘è·å–æ‰€éœ€å†…å®¹ï¼Œé™ä½ç½‘ç»œæ‹¥å¡ï¼Œæé«˜ç”¨æˆ·è®¿é—®å“åº”é€Ÿåº¦å’Œå‘½ä¸­ç‡ã€‚&lt;/p&gt;
&lt;p&gt;CDN çš„å…³é”®æŠ€æœ¯ä¸»è¦æœ‰å†…å®¹å­˜å‚¨å’Œåˆ†å‘æŠ€æœ¯ï¼Œç®€å•æ¥è®²ï¼ŒCDNå°±æ˜¯æ ¹æ®ç”¨æˆ·ä½ç½®åˆ†é…æœ€è¿‘çš„èµ„æºï¼Œäºæ˜¯ï¼Œç”¨æˆ·åœ¨ä¸Šç½‘çš„æ—¶å€™ä¸ç”¨ç›´æ¥è®¿é—®æºç«™ï¼Œè€Œæ˜¯è®¿é—®ç¦»ä»–â€œæœ€è¿‘çš„â€ä¸€ä¸ª CDN èŠ‚ç‚¹(ä¹Ÿå«åšâ€œè¾¹ç¼˜èŠ‚ç‚¹â€ã€edge node)ï¼Œå…¶å®å°±æ˜¯ç¼“å­˜äº†æºç«™å†…å®¹çš„ä»£ç†æœåŠ¡å™¨&lt;/p&gt;
</description>
        </item>
        <item>
        <title>hugo stack blog æ­å»ºè®°å½•</title>
        <link>https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/</link>
        <pubDate>Mon, 09 Jun 2025 00:00:00 +0000</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/</guid>
        <description>&lt;img src="https://cdn.jsdelivr.net/gh/charles-7777/ImageBed@main/blog/hugo.png" alt="Featured image of post hugo stack blog æ­å»ºè®°å½•" /&gt;&lt;!-- &lt;div align=&#39;center&#39;&gt; &lt;font size=&#39;70&#39;&gt;hugo stack blog æ­å»ºè®°å½•&lt;/font&gt;&lt;/div&gt; --&gt;
&lt;h2 id=&#34;åˆ›å»ºä»“åº“&#34;&gt;åˆ›å»ºä»“åº“
&lt;/h2&gt;&lt;p&gt;é¦–å…ˆåœ¨githubåˆ›å»ºä¸¤ä¸ªä»“åº“ï¼Œä¸€ä¸ªç”¨äºå­˜å‚¨&lt;code&gt;hugo new site&lt;/code&gt;åˆ›å»ºçš„workspaceï¼Œè¿™ä¸ªè®¾ç½®ä¸ºprivateç§å¯†ï¼›å¦ä¸€ä¸ªä»“åº“ç”¨æ¥å­˜å‚¨&lt;code&gt;hugo -D&lt;/code&gt;ç”Ÿæˆçš„ç½‘é¡µæ–‡ä»¶ ï¼Œè®¾ç½®ä¸ºå…¬å¼€:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/1.JPG&#34;
	width=&#34;417&#34;
	height=&#34;202&#34;
	srcset=&#34;https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/1_hu_a4b7f6b66ebad2ea.JPG 480w, https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/1_hu_a950810744288ed5.JPG 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;206&#34;
		data-flex-basis=&#34;495px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;æœ¬åœ°è·å–sshå¯†é’¥&#34;&gt;æœ¬åœ°è·å–sshå¯†é’¥
&lt;/h2&gt;&lt;p&gt;ç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git config --global user.email &amp;#34;you@example.com&amp;#34;   #you@example.comæ›¿æ¢ä¸ºä½ çš„é‚®ç®±
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git config --global user.name &amp;#34;Your Name&amp;#34;          #Your Nameæ›¿æ¢ä¸ºä½ çš„åå­—å¹¶å›è½¦ 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç”Ÿæˆssh key,åœ¨git bashä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤:&lt;br&gt;
&lt;code&gt;ssh-keygen -t rsa -C &amp;quot;your_email@example.com&amp;quot;&lt;/code&gt;
ç”Ÿæˆçš„å¯†é’¥å°†å­˜å‚¨åœ¨&lt;code&gt;C:\uers\username\.ssh\&lt;/code&gt;è·¯å¾„ä¸‹
æ‰“å¼€å…¬é’¥æ–‡ä»¶ &lt;code&gt;id_rsa.pub&lt;/code&gt;ï¼Œ å¤åˆ¶æ‰€æœ‰å†…å®¹ï¼Œåœ¨GitHubä¸Šæ‰“å¼€&lt;code&gt;Setting -&amp;gt; SSH and GPG keys -&amp;gt; add SSH key&lt;/code&gt;ï¼Œå°†å¤åˆ¶çš„å†…å®¹ç²˜è´´åœ¨é‡Œè¾¹ï¼Œä¿å­˜ã€‚&lt;/p&gt;
&lt;p&gt;è‹¥é…ç½®å®Œåï¼Œè¿˜æ˜¯æ˜¾ç¤ºæ— æ³•è¿æ¥åˆ°github,å¯èƒ½æ˜¯ä½ çš„Windowsç”µè„‘çš„username æ˜¯ä¸­æ–‡å¯¼è‡´çš„bug
æˆ–è€…å°è¯•åœ¨&lt;code&gt;.ssh&lt;/code&gt; ä¸‹åˆ›å»ºä¸€ä¸ªconfig æ–‡ä»¶&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Host github.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;HostName ssh.github.com  &lt;span class=&#34;c1&#34;&gt;# **è¿™æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†**&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;User git
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Port &lt;span class=&#34;m&#34;&gt;443&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;PreferredAuthentications publickey
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;IdentityFile ~/.ssh/id_rsa
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;åˆ›å»ºgithub-token&#34;&gt;åˆ›å»ºgithub token
&lt;/h2&gt;&lt;p&gt;åœ¨ GitHub è´¦æˆ·ä¸‹ &lt;code&gt;Setting - Developer setting - Personal access tokens(classic)&lt;/code&gt; ä¸‹åˆ›å»ºä¸€ä¸ªä¸è¿‡æœŸ(no expiration)çš„ Tokenï¼Œæƒé™éœ€è¦å¼€å¯ &lt;code&gt;repo&lt;/code&gt; ä¸ &lt;code&gt;workflow&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/2.png&#34;
	width=&#34;999&#34;
	height=&#34;534&#34;
	srcset=&#34;https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/2_hu_67b62f5a97c7918e.png 480w, https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/2_hu_de60ae58fce194c.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;187&#34;
		data-flex-basis=&#34;448px&#34;
	
&gt;
ï¼ˆæ³¨æ„ï¼štokenåªä¼šæ˜¾ç¤ºä¸€æ¬¡ï¼Œè¯·åŠæ—¶ä¿å­˜ï¼‰
&lt;img src=&#34;https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/3.JPG&#34;
	width=&#34;1161&#34;
	height=&#34;274&#34;
	srcset=&#34;https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/3_hu_3526dfd694f8f521.JPG 480w, https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/3_hu_7e56dad6624b2df4.JPG 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;423&#34;
		data-flex-basis=&#34;1016px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;ç§å¯†æºä»“åº“è®¾ç½®token&#34;&gt;ç§å¯†æºä»“åº“è®¾ç½®token
&lt;/h2&gt;&lt;p&gt;åœ¨åšå®¢æºä»“åº“çš„ &lt;code&gt;Settings-&amp;gt;Secrets-&amp;gt;Actions&lt;/code&gt; ä¸­æ·»åŠ  &lt;code&gt;PERSONAL_TOKEN&lt;/code&gt; ç¯å¢ƒå˜é‡ä¸ºåˆšæ‰çš„ Token,&lt;br&gt;
è¿™æ · GitHub Action å°±å¯ä»¥è·å–åˆ°Token äº†ã€‚
&lt;img src=&#34;https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/4.JPG&#34;
	width=&#34;1115&#34;
	height=&#34;254&#34;
	srcset=&#34;https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/4_hu_cdee5da8242e9332.JPG 480w, https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/4_hu_e99e0d4552431752.JPG 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;438&#34;
		data-flex-basis=&#34;1053px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;æœ¬åœ°é¦–æ¬¡åˆ›å»ºåšå®¢&#34;&gt;æœ¬åœ°é¦–æ¬¡åˆ›å»ºåšå®¢
&lt;/h2&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;hugo new site hugo-stack-blog-dev  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git init  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git submodule add https://github.com/CaiJimmy/hugo-theme-stack/ themes/hugo-theme-stack  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;git submodule&lt;/code&gt;ä¸»è¦æ˜¯å°†è‡ªå·±çš„æ”¹åŠ¨ï¼Œä¸å¼•ç”¨çš„stackä¸»é¢˜ä»“åº“åˆ†å¼€ã€‚hugo-theme-stack ä¸‹çš„ç›®å½•ç»“æ„åŸºæœ¬ä¸ç«™ç‚¹æºç›®å½•ç»“æ„ä¸€è‡´
hugo ç”Ÿæˆç½‘ç«™æ—¶ä¼˜å…ˆå¯»æ‰¾ç«™ç‚¹æºç›®å½•ä¸‹çš„ï¼Œæ‰¾ä¸åˆ°ï¼Œæ‰ä¼šå»stackä¸»é¢˜å¯¹åº”ç›®å½•ä¸‹å¯»æ‰¾&lt;br&gt;
æ¥ä¸‹æ¥å°† exampleSiteæ ·ä¾‹æ•°æ®ä¸­çš„ Content å’Œ hugo.yaml å¤åˆ¶åˆ°ä¸»æ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶åˆ æ‰hugo.toml&lt;br&gt;
å¯ä»¥&lt;code&gt;hugo server -D&lt;/code&gt;çœ‹ä¸€ä¸‹åˆå§‹ç½‘ç«™é•¿å•¥æ ·&lt;br&gt;
åˆ›å»ºä¸€ç¯‡æ–°æ–‡ç« (åœ¨ä¸»ç›®å½•ä¸‹)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;hugo new post/blog1/index.zh-cn.md
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;åˆå§‹åŒ–åšå®¢æºä»“åº“ï¼Œæäº¤åˆ°github&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git add .  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git commit -m &lt;span class=&#34;s2&#34;&gt;&amp;#34;first commit&amp;#34;&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git branch -M main  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git remote add origin  git@github.com:charles-7777/hugo-stack-blog-dev.git    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git push -u origin main  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;åˆ›å»ºworkflowså‘å¸ƒæ–‡ä»¶&#34;&gt;åˆ›å»ºworkflowså‘å¸ƒæ–‡ä»¶
&lt;/h2&gt;&lt;p&gt;åœ¨æœ¬åœ°åšå®¢ä¸»ç›®å½•ä¸‹åˆ›å»º &lt;code&gt;.github/workflows&lt;/code&gt;ç›®å½•ï¼Œç„¶ååˆ›å»º&lt;code&gt;xxxx.yaml&lt;/code&gt;æ–‡ä»¶ã€‚æˆ‘çš„ GitHub Action é…ç½®ä¸ºï¼Œè‡ªåŠ¨å‘å¸ƒç¤ºä¾‹é…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;!-- ä»£ç å—é«˜äº®çš„è¯éœ€è¦æ ‡æ³¨è¯­è¨€ï¼Œè¿™ä¸ªæ˜¯markdown è¯­æ³• --&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;deploy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# ä»£ç æäº¤åˆ°mainåˆ†æ”¯æ—¶è§¦å‘github action&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;push&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;branches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;jobs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;deploy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;runs-on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ubuntu-latest&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;steps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Checkout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;uses&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;actions/checkout@v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;with&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;submodules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;recursive&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;fetch-depth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Setup Hugo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;uses&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;peaceiris/actions-hugo@v3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;with&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hugo-version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;0.147.7&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;extended&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Build Web&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;hugo -D&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Deploy Web&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;uses&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;peaceiris/actions-gh-pages@v4&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;with&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;PERSONAL_TOKEN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;${{ secrets.TOKEN }}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;EXTERNAL_REPOSITORY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;charles-7777/hugo-stack&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;PUBLISH_BRANCH&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;PUBLISH_DIR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;./public&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;commit_message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;auto deploy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æäº¤github actionçš„æ”¹åŠ¨åï¼Œæ¯æ¬¡push hugo-stack-blog-dev ,å°±ä¼šæŠŠåŸºäºè¿™ä¸ªå‚åº“ hugo -D ç”Ÿæˆçš„æ–‡ä»¶ è‡ªåŠ¨push åˆ°ä»“åº“ hugo-stack&lt;/p&gt;
&lt;h2 id=&#34;github-pages&#34;&gt;GitHub Pages
&lt;/h2&gt;&lt;p&gt;å‰å¾€hugo-stack ä»“åº“çš„&lt;code&gt;settings--&amp;gt;Pages&lt;/code&gt;å»æ·»åŠ deploy GitHub Pages
&lt;img src=&#34;https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/5.JPG&#34;
	width=&#34;1171&#34;
	height=&#34;463&#34;
	srcset=&#34;https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/5_hu_b0ef71104d7fedc5.JPG 480w, https://charles-7777.github.io/hugo-stack/p/hugo-stack-blog-%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/5_hu_e6a30c8f14b41da3.JPG 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;252&#34;
		data-flex-basis=&#34;606px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;åœ¨åˆ«çš„ç”µè„‘æ‹‰å–æºä»“åº“ä¿®æ”¹&#34;&gt;åœ¨åˆ«çš„ç”µè„‘æ‹‰å–æºä»“åº“ä¿®æ”¹
&lt;/h2&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git clone git@github.com:charles-7777/hugo-stack-blog-dev.git  
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git submodule init
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git submodule update
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote class=&#34;alert alert-tip&#34;&gt;
    &lt;p&gt;&lt;strong&gt;å‚è€ƒé“¾æ¥&lt;/strong&gt;&lt;br&gt;
&lt;a class=&#34;link&#34; href=&#34;https://letere-gzj.github.io/hugo-stack/tags/hugo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://letere-gzj.github.io/hugo-stack/tags/hugo/&lt;/a&gt;&lt;br&gt;
å‚è€ƒåšä¸»letere-gzjçš„è§†é¢‘






    


&lt;div class=&#34;video-wrapper&#34;&gt;
    &lt;iframe src=&#34;https://player.bilibili.com/player.html?as_wide=1&amp;amp;high_quality=1&amp;amp;page=1&amp;bvid=BV1bovfeaEtQ&#34;
            scrolling=&#34;no&#34;
            frameborder=&#34;no&#34;
            framespacing=&#34;0&#34;
            allowfullscreen=&#34;true&#34;
    &gt;
    &lt;/iframe&gt;
&lt;/div&gt;
&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote class=&#34;alert alert-note&#34;&gt;
    &lt;p&gt;markdownä¸­çš„å›¾ç‰‡ä¹Ÿå¯ä»¥ä¸ç”¨æœ¬åœ°çš„å›¾ç‰‡ï¼Œå¯ä»¥ä½¿ç”¨ç½‘ç»œurlï¼Œå¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ªå›¾åºŠï¼Œæ–¹ä¾¿ç®¡ç†ã€‚
&lt;a class=&#34;link&#34; href=&#34;https://charles-7777.github.io/hugo-stack/p/github--picgo-%E6%90%AD%E5%BB%BA%E5%9B%BE%E5%BA%8A/&#34; &gt;githubå›¾åºŠ&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
</description>
        </item>
        <item>
        <title>Cats&amp;Tags</title>
        <link>https://charles-7777.github.io/hugo-stack/cats-tags/</link>
        <pubDate>Tue, 28 May 2019 00:00:00 +0000</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/cats-tags/</guid>
        <description></description>
        </item>
        <item>
        <title>å½’æ¡£</title>
        <link>https://charles-7777.github.io/hugo-stack/archives/</link>
        <pubDate>Tue, 28 May 2019 00:00:00 +0000</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/archives/</guid>
        <description></description>
        </item>
        <item>
        <title></title>
        <link>https://charles-7777.github.io/hugo-stack/updatelog/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/updatelog/</guid>
        <description>&lt;!-- # &lt;center&gt;  æ›´æ–°æ—¥å¿—  --&gt;
&lt;h1 style=&#34;color: #add8e6; text-align: center;&#34;&gt;æ›´æ–°æ—¥å¿—&lt;/h1&gt;
&lt;table class=&#34;updates-table&#34;&gt;
  &lt;thead&gt;&lt;tr&gt;&lt;th&gt;æ›´æ–°å†…å®¹&lt;/th&gt;&lt;th&gt;æ—¶é—´&lt;/th&gt;&lt;th&gt;å¤‡æ³¨&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;
  &lt;tbody&gt;
    
      &lt;tr class=&#34;done&#34;&gt;
        &lt;td&gt;æ·»åŠ æ–°é¡µé¢&lt;/td&gt;
        &lt;td&gt;2025-7-29&lt;/td&gt;
        &lt;td&gt;æ›´æ–°æ—¥å¿—&lt;/td&gt;
      &lt;/tr&gt;
    
      &lt;tr class=&#34;&#34;&gt;
        &lt;td&gt;æ·»åŠ æ–°ç¬”è®°&lt;/td&gt;
        &lt;td&gt;&lt;/td&gt;
        &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
    
  &lt;/tbody&gt;
&lt;/table&gt;</description>
        </item>
        <item>
        <title>å…³äº</title>
        <link>https://charles-7777.github.io/hugo-stack/%E5%85%B3%E4%BA%8E/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/%E5%85%B3%E4%BA%8E/</guid>
        <description>&lt;!-- This is a test page for i18n support. --&gt;</description>
        </item>
        <item>
        <title>é“¾æ¥</title>
        <link>https://charles-7777.github.io/hugo-stack/%E9%93%BE%E6%8E%A5/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/%E9%93%BE%E6%8E%A5/</guid>
        <description>&lt;!-- To use this feature, add `links` section to frontmatter.

This page&#39;s frontmatter:

```yaml
links:
  - title: GitHub
    description: GitHub is the world&#39;s largest software development platform.
    website: https://github.com
    image: https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png
  - title: TypeScript
    description: TypeScript is a typed superset of JavaScript that compiles to plain JavaScript.
    website: https://www.typescriptlang.org
    image: ts-logo-128.jpg
```

`image` field accepts both local and external images. --&gt;</description>
        </item>
        <item>
        <title>æœç´¢</title>
        <link>https://charles-7777.github.io/hugo-stack/search/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://charles-7777.github.io/hugo-stack/search/</guid>
        <description></description>
        </item>
        
    </channel>
</rss>
